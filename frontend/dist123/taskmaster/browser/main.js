import{$ as P,$a as D,$b as he,A as Wt,Aa as _r,Ab as Bn,Ac as Pr,B as U,Ba as g,Bb as El,C as hn,Ca as ul,Cb as Tt,D as Gs,Da as ml,Db as wl,E as Un,Ea as ro,Eb as Tr,F as Kt,Fa as pl,Fb as ne,G as Gt,Ga as hl,Gb as Tl,H as Qs,Ha as Vn,Hb as Ml,I as Ya,Ia as p,Ib as kl,J as Xa,Ja as vr,Jb as Ue,K as Za,Ka as re,Kb as _t,L as pt,La as br,Lb as Pl,M as fn,Ma as fl,Mb as Al,N as Z,Na as c,Nb as xl,O as j,Oa as l,Ob as $e,P as B,Pa as b,Pb as Ol,Q as Ys,Qa as yr,Qb as Il,R as Ja,Ra as Cr,Rb as so,S as Fe,Sa as Q,Sb as oo,T as Xs,Ta as w,Tb as G,U as K,Ua as y,Ub as vt,V as z,Va as gl,Vb as Dl,W as Zs,Wa as ft,Wb as ao,X as $n,Xa as Ge,Xb as _n,Y as wt,Ya as Qe,Yb as Mr,Z as bi,Za as _l,Zb as Ti,_ as k,_a as d,_b as Nl,a as C,aa as Js,ab as R,ac as O,b as W,ba as el,bb as Si,bc as ue,c as qa,ca as eo,cb as ye,cc as fe,d as sm,da as tl,db as Ce,dc as st,e as le,ea as nl,eb as Se,ec as Qt,f as Ba,fa as ht,fb as Ei,fc as ge,g as Ha,ga as jn,gb as pe,gc as Rl,h as mr,ha as il,hb as Sr,hc as Fl,i as Hs,ia as yi,ib as Ut,ic as Ll,j as Ws,ja as to,jb as se,jc as _e,k as mt,ka as hr,kb as Me,kc as xe,l as Pe,la as rl,lb as gt,lc as Mt,m as Lt,ma as fr,mb as gn,mc as kt,n as Ie,na as sl,nb as vl,nc as Pt,o as N,oa as ol,ob as zn,oc as Ul,p as ce,pa as u,pb as Er,pc as $l,q as Wa,qa as al,qb as bl,qc as jl,r as Ka,ra as no,rb as wr,rc as ve,s as Ke,sa as E,sb as yl,sc as je,t as V,ta as ll,tb as wi,tc as be,u as pr,ua as cl,ub as Cl,uc as Vl,v as Re,va as dl,vb as qn,vc as zl,w as vi,wa as gr,wb as Sl,wc as At,x as Ga,xa as ee,xb as rt,xc as kr,y as Ks,ya as io,yb as Le,yc as Mi,z as Qa,za as Ci,zb as oe,zc as Yt}from"./chunk-V4YITTCU.js";var q="primary",$i=Symbol("RouteTitle"),po=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function yn(i){return new po(i)}function Yl(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],a=i[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function om(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!xt(i[e],t[e]))return!1;return!0}function xt(i,t){let e=i?ho(i):void 0,n=t?ho(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Xl(i[r],t[r]))return!1;return!0}function ho(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Xl(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}else return i===t}function Zl(i){return i.length>0?i[i.length-1]:null}function tn(i){return Wa(i)?i:ml(i)?Ie(Promise.resolve(i)):N(i)}var am={exact:ec,subset:tc},Jl={exact:lm,subset:cm,ignored:()=>!0};function ql(i,t,e){return am[e.paths](i.root,t.root,e.matrixParams)&&Jl[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function lm(i,t){return xt(i,t)}function ec(i,t,e){if(!vn(i.segments,t.segments)||!Or(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!ec(i.children[n],t.children[n],e))return!1;return!0}function cm(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Xl(i[e],t[e]))}function tc(i,t,e){return nc(i,t,t.segments,e)}function nc(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!vn(r,e)||t.hasChildren()||!Or(r,e,n))}else if(i.segments.length===e.length){if(!vn(i.segments,e)||!Or(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!tc(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!vn(i.segments,r)||!Or(i.segments,r,n)||!i.children[q]?!1:nc(i.children[q],t,s,n)}}function Or(i,t,e){return t.every((n,r)=>Jl[e](i[r].parameters,n.parameters))}var It=class{root;queryParams;fragment;_queryParamMap;constructor(t=new J([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=yn(this.queryParams),this._queryParamMap}toString(){return mm.serialize(this)}},J=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ir(this)}},Xt=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=yn(this.parameters),this._parameterMap}toString(){return rc(this)}};function dm(i,t){return vn(i,t)&&i.every((e,n)=>xt(e.parameters,t[n].parameters))}function vn(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function um(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===q&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==q&&(e=e.concat(t(r,n)))}),e}var Cn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:()=>new Zt,providedIn:"root"})}return i})(),Zt=class{parse(t){let e=new go(t);return new It(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ki(t.root,!0)}`,n=fm(t.queryParams),r=typeof t.fragment=="string"?`#${pm(t.fragment)}`:"";return`${e}${n}${r}`}},mm=new Zt;function Ir(i){return i.segments.map(t=>rc(t)).join("/")}function ki(i,t){if(!i.hasChildren())return Ir(i);if(t){let e=i.children[q]?ki(i.children[q],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==q&&n.push(`${r}:${ki(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=um(i,(n,r)=>r===q?[ki(i.children[q],!1)]:[`${r}:${ki(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[q]!=null?`${Ir(i)}/${e[0]}`:`${Ir(i)}/(${e.join("//")})`}}function ic(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ar(i){return ic(i).replace(/%3B/gi,";")}function pm(i){return encodeURI(i)}function fo(i){return ic(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dr(i){return decodeURIComponent(i)}function Bl(i){return Dr(i.replace(/\+/g,"%20"))}function rc(i){return`${fo(i.path)}${hm(i.parameters)}`}function hm(i){return Object.entries(i).map(([t,e])=>`;${fo(t)}=${fo(e)}`).join("")}function fm(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${Ar(e)}=${Ar(r)}`).join("&"):`${Ar(e)}=${Ar(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var gm=/^[^\/()?;#]+/;function lo(i){let t=i.match(gm);return t?t[0]:""}var _m=/^[^\/()?;=#]+/;function vm(i){let t=i.match(_m);return t?t[0]:""}var bm=/^[^=?&#]+/;function ym(i){let t=i.match(bm);return t?t[0]:""}var Cm=/^[^&#]+/;function Sm(i){let t=i.match(Cm);return t?t[0]:""}var go=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[q]=new J(t,e)),n}parseSegment(){let t=lo(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(t),new Xt(Dr(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=vm(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=lo(this.remaining);r&&(n=r,this.capture(n))}t[Dr(e)]=Dr(n)}parseQueryParam(t){let e=ym(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=Sm(this.remaining);o&&(n=o,this.capture(n))}let r=Bl(e),s=Bl(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=lo(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new j(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=q);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[q]:new J([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new j(4011,!1)}};function sc(i){return i.segments.length>0?new J([],{[q]:i}):i}function oc(i){let t={};for(let[n,r]of Object.entries(i.children)){let s=oc(r);if(n===q&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new J(i.segments,t);return Em(e)}function Em(i){if(i.numberOfChildren===1&&i.children[q]){let t=i.children[q];return new J(i.segments.concat(t.segments),t.children)}return i}function Jt(i){return i instanceof It}function ac(i,t,e=null,n=null){let r=lc(i);return cc(r,t,e,n)}function lc(i){let t;function e(s){let o={};for(let m of s.children){let h=e(m);o[m.outlet]=h}let a=new J(s.url,o);return s===i&&(t=a),a}let n=e(i.root),r=sc(n);return t??r}function cc(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return co(r,r,r,e,n);let s=wm(t);if(s.toRoot())return co(r,r,new J([],{}),e,n);let o=Tm(s,r,i),a=o.processChildren?Ai(o.segmentGroup,o.index,s.commands):uc(o.segmentGroup,o.index,s.commands);return co(r,o.segmentGroup,a,e,n)}function Rr(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Oi(i){return typeof i=="object"&&i!=null&&i.outlets}function co(i,t,e,n,r){let s={};n&&Object.entries(n).forEach(([m,h])=>{s[m]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;i===t?o=e:o=dc(i,t,e);let a=sc(oc(o));return new It(a,s,r)}function dc(i,t,e){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===t?n[r]=e:n[r]=dc(s,t,e)}),new J(i.segments,n)}var Fr=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rr(n[0]))throw new j(4003,!1);let r=n.find(Oi);if(r&&r!==Zl(n))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wm(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new Fr(!0,0,i);let t=0,e=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([m,h])=>{a[m]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,m)=>{m==0&&a==="."||(m==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Fr(e,t,n)}var Kn=class{segmentGroup;processChildren;index;constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function Tm(i,t,e){if(i.isAbsolute)return new Kn(t,!0,0);if(!e)return new Kn(t,!1,NaN);if(e.parent===null)return new Kn(e,!0,0);let n=Rr(i.commands[0])?0:1,r=e.segments.length-1+n;return Mm(e,r,i.numberOfDoubleDots)}function Mm(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new j(4005,!1);r=n.segments.length}return new Kn(n,!1,r-s)}function km(i){return Oi(i[0])?i[0].outlets:{[q]:i}}function uc(i,t,e){if(i??=new J([],{}),i.segments.length===0&&i.hasChildren())return Ai(i,t,e);let n=Pm(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new J(i.segments.slice(0,n.pathIndex),{});return s.children[q]=new J(i.segments.slice(n.pathIndex),i.children),Ai(s,0,r)}else return n.match&&r.length===0?new J(i.segments,{}):n.match&&!i.hasChildren()?_o(i,t,e):n.match?Ai(i,0,r):_o(i,t,e)}function Ai(i,t,e){if(e.length===0)return new J(i.segments,{});{let n=km(e),r={};if(Object.keys(n).some(s=>s!==q)&&i.children[q]&&i.numberOfChildren===1&&i.children[q].segments.length===0){let s=Ai(i.children[q],t,e);return new J(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=uc(i.children[s],t,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new J(i.segments,r)}}function Pm(i,t,e){let n=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;let o=i.segments[r],a=e[n];if(Oi(a))break;let m=`${a}`,h=n<e.length-1?e[n+1]:null;if(r>0&&m===void 0)break;if(m&&h&&typeof h=="object"&&h.outlets===void 0){if(!Wl(m,h,o))return s;n+=2}else{if(!Wl(m,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function _o(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Oi(s)){let m=Am(s.outlets);return new J(n,m)}if(r===0&&Rr(e[0])){let m=i.segments[t];n.push(new Xt(m.path,Hl(e[0]))),r++;continue}let o=Oi(s)?s.outlets[q]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Rr(a)?(n.push(new Xt(o,Hl(a))),r+=2):(n.push(new Xt(o,{})),r++)}return new J(n,{})}function Am(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=_o(new J([],{}),0,n))}),t}function Hl(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function Wl(i,t,e){return i==e.path&&xt(t,e.parameters)}var Nr="imperative",Ee=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ee||{}),Xe=class{id;url;constructor(t,e){this.id=t,this.url=e}},en=class extends Xe{type=Ee.NavigationStart;navigationTrigger;restoredState;constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ze=class extends Xe{urlAfterRedirects;type=Ee.NavigationEnd;constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ve=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(Ve||{}),Qn=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Qn||{}),Ot=class extends Xe{reason;code;type=Ee.NavigationCancel;constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dt=class extends Xe{reason;code;type=Ee.NavigationSkipped;constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r}},Yn=class extends Xe{error;target;type=Ee.NavigationError;constructor(t,e,n,r){super(t,e),this.error=n,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ii=class extends Xe{urlAfterRedirects;state;type=Ee.RoutesRecognized;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lr=class extends Xe{urlAfterRedirects;state;type=Ee.GuardsCheckStart;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ur=class extends Xe{urlAfterRedirects;state;shouldActivate;type=Ee.GuardsCheckEnd;constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$r=class extends Xe{urlAfterRedirects;state;type=Ee.ResolveStart;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jr=class extends Xe{urlAfterRedirects;state;type=Ee.ResolveEnd;constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vr=class{route;type=Ee.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zr=class{route;type=Ee.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qr=class{snapshot;type=Ee.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Br=class{snapshot;type=Ee.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hr=class{snapshot;type=Ee.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wr=class{snapshot;type=Ee.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xn=class{routerEvent;position;anchor;type=Ee.Scroll;constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Di=class{},Zn=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function xm(i,t){return i.providers&&!i._injector&&(i._injector=gr(i.providers,t,`Route: ${i.path}`)),i._injector??t}function bt(i){return i.outlet||q}function Om(i,t){let e=i.filter(n=>bt(n)===t);return e.push(...i.filter(n=>bt(n)!==t)),e}function ji(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Kr=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ji(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Sn(this.rootInjector)}},Sn=(()=>{class i{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Kr(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(n){return new(n||i)(K($n))};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Gr=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=vo(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=vo(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=bo(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return bo(t,this._root).map(e=>e.value)}};function vo(i,t){if(i===t.value)return t;for(let e of t.children){let n=vo(i,e);if(n)return n}return null}function bo(i,t){if(i===t.value)return[t];for(let e of t.children){let n=bo(i,e);if(n.length)return n.unshift(t),n}return[]}var Ye=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Wn(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var Ni=class extends Gr{snapshot;constructor(t,e){super(t),this.snapshot=e,ko(this,t)}toString(){return this.snapshot.toString()}};function mc(i){let t=Im(i),e=new Pe([new Xt("",{})]),n=new Pe({}),r=new Pe({}),s=new Pe({}),o=new Pe(""),a=new De(e,n,s,o,r,q,i,t.root);return a.snapshot=t.root,new Ni(new Ye(a,[]),t)}function Im(i){let t={},e={},n={},r="",s=new bn([],t,n,r,e,q,i,null,{});return new Ri("",new Ye(s,[]))}var De=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,n,r,s,o,a,m){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(V(h=>h[$i]))??N(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(t=>yn(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(t=>yn(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qr(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:C(C({},t.params),i.params),data:C(C({},t.data),i.data),resolve:C(C(C(C({},i.data),t.data),r?.data),i._resolvedData)}:n={params:C({},i.params),data:C({},i.data),resolve:C(C({},i.data),i._resolvedData??{})},r&&hc(r)&&(n.resolve[$i]=r.title),n}var bn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[$i]}constructor(t,e,n,r,s,o,a,m,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=m,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yn(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ri=class extends Gr{url;constructor(t,e){super(e),this.url=t,ko(this,e)}toString(){return pc(this._root)}};function ko(i,t){t.value._routerState=i,t.children.forEach(e=>ko(i,e))}function pc(i){let t=i.children.length>0?` { ${i.children.map(pc).join(", ")} } `:"";return`${i.value}${t}`}function uo(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,xt(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),xt(t.params,e.params)||i.paramsSubject.next(e.params),om(t.url,e.url)||i.urlSubject.next(e.url),xt(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function yo(i,t){let e=xt(i.params,t.params)&&dm(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||yo(i.parent,t.parent))}function hc(i){return typeof i.title=="string"||i.title===null}var fc=new Fe(""),Vi=(()=>{class i{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=q;activateEvents=new ht;deactivateEvents=new ht;attachEvents=new ht;detachEvents=new ht;routerOutletData=il(void 0);parentContexts=z(Sn);location=z(cl);changeDetector=z(zn);inputBinder=z(zi,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,m=new Co(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:m,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||i)};static \u0275dir=Ci({type:i,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bi]})}return i})(),Co=class{route;childContexts;parent;outletData;constructor(t,e,n,r){this.route=t,this.childContexts=e,this.parent=n,this.outletData=r}get(t,e){return t===De?this.route:t===Sn?this.childContexts:t===fc?this.outletData:this.parent.get(t,e)}},zi=new Fe(""),Po=(()=>{class i{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,r=pr([n.queryParams,n.params,n.data]).pipe(pt(([s,o,a],m)=>(a=C(C(C({},s),o),a),m===0?N(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let o=bl(n.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})(),Ao=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=ee({type:i,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,r){n&1&&b(0,"router-outlet")},dependencies:[Vi],encapsulation:2})}return i})();function xo(i){let t=i.children&&i.children.map(xo),e=t?W(C({},i),{children:t}):C({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==q&&(e.component=Ao),e}function Dm(i,t,e){let n=Fi(i,t._root,e?e._root:void 0);return new Ni(n,t)}function Fi(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=Nm(i,t,e);return new Ye(n,r)}else{if(i.shouldAttach(t.value)){let s=i.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Fi(i,a)),o}}let n=Rm(t.value),r=t.children.map(s=>Fi(i,s));return new Ye(n,r)}}function Nm(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Fi(i,n,r);return Fi(i,n)})}function Rm(i){return new De(new Pe(i.url),new Pe(i.params),new Pe(i.queryParams),new Pe(i.fragment),new Pe(i.data),i.outlet,i.component,i)}var Jn=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},gc="ngNavigationCancelingError";function Yr(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Jt(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=_c(!1,Ve.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function _c(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[gc]=!0,e.cancellationCode=t,e}function Fm(i){return vc(i)&&Jt(i.url)}function vc(i){return!!i&&i[gc]}var Lm=(i,t,e,n)=>V(r=>(new So(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),So=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,n,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),uo(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=Wn(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Wn(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Wn(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=Wn(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new Wr(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Br(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(uo(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),uo(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)}},Xr=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Gn=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Um(i,t,e){let n=i._root,r=t?t._root:null;return Pi(n,r,e,[n.value])}function $m(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function ti(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!Ja(i)?i:t.get(i):n}function Pi(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Wn(t);return i.children.forEach(o=>{jm(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>xi(a,e.getContext(o),r)),r}function jm(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let m=Vm(o,s,s.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new Xr(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Pi(i,t,a?a.children:null,n,r):Pi(i,t,e,n,r),m&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Gn(a.outlet.component,o))}else o&&xi(t,a,r),r.canActivateChecks.push(new Xr(n)),s.component?Pi(i,null,a?a.children:null,n,r):Pi(i,null,e,n,r);return r}function Vm(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!vn(i.url,t.url);case"pathParamsOrQueryParamsChange":return!vn(i.url,t.url)||!xt(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yo(i,t)||!xt(i.queryParams,t.queryParams);case"paramsChange":default:return!yo(i,t)}}function xi(i,t,e){let n=Wn(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?t?xi(o,t.children.getContext(s),e):xi(o,null,e):xi(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Gn(t.outlet.component,r)):e.canDeactivateChecks.push(new Gn(null,r)):e.canDeactivateChecks.push(new Gn(null,r))}function qi(i){return typeof i=="function"}function zm(i){return typeof i=="boolean"}function qm(i){return i&&qi(i.canLoad)}function Bm(i){return i&&qi(i.canActivate)}function Hm(i){return i&&qi(i.canActivateChild)}function Wm(i){return i&&qi(i.canDeactivate)}function Km(i){return i&&qi(i.canMatch)}function bc(i){return i instanceof Ka||i?.name==="EmptyError"}var xr=Symbol("INITIAL_VALUE");function ei(){return pt(i=>pr(i.map(t=>t.pipe(Un(1),Za(xr)))).pipe(V(t=>{for(let e of t)if(e!==!0){if(e===xr)return xr;if(e===!1||Gm(e))return e}return!0}),Wt(t=>t!==xr),Un(1)))}function Gm(i){return Jt(i)||i instanceof Jn}function Qm(i,t){return Re(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?N(W(C({},e),{guardsResult:!0})):Ym(o,n,r,i).pipe(Re(a=>a&&zm(a)?Xm(n,s,i,t):N(a)),V(a=>W(C({},e),{guardsResult:a})))})}function Ym(i,t,e,n){return Ie(i).pipe(Re(r=>np(r.component,r.route,e,t,n)),Gt(r=>r!==!0,!0))}function Xm(i,t,e,n){return Ie(t).pipe(hn(r=>Ga(Jm(r.route.parent,n),Zm(r.route,n),tp(i,r.path,e),ep(i,r.route,e))),Gt(r=>r!==!0,!0))}function Zm(i,t){return i!==null&&t&&t(new Hr(i)),N(!0)}function Jm(i,t){return i!==null&&t&&t(new qr(i)),N(!0)}function ep(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return N(!0);let r=n.map(s=>Ks(()=>{let o=ji(t)??e,a=ti(s,o),m=Bm(a)?a.canActivate(t,i):wt(o,()=>a(t,i));return tn(m).pipe(Gt())}));return N(r).pipe(ei())}function tp(i,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>$m(o)).filter(o=>o!==null).map(o=>Ks(()=>{let a=o.guards.map(m=>{let h=ji(o.node)??e,f=ti(m,h),_=Hm(f)?f.canActivateChild(n,i):wt(h,()=>f(n,i));return tn(_).pipe(Gt())});return N(a).pipe(ei())}));return N(s).pipe(ei())}function np(i,t,e,n,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let m=ji(t)??r,h=ti(a,m),f=Wm(h)?h.canDeactivate(i,t,e,n):wt(m,()=>h(i,t,e,n));return tn(f).pipe(Gt())});return N(o).pipe(ei())}function ip(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return N(!0);let s=r.map(o=>{let a=ti(o,i),m=qm(a)?a.canLoad(t,e):wt(i,()=>a(t,e));return tn(m)});return N(s).pipe(ei(),yc(n))}function yc(i){return Ha(Z(t=>{if(typeof t!="boolean")throw Yr(i,t)}),V(t=>t===!0))}function rp(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return N(!0);let s=r.map(o=>{let a=ti(o,i),m=Km(a)?a.canMatch(t,e):wt(i,()=>a(t,e));return tn(m)});return N(s).pipe(ei(),yc(n))}var Li=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ui=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Hn(i){return ce(new Li(i))}function sp(i){return ce(new j(4e3,!1))}function op(i){return ce(_c(!1,Ve.GuardRejected))}var Eo=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return N(n);if(r.numberOfChildren>1||!r.children[q])return sp(`${t.redirectTo}`);r=r.children[q]}}applyRedirectCommands(t,e,n,r,s){if(typeof e!="string"){let a=e,{queryParams:m,fragment:h,routeConfig:f,url:_,outlet:M,params:S,data:T,title:A}=r,H=wt(s,()=>a({params:S,data:T,queryParams:m,fragment:h,routeConfig:f,url:_,outlet:M,title:A}));if(H instanceof It)throw new Ui(H);e=H}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e[0]==="/")throw new Ui(o);return o}applyRedirectCreateUrlTree(t,e,n,r){let s=this.createSegmentGroup(t,e.root,n,r);return new It(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);n[r]=e[a]}else n[r]=s}),n}createSegmentGroup(t,e,n,r){let s=this.createSegments(t,e.segments,n,r),o={};return Object.entries(e.children).forEach(([a,m])=>{o[a]=this.createSegmentGroup(t,m,n,r)}),new J(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new j(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},wo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ap(i,t,e,n,r){let s=Cc(i,t,e);return s.matched?(n=xm(t,n),rp(n,t,e,r).pipe(V(o=>o===!0?s:C({},wo)))):N(s)}function Cc(i,t,e){if(t.path==="**")return lp(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?C({},wo):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Yl)(e,i,t);if(!r)return C({},wo);let s={};Object.entries(r.posParams??{}).forEach(([a,m])=>{s[a]=m.path});let o=r.consumed.length>0?C(C({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function lp(i){return{matched:!0,parameters:i.length>0?Zl(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function Kl(i,t,e,n){return e.length>0&&up(i,e,n)?{segmentGroup:new J(t,dp(n,new J(e,i.children))),slicedSegments:[]}:e.length===0&&mp(i,e,n)?{segmentGroup:new J(i.segments,cp(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new J(i.segments,i.children),slicedSegments:e}}function cp(i,t,e,n){let r={};for(let s of e)if(Jr(i,t,s)&&!n[bt(s)]){let o=new J([],{});r[bt(s)]=o}return C(C({},n),r)}function dp(i,t){let e={};e[q]=t;for(let n of i)if(n.path===""&&bt(n)!==q){let r=new J([],{});e[bt(n)]=r}return e}function up(i,t,e){return e.some(n=>Jr(i,t,n)&&bt(n)!==q)}function mp(i,t,e){return e.some(n=>Jr(i,t,n))}function Jr(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function pp(i,t,e){return t.length===0&&!i.children[e]}var To=class{};function hp(i,t,e,n,r,s,o="emptyOnly"){return new Mo(i,t,e,n,r,o,s).recognize()}var fp=31,Mo=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,n,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Eo(this.urlSerializer,this.urlTree)}noMatchError(t){return new j(4002,`'${t.segmentGroup}'`)}recognize(){let t=Kl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(V(({children:e,rootSnapshot:n})=>{let r=new Ye(n,e),s=new Ri("",r),o=ac(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new bn([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,q,e).pipe(V(n=>({children:n,rootSnapshot:e})),U(n=>{if(n instanceof Ui)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Li?this.noMatchError(n):n}))}processSegmentGroup(t,e,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n,s):this.processSegment(t,e,n,n.segments,r,!0,s).pipe(V(o=>o instanceof Ye?[o]:[]))}processChildren(t,e,n,r){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return Ie(s).pipe(hn(o=>{let a=n.children[o],m=Om(e,o);return this.processSegmentGroup(t,m,a,o,r)}),Xa((o,a)=>(o.push(...a),o)),Gs(null),Ya(),Re(o=>{if(o===null)return Hn(n);let a=Sc(o);return gp(a),N(a)}))}processSegment(t,e,n,r,s,o,a){return Ie(e).pipe(hn(m=>this.processSegmentAgainstRoute(m._injector??t,e,m,n,r,s,o,a).pipe(U(h=>{if(h instanceof Li)return N(null);throw h}))),Gt(m=>!!m),U(m=>{if(bc(m))return pp(n,r,s)?N(new To):Hn(n);throw m}))}processSegmentAgainstRoute(t,e,n,r,s,o,a,m){return bt(n)!==o&&(o===q||!Jr(r,s,n))?Hn(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,s,o,m):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,s,o,m):Hn(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o,a){let{matched:m,parameters:h,consumedSegments:f,positionalParamSegments:_,remainingSegments:M}=Cc(e,r,s);if(!m)return Hn(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fp&&(this.allowRedirects=!1));let S=new bn(s,h,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Gl(r),bt(r),r.component??r._loadedComponent??null,r,Ql(r)),T=Qr(S,a,this.paramsInheritanceStrategy);S.params=Object.freeze(T.params),S.data=Object.freeze(T.data);let A=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,_,S,t);return this.applyRedirects.lineralizeSegments(r,A).pipe(Re(H=>this.processSegment(t,n,e,H.concat(M),o,!1,a)))}matchSegmentAgainstRoute(t,e,n,r,s,o){let a=ap(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),a.pipe(pt(m=>m.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(pt(({routes:h})=>{let f=n._loadedInjector??t,{parameters:_,consumedSegments:M,remainingSegments:S}=m,T=new bn(M,_,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Gl(n),bt(n),n.component??n._loadedComponent??null,n,Ql(n)),A=Qr(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(A.params),T.data=Object.freeze(A.data);let{segmentGroup:H,slicedSegments:te}=Kl(e,M,S,h);if(te.length===0&&H.hasChildren())return this.processChildren(f,h,H,T).pipe(V(me=>new Ye(T,me)));if(h.length===0&&te.length===0)return N(new Ye(T,[]));let x=bt(n)===s;return this.processSegment(f,h,H,te,x?q:s,!0,T).pipe(V(me=>new Ye(T,me instanceof Ye?[me]:[])))}))):Hn(e)))}getChildConfig(t,e,n){return e.children?N({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?N({routes:e._loadedRoutes,injector:e._loadedInjector}):ip(t,e,n,this.urlSerializer).pipe(Re(r=>r?this.configLoader.loadChildren(t,e).pipe(Z(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):op(e))):N({routes:[],injector:t})}};function gp(i){i.sort((t,e)=>t.value.outlet===q?-1:e.value.outlet===q?1:t.value.outlet.localeCompare(e.value.outlet))}function _p(i){let t=i.value.routeConfig;return t&&t.path===""}function Sc(i){let t=[],e=new Set;for(let n of i){if(!_p(n)){t.push(n);continue}let r=t.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=Sc(n.children);t.push(new Ye(n.value,r))}return t.filter(n=>!e.has(n))}function Gl(i){return i.data||{}}function Ql(i){return i.resolve||{}}function vp(i,t,e,n,r,s){return Re(o=>hp(i,t,e,n,o.extractedUrl,r,s).pipe(V(({state:a,tree:m})=>W(C({},o),{targetSnapshot:a,urlAfterRedirects:m}))))}function bp(i,t){return Re(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return N(e);let s=new Set(r.map(m=>m.route)),o=new Set;for(let m of s)if(!o.has(m))for(let h of Ec(m))o.add(h);let a=0;return Ie(o).pipe(hn(m=>s.has(m)?yp(m,n,i,t):(m.data=Qr(m,m.parent,i).resolve,N(void 0))),Z(()=>a++),Qs(1),Re(m=>a===o.size?N(e):Lt))})}function Ec(i){let t=i.children.map(e=>Ec(e)).flat();return[i,...t]}function yp(i,t,e,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!hc(r)&&(s[$i]=r.title),Cp(s,i,t,n).pipe(V(o=>(i._resolvedData=o,i.data=Qr(i,i.parent,e).resolve,null)))}function Cp(i,t,e,n){let r=ho(i);if(r.length===0)return N({});let s={};return Ie(r).pipe(Re(o=>Sp(i[o],t,e,n).pipe(Gt(),Z(a=>{if(a instanceof Jn)throw Yr(new Zt,a);s[o]=a}))),Qs(1),V(()=>s),U(o=>bc(o)?Lt:ce(o)))}function Sp(i,t,e,n){let r=ji(t)??n,s=ti(i,r),o=s.resolve?s.resolve(t,e):wt(r,()=>s(t,e));return tn(o)}function mo(i){return pt(t=>{let e=i(t);return e?Ie(e).pipe(V(()=>t)):N(t)})}var Oo=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===q);return n}getResolvedTitleForRoute(e){return e.data[$i]}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:()=>z(wc),providedIn:"root"})}return i})(),wc=(()=>{class i extends Oo{title;constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||i)(K(Il))};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),En=new Fe("",{providedIn:"root",factory:()=>({})}),ni=new Fe(""),es=(()=>{class i{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=z(vl);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return N(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=tn(e.loadComponent()).pipe(V(Mc),Z(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Kt(()=>{this.componentLoaders.delete(e)})),r=new Ws(n,()=>new mt).pipe(Hs());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return N({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=Tc(n,this.compiler,e,this.onLoadEndListener).pipe(Kt(()=>{this.childrenLoaders.delete(n)})),o=new Ws(s,()=>new mt).pipe(Hs());return this.childrenLoaders.set(n,o),o}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Tc(i,t,e,n){return tn(i.loadChildren()).pipe(V(Mc),Re(r=>r instanceof dl||Array.isArray(r)?N(r):Ie(t.compileModuleAsync(r))),V(r=>{n&&n(i);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(ni,[],{optional:!0,self:!0}).flat()),{routes:o.map(xo),injector:s}}))}function Ep(i){return i&&typeof i=="object"&&"default"in i}function Mc(i){return Ep(i)?i.default:i}var ts=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:()=>z(wp),providedIn:"root"})}return i})(),wp=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Io=new Fe(""),Do=new Fe("");function kc(i,t,e){let n=i.get(Do),r=i.get(wr);return i.get(jn).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),a=r.startViewTransition(()=>(s(),Tp(i))),{onViewTransitionCreated:m}=n;return m&&wt(i,()=>m({transition:a,from:t,to:e})),o})}function Tp(i){return new Promise(t=>{rl({read:()=>setTimeout(t)},{injector:i})})}var No=new Fe(""),ns=(()=>{class i{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new mt;transitionAbortSubject=new mt;configLoader=z(es);environmentInjector=z($n);destroyRef=z(tl);urlSerializer=z(Cn);rootContexts=z(Sn);location=z(qn);inputBindingEnabled=z(zi,{optional:!0})!==null;titleStrategy=z(Oo);options=z(En,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=z(ts);createViewTransition=z(Io,{optional:!0});navigationErrorHandler=z(No,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>N(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Vr(r)),n=r=>this.events.next(new zr(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(W(C({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:n}))}setupNavigations(e){return this.transitions=new Pe(null),this.transitions.pipe(Wt(n=>n!==null),pt(n=>{let r=!1,s=!1;return N(n).pipe(pt(o=>{if(this.navigationId>n.id)return this.cancelNavigationTransition(n,"",Ve.SupersededByNewNavigation),Lt;this.currentTransition=n,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?W(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&m!=="reload"){let h="";return this.events.next(new Dt(o.id,this.urlSerializer.serialize(o.rawUrl),h,Qn.IgnoredSameUrlNavigation)),o.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return N(o).pipe(pt(h=>(this.events.next(new en(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Lt:Promise.resolve(h))),vp(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Z(h=>{n.targetSnapshot=h.targetSnapshot,n.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=W(C({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ii(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:h,extractedUrl:f,source:_,restoredState:M,extras:S}=o,T=new en(h,this.urlSerializer.serialize(f),_,M);this.events.next(T);let A=mc(this.rootComponentType).snapshot;return this.currentTransition=n=W(C({},o),{targetSnapshot:A,urlAfterRedirects:f,extras:W(C({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(n)}else{let h="";return this.events.next(new Dt(o.id,this.urlSerializer.serialize(o.extractedUrl),h,Qn.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Lt}}),Z(o=>{let a=new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),V(o=>(this.currentTransition=n=W(C({},o),{guards:Um(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),n)),Qm(this.environmentInjector,o=>this.events.next(o)),Z(o=>{if(n.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Yr(this.urlSerializer,o.guardsResult);let a=new Ur(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Wt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ve.GuardRejected),!1)),mo(o=>{if(o.guards.canActivateChecks.length!==0)return N(o).pipe(Z(a=>{let m=new $r(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)}),pt(a=>{let m=!1;return N(a).pipe(bp(this.paramsInheritanceStrategy,this.environmentInjector),Z({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(a,"",Ve.NoDataFromResolver)}}))}),Z(a=>{let m=new jr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)}))}),mo(o=>{let a=m=>{let h=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(m.routeConfig).pipe(Z(f=>{m.component=f}),V(()=>{})));for(let f of m.children)h.push(...a(f));return h};return pr(a(o.targetSnapshot.root)).pipe(Gs(null),Un(1))}),mo(()=>this.afterPreactivation()),pt(()=>{let{currentSnapshot:o,targetSnapshot:a}=n,m=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return m?Ie(m).pipe(V(()=>n)):N(n)}),V(o=>{let a=Dm(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=n=W(C({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,n}),Z(()=>{this.events.next(new Di)}),Lm(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Un(1),Z({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ze(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),fn(this.transitionAbortSubject.pipe(Z(o=>{throw o}))),Kt(()=>{!r&&!s&&this.cancelNavigationTransition(n,"",Ve.SupersededByNewNavigation),this.currentTransition?.id===n.id&&(this.currentNavigation=null,this.currentTransition=null)}),U(o=>{if(this.destroyed)return n.resolve(!1),Lt;if(s=!0,vc(o))this.events.next(new Ot(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode)),Fm(o)?this.events.next(new Zn(o.url,o.navigationBehaviorOptions)):n.resolve(!1);else{let a=new Yn(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);try{let m=wt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(m instanceof Jn){let{message:h,cancellationCode:f}=Yr(this.urlSerializer,m);this.events.next(new Ot(n.id,this.urlSerializer.serialize(n.extractedUrl),h,f)),this.events.next(new Zn(m.redirectTo,m.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(m){this.options.resolveNavigationPromiseOnError?n.resolve(!1):n.reject(m)}}return Lt}))}))}cancelNavigationTransition(e,n,r){let s=new Ot(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Mp(i){return i!==Nr}var Pc=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:()=>z(kp),providedIn:"root"})}return i})(),Zr=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},kp=(()=>{class i extends Zr{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Js(i)))(r||i)}})();static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ac=(()=>{class i{urlSerializer=z(Cn);options=z(En,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=z(qn);urlHandlingStrategy=z(ts);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new It;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:n,targetBrowserUrl:r}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,n):n,o=r??s;return o instanceof It?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:n,initialUrl:r}){n&&e?(this.currentUrlTree=n,this.rawUrlTree=this.urlHandlingStrategy.merge(n,r),this.routerState=e):this.rawUrlTree=r}routerState=mc(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:()=>z(Pp),providedIn:"root"})}return i})(),Pp=(()=>{class i extends Ac{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&setTimeout(()=>{e(n.url,n.state,"popstate")})})}handleRouterEvent(e,n){e instanceof en?this.updateStateMemento():e instanceof Dt?this.commitTransition(n):e instanceof Ii?this.urlUpdateStrategy==="eager"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof Di?(this.commitTransition(n),this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(n),n)):e instanceof Ot&&(e.code===Ve.GuardRejected||e.code===Ve.NoDataFromResolver)?this.restoreHistory(n):e instanceof Yn?this.restoreHistory(n,!0):e instanceof Ze&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:n,id:r}){let{replaceUrl:s,state:o}=n;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,m=C(C({},o),this.generateNgRouterState(r,a));this.location.replaceState(e,"",m)}else{let a=C(C({},o),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Js(i)))(r||i)}})();static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function is(i,t){i.events.pipe(Wt(e=>e instanceof Ze||e instanceof Ot||e instanceof Yn||e instanceof Dt),V(e=>e instanceof Ze||e instanceof Dt?0:(e instanceof Ot?e.code===Ve.Redirect||e.code===Ve.SupersededByNewNavigation:!1)?2:1),Wt(e=>e!==2),Un(1)).subscribe(()=>{t()})}var Ap={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xp={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Y=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=z(ul);stateManager=z(Ac);options=z(En,{optional:!0})||{};pendingTasks=z(nl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=z(ns);urlSerializer=z(Cn);location=z(qn);urlHandlingStrategy=z(ts);_events=new mt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=z(Pc);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=z(ni,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!z(zi,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ba;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Ot&&n.code!==Ve.Redirect&&n.code!==Ve.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Ze)this.navigated=!0;else if(n instanceof Zn){let o=n.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),m=C({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Mp(r.source)},o);this.scheduleNavigation(a,Nr,null,m,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Ip(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n,r)=>{this.navigateToSyncWithBrowser(e,r,n)})}navigateToSyncWithBrowser(e,n,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let m=C({},r);delete m.navigationId,delete m.\u0275routerPageId,Object.keys(m).length!==0&&(s.state=m)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(xo),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:m}=n,h=m?this.currentUrlTree.fragment:o,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=C(C({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let _;try{let M=r?r.snapshot:this.routerState.snapshot.root;_=lc(M)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),_=this.currentUrlTree.root}return cc(_,e,f,h??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=Jt(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Nr,null,n)}navigate(e,n={skipLocationChange:!1}){return Op(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=C({},Ap):n===!1?r=C({},xp):r=n,Jt(e))return ql(this.currentUrlTree,e,r);let s=this.parseUrl(e);return ql(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,m,h;o?(a=o.resolve,m=o.reject,h=o.promise):h=new Promise((_,M)=>{a=_,m=M});let f=this.pendingTasks.add();return is(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:m,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(_=>Promise.reject(_))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Op(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new j(4008,!1)}function Ip(i){return!(i instanceof Di)&&!(i instanceof Zn)}var ot=(()=>{class i{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new mt;constructor(e,n,r,s,o,a){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a;let m=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=m==="a"||m==="area",this.isAnchorElement?this.subscription=e.events.subscribe(h=>{h instanceof Ze&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Jt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,n,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||n||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let m={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,m),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:sl(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let r=this.renderer,s=this.el.nativeElement;n!==null?r.setAttribute(s,e,n):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Jt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||i)(E(Y),E(De),el("tabindex"),E(no),E(yi),E(wi))};static \u0275dir=Ci({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){n&1&&w("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&Vn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Er],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Er],replaceUrl:[2,"replaceUrl","replaceUrl",Er],routerLink:"routerLink"},features:[bi]})}return i})(),Fo=(()=>{class i{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ht;constructor(e,n,r,s,o){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Ze&&this.update()})}ngAfterContentInit(){N(this.links.changes,N(null)).pipe(vi()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=Ie(e).pipe(vi()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){let n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let n=Dp(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let s=r.urlTree;return s?e.isActive(s,n):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(n){return new(n||i)(E(Y),E(yi),E(no),E(zn),E(ot,8))};static \u0275dir=Ci({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,s){if(n&1&&gl(s,ot,5),n&2){let o;Ge(o=Qe())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[bi]})}return i})();function Dp(i){return!!i.paths}var Bi=class{};var xc=(()=>{class i{router;injector;preloadingStrategy;loader;subscription;constructor(e,n,r,s){this.router=e,this.injector=n,this.preloadingStrategy=r,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Wt(e=>e instanceof Ze),hn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let r=[];for(let s of n){s.providers&&!s._injector&&(s._injector=gr(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ie(r).pipe(vi())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;n.loadChildren&&n.canLoad===void 0?r=this.loader.loadChildren(e,n):r=N(null);let s=r.pipe(Re(o=>o===null?N(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(n.loadComponent&&!n._loadedComponent){let o=this.loader.loadComponent(n);return Ie([s,o]).pipe(vi())}else return s})}static \u0275fac=function(n){return new(n||i)(K(Y),K($n),K(Bi),K(es))};static \u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Oc=new Fe(""),Np=(()=>{class i{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof en?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ze?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Dt&&e.code===Qn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Xn&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xn(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(n){ll()};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})();function Rp(i){return i.routerState.root}function Hi(i,t){return{\u0275kind:i,\u0275providers:t}}function Fp(){let i=z(eo);return t=>{let e=i.get(hl);if(t!==e.components[0])return;let n=i.get(Y),r=i.get(Ic);i.get(Lo)===1&&n.initialNavigation(),i.get(Rc,null,Xs.Optional)?.setUpPreloading(),i.get(Oc,null,Xs.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Ic=new Fe("",{factory:()=>new mt}),Lo=new Fe("",{providedIn:"root",factory:()=>1});function Dc(){let i=[{provide:Lo,useValue:0},ro(()=>{let t=z(eo);return t.get(yl,Promise.resolve()).then(()=>new Promise(n=>{let r=t.get(Y),s=t.get(Ic);is(r,()=>{n(!0)}),t.get(ns).afterPreactivation=()=>(n(!0),s.closed?N(void 0):s),r.initialNavigation()}))})];return Hi(2,i)}function Nc(){let i=[ro(()=>{z(Y).setUpLocationChangeListener()}),{provide:Lo,useValue:2}];return Hi(3,i)}var Rc=new Fe("");function Fc(i){return Hi(0,[{provide:Rc,useExisting:xc},{provide:Bi,useExisting:i}])}function Lc(){return Hi(8,[Po,{provide:zi,useExisting:Po}])}function Uc(i){hr("NgRouterViewTransitions");let t=[{provide:Io,useValue:kc},{provide:Do,useValue:C({skipNextTransition:!!i?.skipInitialTransition},i)}];return Hi(9,t)}var $c=[qn,{provide:Cn,useClass:Zt},Y,Sn,{provide:De,useFactory:Rp,deps:[Y]},es,[]],we=(()=>{class i{constructor(){}static forRoot(e,n){return{ngModule:i,providers:[$c,[],{provide:ni,multi:!0,useValue:e},[],n?.errorHandler?{provide:No,useValue:n.errorHandler}:[],{provide:En,useValue:n||{}},n?.useHash?Up():$p(),Lp(),n?.preloadingStrategy?Fc(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?jp(n):[],n?.bindToComponentInputs?Lc().\u0275providers:[],n?.enableViewTransitions?Uc().\u0275providers:[],Vp()]}}static forChild(e){return{ngModule:i,providers:[{provide:ni,multi:!0,useValue:e}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=io({type:i});static \u0275inj=Ys({})}return i})();function Lp(){return{provide:Oc,useFactory:()=>{let i=z(Tl),t=z(jn),e=z(En),n=z(ns),r=z(Cn);return e.scrollOffset&&i.setOffset(e.scrollOffset),new Np(r,n,i,t,e)}}}function Up(){return{provide:wi,useClass:Sl}}function $p(){return{provide:wi,useClass:Cl}}function jp(i){return[i.initialNavigation==="disabled"?Nc().\u0275providers:[],i.initialNavigation==="enabledBlocking"?Dc().\u0275providers:[]]}var Ro=new Fe("");function Vp(){return[{provide:Ro,useFactory:Fp},{provide:pl,multi:!0,useExisting:Ro}]}var bs={};sm(bs,{Alert:()=>Gi,Button:()=>Qi,Carousel:()=>li,Collapse:()=>kn,Dropdown:()=>Vt,Modal:()=>Nt,Offcanvas:()=>zt,Popover:()=>_s,ScrollSpy:()=>Xi,Tab:()=>ci,Toast:()=>Zi,Tooltip:()=>Pn});var nn=new Map,Uo={set(i,t,e){nn.has(i)||nn.set(i,new Map);let n=nn.get(i);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,e)},get(i,t){return nn.has(i)&&nn.get(i).get(t)||null},remove(i,t){if(!nn.has(i))return;let e=nn.get(i);e.delete(t),e.size===0&&nn.delete(i)}},zp=1e6,qp=1e3,Jo="transitionend",hd=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),i),Bp=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),Hp=i=>{do i+=Math.floor(Math.random()*zp);while(document.getElementById(i));return i},Wp=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i),n=Number.parseFloat(t),r=Number.parseFloat(e);return!n&&!r?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*qp)},fd=i=>{i.dispatchEvent(new Event(Jo))},$t=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),rn=i=>$t(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(hd(i)):null,di=i=>{if(!$t(i)||i.getClientRects().length===0)return!1;let t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){let n=i.closest("summary");if(n&&n.parentNode!==e||n===null)return!1}return t},sn=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",gd=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){let t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?gd(i.parentNode):null},ms=()=>{},Ji=i=>{i.offsetHeight},_d=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,$o=[],Kp=i=>{document.readyState==="loading"?($o.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of $o)t()}),$o.push(i)):i()},at=()=>document.documentElement.dir==="rtl",ct=i=>{Kp(()=>{let t=_d();if(t){let e=i.NAME,n=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=n,i.jQueryInterface)}})},ze=(i,t=[],e=i)=>typeof i=="function"?i.call(...t):e,vd=(i,t,e=!0)=>{if(!e){ze(i);return}let r=Wp(t)+5,s=!1,o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(Jo,o),ze(i))};t.addEventListener(Jo,o),setTimeout(()=>{s||fd(t)},r)},ia=(i,t,e,n)=>{let r=i.length,s=i.indexOf(t);return s===-1?!e&&n?i[r-1]:i[0]:(s+=e?1:-1,n&&(s=(s+r)%r),i[Math.max(0,Math.min(s,r-1))])},Gp=/[^.]*(?=\..*)\.|.*/,Qp=/\..*/,Yp=/::\d+$/,jo={},jc=1,bd={mouseenter:"mouseover",mouseleave:"mouseout"},Xp=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function yd(i,t){return t&&`${t}::${jc++}`||i.uidEvent||jc++}function Cd(i){let t=yd(i);return i.uidEvent=t,jo[t]=jo[t]||{},jo[t]}function Zp(i,t){return function e(n){return ra(n,{delegateTarget:i}),e.oneOff&&v.off(i,n.type,t),t.apply(i,[n])}}function Jp(i,t,e){return function n(r){let s=i.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a of s)if(a===o)return ra(r,{delegateTarget:o}),n.oneOff&&v.off(i,r.type,t,e),e.apply(o,[r])}}function Sd(i,t,e=null){return Object.values(i).find(n=>n.callable===t&&n.delegationSelector===e)}function Ed(i,t,e){let n=typeof t=="string",r=n?e:t||e,s=wd(i);return Xp.has(s)||(s=i),[n,r,s]}function Vc(i,t,e,n,r){if(typeof t!="string"||!i)return;let[s,o,a]=Ed(t,e,n);t in bd&&(o=(T=>function(A){if(!A.relatedTarget||A.relatedTarget!==A.delegateTarget&&!A.delegateTarget.contains(A.relatedTarget))return T.call(this,A)})(o));let m=Cd(i),h=m[a]||(m[a]={}),f=Sd(h,o,s?e:null);if(f){f.oneOff=f.oneOff&&r;return}let _=yd(o,t.replace(Gp,"")),M=s?Jp(i,e,o):Zp(i,o);M.delegationSelector=s?e:null,M.callable=o,M.oneOff=r,M.uidEvent=_,h[_]=M,i.addEventListener(a,M,s)}function ea(i,t,e,n,r){let s=Sd(t[e],n,r);s&&(i.removeEventListener(e,s,!!r),delete t[e][s.uidEvent])}function eh(i,t,e,n){let r=t[e]||{};for(let[s,o]of Object.entries(r))s.includes(n)&&ea(i,t,e,o.callable,o.delegationSelector)}function wd(i){return i=i.replace(Qp,""),bd[i]||i}var v={on(i,t,e,n){Vc(i,t,e,n,!1)},one(i,t,e,n){Vc(i,t,e,n,!0)},off(i,t,e,n){if(typeof t!="string"||!i)return;let[r,s,o]=Ed(t,e,n),a=o!==t,m=Cd(i),h=m[o]||{},f=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(h).length)return;ea(i,m,o,s,r?e:null);return}if(f)for(let _ of Object.keys(m))eh(i,m,_,t.slice(1));for(let[_,M]of Object.entries(h)){let S=_.replace(Yp,"");(!a||t.includes(S))&&ea(i,m,o,M.callable,M.delegationSelector)}},trigger(i,t,e){if(typeof t!="string"||!i)return null;let n=_d(),r=wd(t),s=t!==r,o=null,a=!0,m=!0,h=!1;s&&n&&(o=n.Event(t,e),n(i).trigger(o),a=!o.isPropagationStopped(),m=!o.isImmediatePropagationStopped(),h=o.isDefaultPrevented());let f=ra(new Event(t,{bubbles:a,cancelable:!0}),e);return h&&f.preventDefault(),m&&i.dispatchEvent(f),f.defaultPrevented&&o&&o.preventDefault(),f}};function ra(i,t={}){for(let[e,n]of Object.entries(t))try{i[e]=n}catch{Object.defineProperty(i,e,{configurable:!0,get(){return n}})}return i}function zc(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Vo(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var jt={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${Vo(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${Vo(t)}`)},getDataAttributes(i){if(!i)return{};let t={},e=Object.keys(i.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(let n of e){let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1),t[r]=zc(i.dataset[n])}return t},getDataAttribute(i,t){return zc(i.getAttribute(`data-bs-${Vo(t)}`))}},Mn=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){let n=$t(e)?jt.getDataAttribute(e,"config"):{};return C(C(C(C({},this.constructor.Default),typeof n=="object"?n:{}),$t(e)?jt.getDataAttributes(e):{}),typeof t=="object"?t:{})}_typeCheckConfig(t,e=this.constructor.DefaultType){for(let[n,r]of Object.entries(e)){let s=t[n],o=$t(s)?"element":Bp(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${r}".`)}}},th="5.3.6",tt=class extends Mn{constructor(t,e){super(),t=rn(t),t&&(this._element=t,this._config=this._getConfig(e),Uo.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Uo.remove(this._element,this.constructor.DATA_KEY),v.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){vd(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Uo.get(rn(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return th}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},zo=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>hd(e)).join(","):null},L={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){let e=[],n=i.parentNode.closest(t);for(;n;)e.push(n),n=n.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!sn(e)&&di(e))},getSelectorFromElement(i){let t=zo(i);return t&&L.findOne(t)?t:null},getElementFromSelector(i){let t=zo(i);return t?L.findOne(t):null},getMultipleElementsFromSelector(i){let t=zo(i);return t?L.find(t):[]}},vs=(i,t="hide")=>{let e=`click.dismiss${i.EVENT_KEY}`,n=i.NAME;v.on(document,e,`[data-bs-dismiss="${n}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),sn(this))return;let s=L.getElementFromSelector(this)||this.closest(`.${n}`);i.getOrCreateInstance(s)[t]()})},nh="alert",ih="bs.alert",Td=`.${ih}`,rh=`close${Td}`,sh=`closed${Td}`,oh="fade",ah="show",Gi=class i extends tt{static get NAME(){return nh}close(){if(v.trigger(this._element,rh).defaultPrevented)return;this._element.classList.remove(ah);let e=this._element.classList.contains(oh);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),v.trigger(this._element,sh),this.dispose()}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};vs(Gi,"close");ct(Gi);var lh="button",ch="bs.button",dh=`.${ch}`,uh=".data-api",mh="active",qc='[data-bs-toggle="button"]',ph=`click${dh}${uh}`,Qi=class i extends tt{static get NAME(){return lh}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(mh))}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this);t==="toggle"&&e[t]()})}};v.on(document,ph,qc,i=>{i.preventDefault();let t=i.target.closest(qc);Qi.getOrCreateInstance(t).toggle()});ct(Qi);var hh="swipe",ui=".bs.swipe",fh=`touchstart${ui}`,gh=`touchmove${ui}`,_h=`touchend${ui}`,vh=`pointerdown${ui}`,bh=`pointerup${ui}`,yh="touch",Ch="pen",Sh="pointer-event",Eh=40,wh={endCallback:null,leftCallback:null,rightCallback:null},Th={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},ps=class i extends Mn{constructor(t,e){super(),this._element=t,!(!t||!i.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return wh}static get DefaultType(){return Th}static get NAME(){return hh}dispose(){v.off(this._element,ui)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),ze(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=Eh)return;let e=t/this._deltaX;this._deltaX=0,e&&ze(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(v.on(this._element,vh,t=>this._start(t)),v.on(this._element,bh,t=>this._end(t)),this._element.classList.add(Sh)):(v.on(this._element,fh,t=>this._start(t)),v.on(this._element,gh,t=>this._move(t)),v.on(this._element,_h,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Ch||t.pointerType===yh)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Mh="carousel",kh="bs.carousel",on=`.${kh}`,Md=".data-api",Ph="ArrowLeft",Ah="ArrowRight",xh=500,Wi="next",ii="prev",si="left",ds="right",Oh=`slide${on}`,qo=`slid${on}`,Ih=`keydown${on}`,Dh=`mouseenter${on}`,Nh=`mouseleave${on}`,Rh=`dragstart${on}`,Fh=`load${on}${Md}`,Lh=`click${on}${Md}`,kd="carousel",rs="active",Uh="slide",$h="carousel-item-end",jh="carousel-item-start",Vh="carousel-item-next",zh="carousel-item-prev",Pd=".active",Ad=".carousel-item",qh=Pd+Ad,Bh=".carousel-item img",Hh=".carousel-indicators",Wh="[data-bs-slide], [data-bs-slide-to]",Kh='[data-bs-ride="carousel"]',Gh={[Ph]:ds,[Ah]:si},Qh={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Yh={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},li=class i extends tt{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=L.findOne(Hh,this._element),this._addEventListeners(),this._config.ride===kd&&this.cycle()}static get Default(){return Qh}static get DefaultType(){return Yh}static get NAME(){return Mh}next(){this._slide(Wi)}nextWhenVisible(){!document.hidden&&di(this._element)&&this.next()}prev(){this._slide(ii)}pause(){this._isSliding&&fd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){v.one(this._element,qo,()=>this.cycle());return}this.cycle()}}to(t){let e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){v.one(this._element,qo,()=>this.to(t));return}let n=this._getItemIndex(this._getActive());if(n===t)return;let r=t>n?Wi:ii;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&v.on(this._element,Ih,t=>this._keydown(t)),this._config.pause==="hover"&&(v.on(this._element,Dh,()=>this.pause()),v.on(this._element,Nh,()=>this._maybeEnableCycle())),this._config.touch&&ps.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let n of L.find(Bh,this._element))v.on(n,Rh,r=>r.preventDefault());let e={leftCallback:()=>this._slide(this._directionToOrder(si)),rightCallback:()=>this._slide(this._directionToOrder(ds)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),xh+this._config.interval))}};this._swipeHelper=new ps(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let e=Gh[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let e=L.findOne(Pd,this._indicatorsElement);e.classList.remove(rs),e.removeAttribute("aria-current");let n=L.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(rs),n.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;let n=this._getActive(),r=t===Wi,s=e||ia(this._getItems(),n,r,this._config.wrap);if(s===n)return;let o=this._getItemIndex(s),a=S=>v.trigger(this._element,S,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(Oh).defaultPrevented||!n||!s)return;let h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;let f=r?jh:$h,_=r?Vh:zh;s.classList.add(_),Ji(s),n.classList.add(f),s.classList.add(f);let M=()=>{s.classList.remove(f,_),s.classList.add(rs),n.classList.remove(rs,_,f),this._isSliding=!1,a(qo)};this._queueCallback(M,n,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(Uh)}_getActive(){return L.findOne(qh,this._element)}_getItems(){return L.find(Ad,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return at()?t===si?ii:Wi:t===si?Wi:ii}_orderToDirection(t){return at()?t===ii?si:ds:t===ii?ds:si}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}};v.on(document,Lh,Wh,function(i){let t=L.getElementFromSelector(this);if(!t||!t.classList.contains(kd))return;i.preventDefault();let e=li.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){e.to(n),e._maybeEnableCycle();return}if(jt.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});v.on(window,Fh,()=>{let i=L.find(Kh);for(let t of i)li.getOrCreateInstance(t)});ct(li);var Xh="collapse",Zh="bs.collapse",er=`.${Zh}`,Jh=".data-api",ef=`show${er}`,tf=`shown${er}`,nf=`hide${er}`,rf=`hidden${er}`,sf=`click${er}${Jh}`,Bo="show",ai="collapse",ss="collapsing",of="collapsed",af=`:scope .${ai} .${ai}`,lf="collapse-horizontal",cf="width",df="height",uf=".collapse.show, .collapse.collapsing",ta='[data-bs-toggle="collapse"]',mf={parent:null,toggle:!0},pf={parent:"(null|element)",toggle:"boolean"},kn=class i extends tt{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];let n=L.find(ta);for(let r of n){let s=L.getSelectorFromElement(r),o=L.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return mf}static get DefaultType(){return pf}static get NAME(){return Xh}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(uf).filter(a=>a!==this._element).map(a=>i.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||v.trigger(this._element,ef).defaultPrevented)return;for(let a of t)a.hide();let n=this._getDimension();this._element.classList.remove(ai),this._element.classList.add(ss),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let r=()=>{this._isTransitioning=!1,this._element.classList.remove(ss),this._element.classList.add(ai,Bo),this._element.style[n]="",v.trigger(this._element,tf)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||v.trigger(this._element,nf).defaultPrevented)return;let e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ji(this._element),this._element.classList.add(ss),this._element.classList.remove(ai,Bo);for(let r of this._triggerArray){let s=L.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;let n=()=>{this._isTransitioning=!1,this._element.classList.remove(ss),this._element.classList.add(ai),v.trigger(this._element,rf)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Bo)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=rn(t.parent),t}_getDimension(){return this._element.classList.contains(lf)?cf:df}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(ta);for(let e of t){let n=L.getElementFromSelector(e);n&&this._addAriaAndCollapsedClass([e],this._isShown(n))}}_getFirstLevelChildren(t){let e=L.find(af,this._config.parent);return L.find(t,this._config.parent).filter(n=>!e.includes(n))}_addAriaAndCollapsedClass(t,e){if(t.length)for(let n of t)n.classList.toggle(of,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){let e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){let n=i.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}};v.on(document,sf,ta,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(let t of L.getMultipleElementsFromSelector(this))kn.getOrCreateInstance(t,{toggle:!1}).toggle()});ct(kn);var Bc="dropdown",hf="bs.dropdown",An=`.${hf}`,sa=".data-api",ff="Escape",Hc="Tab",gf="ArrowUp",Wc="ArrowDown",_f=2,vf=`hide${An}`,bf=`hidden${An}`,yf=`show${An}`,Cf=`shown${An}`,xd=`click${An}${sa}`,Od=`keydown${An}${sa}`,Sf=`keyup${An}${sa}`,oi="show",Ef="dropup",wf="dropend",Tf="dropstart",Mf="dropup-center",kf="dropdown-center",wn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Pf=`${wn}.${oi}`,us=".dropdown-menu",Af=".navbar",xf=".navbar-nav",Of=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",If=at()?"top-end":"top-start",Df=at()?"top-start":"top-end",Nf=at()?"bottom-end":"bottom-start",Rf=at()?"bottom-start":"bottom-end",Ff=at()?"left-start":"right-start",Lf=at()?"right-start":"left-start",Uf="top",$f="bottom",jf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Vf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},Vt=class i extends tt{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=L.next(this._element,us)[0]||L.prev(this._element,us)[0]||L.findOne(us,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return jf}static get DefaultType(){return Vf}static get NAME(){return Bc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(sn(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!v.trigger(this._element,yf,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(xf))for(let n of[].concat(...document.body.children))v.on(n,"mouseover",ms);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(oi),this._element.classList.add(oi),v.trigger(this._element,Cf,t)}}hide(){if(sn(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!v.trigger(this._element,vf,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let n of[].concat(...document.body.children))v.off(n,"mouseover",ms);this._popper&&this._popper.destroy(),this._menu.classList.remove(oi),this._element.classList.remove(oi),this._element.setAttribute("aria-expanded","false"),jt.removeDataAttribute(this._menu,"popper"),v.trigger(this._element,bf,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!$t(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Bc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof oo>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:$t(this._config.reference)?t=rn(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let e=this._getPopperConfig();this._popper=so(t,this._menu,e)}_isShown(){return this._menu.classList.contains(oi)}_getPlacement(){let t=this._parent;if(t.classList.contains(wf))return Ff;if(t.classList.contains(Tf))return Lf;if(t.classList.contains(Mf))return Uf;if(t.classList.contains(kf))return $f;let e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Ef)?e?Df:If:e?Rf:Nf}_detectNavbar(){return this._element.closest(Af)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(jt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),C(C({},t),ze(this._config.popperConfig,[void 0,t]))}_selectMenuItem({key:t,target:e}){let n=L.find(Of,this._menu).filter(r=>di(r));n.length&&ia(n,e,t===Wc,!n.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===_f||t.type==="keyup"&&t.key!==Hc)return;let e=L.find(Pf);for(let n of e){let r=i.getInstance(n);if(!r||r._config.autoClose===!1)continue;let s=t.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Hc||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let a={relatedTarget:r._element};t.type==="click"&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){let e=/input|textarea/i.test(t.target.tagName),n=t.key===ff,r=[gf,Wc].includes(t.key);if(!r&&!n||e&&!n)return;t.preventDefault();let s=this.matches(wn)?this:L.prev(this,wn)[0]||L.next(this,wn)[0]||L.findOne(wn,t.delegateTarget.parentNode),o=i.getOrCreateInstance(s);if(r){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}};v.on(document,Od,wn,Vt.dataApiKeydownHandler);v.on(document,Od,us,Vt.dataApiKeydownHandler);v.on(document,xd,Vt.clearMenus);v.on(document,Sf,Vt.clearMenus);v.on(document,xd,wn,function(i){i.preventDefault(),Vt.getOrCreateInstance(this).toggle()});ct(Vt);var Id="backdrop",zf="fade",Kc="show",Gc=`mousedown.bs.${Id}`,qf={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Bf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},hs=class extends Mn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return qf}static get DefaultType(){return Bf}static get NAME(){return Id}show(t){if(!this._config.isVisible){ze(t);return}this._append();let e=this._getElement();this._config.isAnimated&&Ji(e),e.classList.add(Kc),this._emulateAnimation(()=>{ze(t)})}hide(t){if(!this._config.isVisible){ze(t);return}this._getElement().classList.remove(Kc),this._emulateAnimation(()=>{this.dispose(),ze(t)})}dispose(){this._isAppended&&(v.off(this._element,Gc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(zf),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=rn(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),v.on(t,Gc,()=>{ze(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){vd(t,this._getElement(),this._config.isAnimated)}},Hf="focustrap",Wf="bs.focustrap",fs=`.${Wf}`,Kf=`focusin${fs}`,Gf=`keydown.tab${fs}`,Qf="Tab",Yf="forward",Qc="backward",Xf={autofocus:!0,trapElement:null},Zf={autofocus:"boolean",trapElement:"element"},gs=class extends Mn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Xf}static get DefaultType(){return Zf}static get NAME(){return Hf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),v.off(document,fs),v.on(document,Kf,t=>this._handleFocusin(t)),v.on(document,Gf,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,v.off(document,fs))}_handleFocusin(t){let{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;let n=L.focusableChildren(e);n.length===0?e.focus():this._lastTabNavDirection===Qc?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===Qf&&(this._lastTabNavDirection=t.shiftKey?Qc:Yf)}},Yc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Xc=".sticky-top",os="padding-right",Zc="margin-right",Yi=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,os,e=>e+t),this._setElementAttributes(Yc,os,e=>e+t),this._setElementAttributes(Xc,Zc,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,os),this._resetElementAttributes(Yc,os),this._resetElementAttributes(Xc,Zc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){let r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,e);let a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,e){let n=t.style.getPropertyValue(e);n&&jt.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){let n=r=>{let s=jt.getDataAttribute(r,e);if(s===null){r.style.removeProperty(e);return}jt.removeDataAttribute(r,e),r.style.setProperty(e,s)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if($t(t)){e(t);return}for(let n of L.find(t,this._element))e(n)}},Jf="modal",eg="bs.modal",lt=`.${eg}`,tg=".data-api",ng="Escape",ig=`hide${lt}`,rg=`hidePrevented${lt}`,Dd=`hidden${lt}`,Nd=`show${lt}`,sg=`shown${lt}`,og=`resize${lt}`,ag=`click.dismiss${lt}`,lg=`mousedown.dismiss${lt}`,cg=`keydown.dismiss${lt}`,dg=`click${lt}${tg}`,Jc="modal-open",ug="fade",ed="show",Ho="modal-static",mg=".modal.show",pg=".modal-dialog",hg=".modal-body",fg='[data-bs-toggle="modal"]',gg={backdrop:!0,focus:!0,keyboard:!0},_g={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Nt=class i extends tt{constructor(t,e){super(t,e),this._dialog=L.findOne(pg,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Yi,this._addEventListeners()}static get Default(){return gg}static get DefaultType(){return _g}static get NAME(){return Jf}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||v.trigger(this._element,Nd,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Jc),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||v.trigger(this._element,ig).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ed),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){v.off(window,lt),v.off(this._dialog,lt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new hs({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gs({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let e=L.findOne(hg,this._dialog);e&&(e.scrollTop=0),Ji(this._element),this._element.classList.add(ed);let n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,v.trigger(this._element,sg,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){v.on(this._element,cg,t=>{if(t.key===ng){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),v.on(window,og,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),v.on(this._element,lg,t=>{v.one(this._element,ag,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Jc),this._resetAdjustments(),this._scrollBar.reset(),v.trigger(this._element,Dd)})}_isAnimated(){return this._element.classList.contains(ug)}_triggerBackdropTransition(){if(v.trigger(this._element,rg).defaultPrevented)return;let e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(Ho)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Ho),this._queueCallback(()=>{this._element.classList.remove(Ho),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){let r=at()?"paddingLeft":"paddingRight";this._element.style[r]=`${e}px`}if(!n&&t){let r=at()?"paddingRight":"paddingLeft";this._element.style[r]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){let n=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](e)}})}};v.on(document,dg,fg,function(i){let t=L.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),v.one(t,Nd,r=>{r.defaultPrevented||v.one(t,Dd,()=>{di(this)&&this.focus()})});let e=L.findOne(mg);e&&Nt.getInstance(e).hide(),Nt.getOrCreateInstance(t).toggle(this)});vs(Nt);ct(Nt);var vg="offcanvas",bg="bs.offcanvas",qt=`.${bg}`,Rd=".data-api",yg=`load${qt}${Rd}`,Cg="Escape",td="show",nd="showing",id="hiding",Sg="offcanvas-backdrop",Fd=".offcanvas.show",Eg=`show${qt}`,wg=`shown${qt}`,Tg=`hide${qt}`,rd=`hidePrevented${qt}`,Ld=`hidden${qt}`,Mg=`resize${qt}`,kg=`click${qt}${Rd}`,Pg=`keydown.dismiss${qt}`,Ag='[data-bs-toggle="offcanvas"]',xg={backdrop:!0,keyboard:!0,scroll:!1},Og={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},zt=class i extends tt{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return xg}static get DefaultType(){return Og}static get NAME(){return vg}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||v.trigger(this._element,Eg,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Yi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(nd);let n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(td),this._element.classList.remove(nd),v.trigger(this._element,wg,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||v.trigger(this._element,Tg).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(id),this._backdrop.hide();let e=()=>{this._element.classList.remove(td,id),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Yi().reset(),v.trigger(this._element,Ld)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){v.trigger(this._element,rd);return}this.hide()},e=!!this._config.backdrop;return new hs({className:Sg,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new gs({trapElement:this._element})}_addEventListeners(){v.on(this._element,Pg,t=>{if(t.key===Cg){if(this._config.keyboard){this.hide();return}v.trigger(this._element,rd)}})}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};v.on(document,kg,Ag,function(i){let t=L.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),sn(this))return;v.one(t,Ld,()=>{di(this)&&this.focus()});let e=L.findOne(Fd);e&&e!==t&&zt.getInstance(e).hide(),zt.getOrCreateInstance(t).toggle(this)});v.on(window,yg,()=>{for(let i of L.find(Fd))zt.getOrCreateInstance(i).show()});v.on(window,Mg,()=>{for(let i of L.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&zt.getOrCreateInstance(i).hide()});vs(zt);ct(zt);var Ig=/^aria-[\w-]*$/i,Ud={"*":["class","dir","id","lang","role",Ig],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Dg=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ng=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Rg=(i,t)=>{let e=i.nodeName.toLowerCase();return t.includes(e)?Dg.has(e)?!!Ng.test(i.nodeValue):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(e))};function Fg(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);let r=new window.DOMParser().parseFromString(i,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(let o of s){let a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}let m=[].concat(...o.attributes),h=[].concat(t["*"]||[],t[a]||[]);for(let f of m)Rg(f,h)||o.removeAttribute(f.nodeName)}return r.body.innerHTML}var Lg="TemplateFactory",Ug={allowList:Ud,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},$g={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},jg={entry:"(string|element|function|null)",selector:"(string|element)"},na=class extends Mn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Ug}static get DefaultType(){return $g}static get NAME(){return Lg}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content=C(C({},this._config.content),t),this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[r,s]of Object.entries(this._config.content))this._setContent(t,s,r);let e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},jg)}_setContent(t,e,n){let r=L.findOne(n,t);if(r){if(e=this._resolvePossibleFunction(e),!e){r.remove();return}if($t(e)){this._putElementInTemplate(rn(e),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(e);return}r.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Fg(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return ze(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}},Vg="tooltip",zg=new Set(["sanitize","allowList","sanitizeFn"]),Wo="fade",qg="modal",as="show",Bg=".tooltip-inner",sd=`.${qg}`,od="hide.bs.modal",Ki="hover",Ko="focus",Hg="click",Wg="manual",Kg="hide",Gg="hidden",Qg="show",Yg="shown",Xg="inserted",Zg="click",Jg="focusin",e0="focusout",t0="mouseenter",n0="mouseleave",i0={AUTO:"auto",TOP:"top",RIGHT:at()?"left":"right",BOTTOM:"bottom",LEFT:at()?"right":"left"},r0={allowList:Ud,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},s0={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},Pn=class i extends tt{constructor(t,e){if(typeof oo>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return r0}static get DefaultType(){return s0}static get NAME(){return Vg}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),v.off(this._element.closest(sd),od,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=v.trigger(this._element,this.constructor.eventName(Qg)),n=(gd(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();let r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));let{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),v.trigger(this._element,this.constructor.eventName(Xg))),this._popper=this._createPopper(r),r.classList.add(as),"ontouchstart"in document.documentElement)for(let a of[].concat(...document.body.children))v.on(a,"mouseover",ms);let o=()=>{v.trigger(this._element,this.constructor.eventName(Yg)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||v.trigger(this._element,this.constructor.eventName(Kg)).defaultPrevented)return;if(this._getTipElement().classList.remove(as),"ontouchstart"in document.documentElement)for(let r of[].concat(...document.body.children))v.off(r,"mouseover",ms);this._activeTrigger[Hg]=!1,this._activeTrigger[Ko]=!1,this._activeTrigger[Ki]=!1,this._isHovered=null;let n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),v.trigger(this._element,this.constructor.eventName(Gg)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Wo,as),e.classList.add(`bs-${this.constructor.NAME}-auto`);let n=Hp(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(Wo),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new na(W(C({},this._config),{content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{[Bg]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Wo)}_isShown(){return this.tip&&this.tip.classList.contains(as)}_createPopper(t){let e=ze(this._config.placement,[this,t,this._element]),n=i0[e.toUpperCase()];return so(this._element,t,this._getPopperConfig(n))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return ze(t,[this._element,this._element])}_getPopperConfig(t){let e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return C(C({},e),ze(this._config.popperConfig,[void 0,e]))}_setListeners(){let t=this._config.trigger.split(" ");for(let e of t)if(e==="click")v.on(this._element,this.constructor.eventName(Zg),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(e!==Wg){let n=e===Ki?this.constructor.eventName(t0):this.constructor.eventName(Jg),r=e===Ki?this.constructor.eventName(n0):this.constructor.eventName(e0);v.on(this._element,n,this._config.selector,s=>{let o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?Ko:Ki]=!0,o._enter()}),v.on(this._element,r,this._config.selector,s=>{let o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?Ko:Ki]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},v.on(this._element.closest(sd),od,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let e=jt.getDataAttributes(this._element);for(let n of Object.keys(e))zg.has(n)&&delete e[n];return t=C(C({},e),typeof t=="object"&&t?t:{}),t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:rn(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};ct(Pn);var o0="popover",a0=".popover-header",l0=".popover-body",c0=W(C({},Pn.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),d0=W(C({},Pn.DefaultType),{content:"(null|string|element|function)"}),_s=class i extends Pn{static get Default(){return c0}static get DefaultType(){return d0}static get NAME(){return o0}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[a0]:this._getTitle(),[l0]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}};ct(_s);var u0="scrollspy",m0="bs.scrollspy",oa=`.${m0}`,p0=".data-api",h0=`activate${oa}`,ad=`click${oa}`,f0=`load${oa}${p0}`,g0="dropdown-item",ri="active",_0='[data-bs-spy="scroll"]',Go="[href]",v0=".nav, .list-group",ld=".nav-link",b0=".nav-item",y0=".list-group-item",C0=`${ld}, ${b0} > ${ld}, ${y0}`,S0=".dropdown",E0=".dropdown-toggle",w0={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},T0={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},Xi=class i extends tt{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return w0}static get DefaultType(){return T0}static get NAME(){return u0}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=rn(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(v.off(this._config.target,ad),v.on(this._config.target,ad,Go,t=>{let e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();let n=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:r,behavior:"smooth"});return}n.scrollTop=r}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){let e=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(let o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}let a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(n(o),!r)return;continue}!s&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=L.find(Go,this._config.target);for(let e of t){if(!e.hash||sn(e))continue;let n=L.findOne(decodeURI(e.hash),this._element);di(n)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(ri),this._activateParents(t),v.trigger(this._element,h0,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(g0)){L.findOne(E0,t.closest(S0)).classList.add(ri);return}for(let e of L.parents(t,v0))for(let n of L.prev(e,C0))n.classList.add(ri)}_clearActiveClass(t){t.classList.remove(ri);let e=L.find(`${Go}.${ri}`,t);for(let n of e)n.classList.remove(ri)}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}};v.on(window,f0,()=>{for(let i of L.find(_0))Xi.getOrCreateInstance(i)});ct(Xi);var M0="tab",k0="bs.tab",xn=`.${k0}`,P0=`hide${xn}`,A0=`hidden${xn}`,x0=`show${xn}`,O0=`shown${xn}`,I0=`click${xn}`,D0=`keydown${xn}`,N0=`load${xn}`,R0="ArrowLeft",cd="ArrowRight",F0="ArrowUp",dd="ArrowDown",Qo="Home",ud="End",Tn="active",md="fade",Yo="show",L0="dropdown",$d=".dropdown-toggle",U0=".dropdown-menu",Xo=`:not(${$d})`,$0='.list-group, .nav, [role="tablist"]',j0=".nav-item, .list-group-item",V0=`.nav-link${Xo}, .list-group-item${Xo}, [role="tab"]${Xo}`,jd='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Zo=`${V0}, ${jd}`,z0=`.${Tn}[data-bs-toggle="tab"], .${Tn}[data-bs-toggle="pill"], .${Tn}[data-bs-toggle="list"]`,ci=class i extends tt{constructor(t){super(t),this._parent=this._element.closest($0),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),v.on(this._element,D0,e=>this._keydown(e)))}static get NAME(){return M0}show(){let t=this._element;if(this._elemIsActive(t))return;let e=this._getActiveElem(),n=e?v.trigger(e,P0,{relatedTarget:t}):null;v.trigger(t,x0,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Tn),this._activate(L.getElementFromSelector(t));let n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Yo);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),v.trigger(t,O0,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(md))}_deactivate(t,e){if(!t)return;t.classList.remove(Tn),t.blur(),this._deactivate(L.getElementFromSelector(t));let n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Yo);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),v.trigger(t,A0,{relatedTarget:e})};this._queueCallback(n,t,t.classList.contains(md))}_keydown(t){if(![R0,cd,F0,dd,Qo,ud].includes(t.key))return;t.stopPropagation(),t.preventDefault();let e=this._getChildren().filter(r=>!sn(r)),n;if([Qo,ud].includes(t.key))n=e[t.key===Qo?0:e.length-1];else{let r=[cd,dd].includes(t.key);n=ia(e,t.target,r,!0)}n&&(n.focus({preventScroll:!0}),i.getOrCreateInstance(n).show())}_getChildren(){return L.find(Zo,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(let n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let e=L.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){let n=this._getOuterElement(t);if(!n.classList.contains(L0))return;let r=(s,o)=>{let a=L.findOne(s,n);a&&a.classList.toggle(o,e)};r($d,Tn),r(U0,Yo),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Tn)}_getInnerElement(t){return t.matches(Zo)?t:L.findOne(Zo,t)}_getOuterElement(t){return t.closest(j0)||t}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}};v.on(document,I0,jd,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!sn(this)&&ci.getOrCreateInstance(this).show()});v.on(window,N0,()=>{for(let i of L.find(z0))ci.getOrCreateInstance(i)});ct(ci);var q0="toast",B0="bs.toast",an=`.${B0}`,H0=`mouseover${an}`,W0=`mouseout${an}`,K0=`focusin${an}`,G0=`focusout${an}`,Q0=`hide${an}`,Y0=`hidden${an}`,X0=`show${an}`,Z0=`shown${an}`,J0="fade",pd="hide",ls="show",cs="showing",e_={animation:"boolean",autohide:"boolean",delay:"number"},t_={animation:!0,autohide:!0,delay:5e3},Zi=class i extends tt{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return t_}static get DefaultType(){return e_}static get NAME(){return q0}show(){if(v.trigger(this._element,X0).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(J0);let e=()=>{this._element.classList.remove(cs),v.trigger(this._element,Z0),this._maybeScheduleHide()};this._element.classList.remove(pd),Ji(this._element),this._element.classList.add(ls,cs),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||v.trigger(this._element,Q0).defaultPrevented)return;let e=()=>{this._element.classList.add(pd),this._element.classList.remove(cs,ls),v.trigger(this._element,Y0)};this._element.classList.add(cs),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ls),super.dispose()}isShown(){return this._element.classList.contains(ls)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}let n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){v.on(this._element,H0,t=>this._onInteraction(t,!0)),v.on(this._element,W0,t=>this._onInteraction(t,!1)),v.on(this._element,K0,t=>this._onInteraction(t,!0)),v.on(this._element,G0,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let e=i.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};vs(Zi);ct(Zi);var ae=(()=>{class i{getToken(){return this.currentUserValue?.token||localStorage.getItem("token")}constructor(e,n){this.http=e,this.router=n,this.apiUrl="http://localhost:3000/api",this.loading=!1;let r=localStorage.getItem("currentUser");this.currentUserSubject=new Pe(r?JSON.parse(r):null),this.currentUser=this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}isLoggedIn(){let e=this.currentUserValue;return!!e&&!!e.token}get isLoading(){return this.loading}get isAdmin(){let e=this.currentUserValue;return e&&e.user&&e.user.role==="admin"}handleAuthError(e){return(e.status===401||e.error?.name==="TokenExpiredError")&&(this.logout(),this.router.navigate(["/login"])),ce(()=>e)}login(e,n){if(this.loading)return new mr;this.loading=!0;let r=(e||"").trim(),s=(n||"").trim();if(console.log("Attempting login with:",{email:r,password:s}),!r||!s)throw this.loading=!1,new Error("Email and password are required");let o={headers:{"Content-Type":"application/json"}};return console.log("Sending login request with body:",{email:r,password:s}),this.http.post(`${this.apiUrl}/auth/login`,{email:r,password:s},o).pipe(Z({next:m=>{if(console.log("Login response:",m),!m||!m.token)throw this.loading=!1,new Error("Invalid response from server");localStorage.setItem("currentUser",JSON.stringify(m)),localStorage.setItem("token",m.token),this.currentUserSubject.next(m),this.loading=!1},error:m=>{console.error("Login error:",m),this.loading=!1;let h="Login failed. Please check your credentials.";throw m.error?.message&&(h=m.error.message),new Error(h)}}),U(this.handleAuthError.bind(this)))}forgotPassword(e){return this.http.post(`${this.apiUrl}/auth/forgot-password`,{email:e})}resetPassword(e,n){return this.http.post(`${this.apiUrl}/auth/reset-password`,{token:e,newPassword:n}).pipe(U(r=>(console.error("Reset password error:",r),ce(()=>r))))}logout(){localStorage.removeItem("token"),localStorage.removeItem("currentUser"),this.currentUserSubject.next(null),this.router.navigate(["/login"])}static{this.\u0275fac=function(n){return new(n||i)(K($e),K(Y))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ys=()=>({exact:!0});function n_(i,t){i&1&&b(0,"span",19)}function i_(i,t){i&1&&(c(0,"span",20),d(1,"\u2715"),l())}function r_(i,t){if(i&1){let e=Q();c(0,"li",12)(1,"a",21),w("click",function(){k(e);let r=y(2);return P(r.closeMenu())}),d(2,"Users"),l()()}i&2&&(u(),p("routerLinkActiveOptions",Ei(1,ys)))}function s_(i,t){if(i&1){let e=Q();c(0,"li",12)(1,"a",22),w("click",function(){k(e);let r=y(2);return P(r.closeMenu())}),d(2,"Departments"),l()()}i&2&&(u(),p("routerLinkActiveOptions",Ei(1,ys)))}function o_(i,t){if(i&1){let e=Q();c(0,"nav",4)(1,"div",5)(2,"a",6),w("click",function(){k(e);let r=y();return P(r.closeMenu())}),d(3,"TaskMaster"),l(),c(4,"button",7),w("click",function(){k(e);let r=y();return P(r.toggleMenu())}),g(5,n_,1,0,"span",8)(6,i_,2,0,"span",9),l(),c(7,"div",10)(8,"ul",11)(9,"li",12)(10,"a",13),w("click",function(){k(e);let r=y();return P(r.closeMenu())}),d(11,"Dashboard"),l()(),c(12,"li",12)(13,"a",14),w("click",function(){k(e);let r=y();return P(r.closeMenu())}),d(14,"Tasks"),l()(),g(15,r_,3,2,"li",15)(16,s_,3,2,"li",15),l(),c(17,"div",16)(18,"span",17),d(19),l(),c(20,"button",18),w("click",function(){k(e);let r=y();return r.logout(),P(r.closeMenu())}),d(21,"Logout"),l()()()()()}if(i&2){let e=y();u(4),Vn("aria-expanded",!e.isMenuCollapsed),u(),p("ngIf",e.isMenuCollapsed),u(),p("ngIf",!e.isMenuCollapsed),u(),re("show",!e.isMenuCollapsed),u(3),p("routerLinkActiveOptions",Ei(10,ys)),u(3),p("routerLinkActiveOptions",Ei(11,ys)),u(2),p("ngIf",e.isAdmin()),u(),p("ngIf",e.isAdmin()),u(3),R("Welcome, ",e.currentUser==null?null:e.currentUser.username,"")}}function a_(i,t){i&1&&(c(0,"footer",23)(1,"div",24)(2,"span",25),d(3," 2025 TaskMaster. All rights reserved."),l()()())}var Vd=(()=>{class i{constructor(e,n,r){this.authService=e,this.router=n,this.elementRef=r,this.title="TaskMaster",this.isMenuCollapsed=!0}ngAfterViewInit(){let e=this.elementRef.nativeElement.querySelector("#navbarNav");e&&typeof bs<"u"&&(this.collapseInstance=new kn(e,{toggle:!1}),this.isMenuCollapsed?this.collapseInstance.hide():this.collapseInstance.show())}ngOnDestroy(){this.collapseInstance&&this.collapseInstance.dispose()}toggleMenu(){this.isMenuCollapsed=!this.isMenuCollapsed,this.collapseInstance&&(this.isMenuCollapsed?this.collapseInstance.hide():this.collapseInstance.show())}closeMenu(){this.isMenuCollapsed||(this.isMenuCollapsed=!0,this.collapseInstance?this.collapseInstance.hide():this.collapseInstance.show())}onDocumentClick(e){let n=e.target,r=n.closest(".navbar-toggler"),s=n.closest("#navbarNav");r?(e.preventDefault(),e.stopPropagation(),this.toggleMenu()):!s&&!this.isMenuCollapsed&&this.closeMenu()}isAdmin(){let e=this.authService.currentUserValue;return e?e.user?.role==="admin"||e.role==="admin":!1}logout(){this.authService.logout(),this.router.navigate(["/login"])}get currentUser(){return this.authService.currentUserValue}static{this.\u0275fac=function(n){return new(n||i)(E(ae),E(Y),E(yi))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-root"]],hostBindings:function(n,r){n&1&&w("click",function(o){return r.onDocumentClick(o)},!1,ol)},decls:5,vars:2,consts:[[1,"app-container"],["class","navbar navbar-expand-lg navbar-dark bg-primary",4,"ngIf"],[1,"main-content"],["class","footer mt-auto py-3 bg-light",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],["routerLink","/dashboard",1,"navbar-brand",3,"click"],["type","button","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],["class","navbar-toggler-icon",4,"ngIf"],["class","close-icon",4,"ngIf"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],["routerLink","/tasks","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],["class","nav-item",4,"ngIf"],[1,"d-flex"],[1,"navbar-text","me-3"],[1,"btn","btn-outline-light",3,"click"],[1,"navbar-toggler-icon"],[1,"close-icon"],["routerLink","/users","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],["routerLink","/departments","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],[1,"footer","mt-auto","py-3","bg-light"],[1,"container","text-center"],[1,"text-muted"]],template:function(n,r){n&1&&(c(0,"div",0),g(1,o_,22,12,"nav",1),c(2,"div",2),b(3,"router-outlet"),l(),g(4,a_,4,0,"footer",3),l()),n&2&&(u(),p("ngIf",r.currentUser),u(3),p("ngIf",r.currentUser))},dependencies:[ne,oe,we,Vi,ot,Fo],styles:[".close-icon[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;color:#fff;font-size:24px;line-height:24px;text-align:center}.navbar-toggler[_ngcontent-%COMP%]{padding:.25rem .5rem;border:none}.navbar-toggler[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 .2rem #ffffff40}.navbar-collapse[_ngcontent-%COMP%]{transition:all .3s ease}@media (max-width: 991.98px){.navbar-collapse[_ngcontent-%COMP%]{position:fixed;top:56px;left:0;right:0;padding:1rem;background-color:#0d6efd;z-index:1000;max-height:calc(100vh - 56px);overflow-y:auto}}"]})}}return i})();function zd(i){return new j(3e3,!1)}function l_(){return new j(3100,!1)}function c_(){return new j(3101,!1)}function d_(i){return new j(3001,!1)}function u_(i){return new j(3003,!1)}function m_(i){return new j(3004,!1)}function Bd(i,t){return new j(3005,!1)}function Hd(){return new j(3006,!1)}function Wd(){return new j(3007,!1)}function Kd(i,t){return new j(3008,!1)}function Gd(i){return new j(3002,!1)}function Qd(i,t,e,n,r){return new j(3010,!1)}function Yd(){return new j(3011,!1)}function Xd(){return new j(3012,!1)}function Zd(){return new j(3200,!1)}function Jd(){return new j(3202,!1)}function eu(){return new j(3013,!1)}function tu(i){return new j(3014,!1)}function nu(i){return new j(3015,!1)}function iu(i){return new j(3016,!1)}function ru(i,t){return new j(3404,!1)}function p_(i){return new j(3502,!1)}function su(i){return new j(3503,!1)}function ou(){return new j(3300,!1)}function au(i){return new j(3504,!1)}function lu(i){return new j(3301,!1)}function cu(i,t){return new j(3302,!1)}function du(i){return new j(3303,!1)}function uu(i,t){return new j(3400,!1)}function mu(i){return new j(3401,!1)}function pu(i){return new j(3402,!1)}function hu(i,t){return new j(3505,!1)}function Bt(i){switch(i.length){case 0:return new _n;case 1:return i[0];default:return new Mr(i)}}function da(i,t,e=new Map,n=new Map){let r=[],s=[],o=-1,a=null;if(t.forEach(m=>{let h=m.get("offset"),f=h==o,_=f&&a||new Map;m.forEach((M,S)=>{let T=S,A=M;if(S!=="offset")switch(T=i.normalizePropertyName(T,r),A){case Ti:A=e.get(S);break;case vt:A=n.get(S);break;default:A=i.normalizeStyleValue(S,T,A,r);break}_.set(T,A)}),f||s.push(_),a=_,o=h}),r.length)throw p_(r);return s}function Cs(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&aa(e,"start",i)));break;case"done":i.onDone(()=>n(e&&aa(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&aa(e,"destroy",i)));break}}function aa(i,t,e){let n=e.totalTime,r=!!e.disabled,s=Ss(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,n??i.totalTime,r),o=i._data;return o!=null&&(s._data=o),s}function Ss(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function qe(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function ua(i){let t=i.indexOf(":"),e=i.substring(1,t),n=i.slice(t+1);return[e,n]}var h_=typeof document>"u"?null:document.documentElement;function Es(i){let t=i.parentNode||i.host||null;return t===h_?null:t}function f_(i){return i.substring(1,6)=="ebkit"}var On=null,qd=!1;function fu(i){On||(On=g_()||{},qd=On.style?"WebkitAppearance"in On.style:!1);let t=!0;return On.style&&!f_(i)&&(t=i in On.style,!t&&qd&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in On.style)),t}function g_(){return typeof document<"u"?document.body:null}function ma(i,t){for(;t;){if(t===i)return!0;t=Es(t)}return!1}function pa(i,t,e){if(e)return Array.from(i.querySelectorAll(t));let n=i.querySelector(t);return n?[n]:[]}var __=1e3,ha="{{",v_="}}",fa="ng-enter",ws="ng-leave",tr="ng-trigger",nr=".ng-trigger",ga="ng-animating",Ts=".ng-animating";function Rt(i){if(typeof i=="number")return i;let t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:la(parseFloat(t[1]),t[2])}function la(i,t){switch(t){case"s":return i*__;default:return i}}function ir(i,t,e){return i.hasOwnProperty("duration")?i:b_(i,t,e)}function b_(i,t,e){let n=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof i=="string"){let a=i.match(n);if(a===null)return t.push(zd(i)),{duration:0,delay:0,easing:""};r=la(parseFloat(a[1]),a[2]);let m=a[3];m!=null&&(s=la(parseFloat(m),a[4]));let h=a[5];h&&(o=h)}else r=i;if(!e){let a=!1,m=t.length;r<0&&(t.push(l_()),a=!0),s<0&&(t.push(c_()),a=!0),a&&t.splice(m,0,zd(i))}return{duration:r,delay:s,easing:o}}function gu(i){return i.length?i[0]instanceof Map?i:i.map(t=>new Map(Object.entries(t))):[]}function yt(i,t,e){t.forEach((n,r)=>{let s=Ms(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n})}function ln(i,t){t.forEach((e,n)=>{let r=Ms(n);i.style[r]=""})}function pi(i){return Array.isArray(i)?i.length==1?i[0]:Dl(i):i}function _u(i,t,e){let n=t.params||{},r=_a(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(d_(s))})}var ca=new RegExp(`${ha}\\s*(.+?)\\s*${v_}`,"g");function _a(i){let t=[];if(typeof i=="string"){let e;for(;e=ca.exec(i);)t.push(e[1]);ca.lastIndex=0}return t}function hi(i,t,e){let n=`${i}`,r=n.replace(ca,(s,o)=>{let a=t[o];return a==null&&(e.push(u_(o)),a=""),a.toString()});return r==n?i:r}var y_=/-+([a-z0-9])/g;function Ms(i){return i.replace(y_,(...t)=>t[1].toUpperCase())}function vu(i,t){return i===0||t===0}function bu(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,ks(i,a)))}}return t}function Be(i,t,e){switch(t.type){case G.Trigger:return i.visitTrigger(t,e);case G.State:return i.visitState(t,e);case G.Transition:return i.visitTransition(t,e);case G.Sequence:return i.visitSequence(t,e);case G.Group:return i.visitGroup(t,e);case G.Animate:return i.visitAnimate(t,e);case G.Keyframes:return i.visitKeyframes(t,e);case G.Style:return i.visitStyle(t,e);case G.Reference:return i.visitReference(t,e);case G.AnimateChild:return i.visitAnimateChild(t,e);case G.AnimateRef:return i.visitAnimateRef(t,e);case G.Query:return i.visitQuery(t,e);case G.Stagger:return i.visitStagger(t,e);default:throw m_(t.type)}}function ks(i,t){return window.getComputedStyle(i)[t]}var Na=(()=>{class i{validateStyleProperty(e){return fu(e)}containsElement(e,n){return ma(e,n)}getParentElement(e){return Es(e)}query(e,n,r){return pa(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],m){return new _n(r,s)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})(),Dn=class{static NOOP=new Na},Nn=class{};var C_=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Is=class extends Nn{normalizePropertyName(t,e){return Ms(t)}normalizeStyleValue(t,e,n,r){let s="",o=n.toString().trim();if(C_.has(e)&&n!==0&&n!=="0")if(typeof n=="number")s="px";else{let a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Bd(t,n))}return o+s}};var Ds="*";function S_(i,t){let e=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(n=>E_(n,e,t)):e.push(i),e}function E_(i,t,e){if(i[0]==":"){let m=w_(i,e);if(typeof m=="function"){t.push(m);return}i=m}let n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return e.push(nu(i)),t;let r=n[1],s=n[2],o=n[3];t.push(yu(r,o));let a=r==Ds&&o==Ds;s[0]=="<"&&!a&&t.push(yu(o,r))}function w_(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(iu(i)),"* => *"}}var Ps=new Set(["true","1"]),As=new Set(["false","0"]);function yu(i,t){let e=Ps.has(i)||As.has(i),n=Ps.has(t)||As.has(t);return(r,s)=>{let o=i==Ds||i==r,a=t==Ds||t==s;return!o&&e&&typeof r=="boolean"&&(o=r?Ps.has(i):As.has(i)),!a&&n&&typeof s=="boolean"&&(a=s?Ps.has(t):As.has(t)),o&&a}}var xu=":self",T_=new RegExp(`s*${xu}s*,?`,"g");function Ou(i,t,e,n){return new Ea(i).build(t,e,n)}var Cu="",Ea=class{_driver;constructor(t){this._driver=t}build(t,e,n){let r=new wa(e);return this._resetContextStyleTimingState(r),Be(this,pi(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector=Cu,t.collectedStyles=new Map,t.collectedStyles.set(Cu,new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0,s=[],o=[];return t.name.charAt(0)=="@"&&e.errors.push(Hd()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==G.State){let m=a,h=m.name;h.toString().split(/\s*,\s*/).forEach(f=>{m.name=f,s.push(this.visitState(m,e))}),m.name=h}else if(a.type==G.Transition){let m=this.visitTransition(a,e);n+=m.queryCount,r+=m.depCount,o.push(m)}else e.errors.push(Wd())}),{type:G.Trigger,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){let n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){let s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(m=>{_a(m).forEach(h=>{o.hasOwnProperty(h)||s.add(h)})})}),s.size&&e.errors.push(Kd(t.name,[...s.values()]))}return{type:G.State,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let n=Be(this,pi(t.animation),e),r=S_(t.expr,e.errors);return{type:G.Transition,matchers:r,animation:n,queryCount:e.queryCount,depCount:e.depCount,options:In(t.options)}}visitSequence(t,e){return{type:G.Sequence,steps:t.steps.map(n=>Be(this,n,e)),options:In(t.options)}}visitGroup(t,e){let n=e.currentTime,r=0,s=t.steps.map(o=>{e.currentTime=n;let a=Be(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:G.Group,steps:s,options:In(t.options)}}visitAnimate(t,e){let n=A_(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:ao({});if(s.type==G.Keyframes)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;let h={};n.easing&&(h.easing=n.easing),o=ao(h)}e.currentTime+=n.duration+n.delay;let m=this.visitStyle(o,e);m.isEmptyStep=a,r=m}return e.currentAnimateTimings=null,{type:G.Animate,timings:n,style:r,options:null}}visitStyle(t,e){let n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){let n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)typeof a=="string"?a===vt?n.push(a):e.errors.push(Gd(a)):n.push(new Map(Object.entries(a)));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let m of a.values())if(m.toString().indexOf(ha)>=0){s=!0;break}}}),{type:G.Style,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){let n=e.currentAnimateTimings,r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,m)=>{let h=e.collectedStyles.get(e.currentQuerySelector),f=h.get(m),_=!0;f&&(s!=r&&s>=f.startTime&&r<=f.endTime&&(e.errors.push(Qd(m,f.startTime,f.endTime,s,r)),_=!1),s=f.startTime),_&&h.set(m,{startTime:s,endTime:r}),e.options&&_u(a,e.options,e.errors)})})}visitKeyframes(t,e){let n={type:G.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(Yd()),n;let r=1,s=0,o=[],a=!1,m=!1,h=0,f=t.steps.map(te=>{let x=this._makeStyleAst(te,e),me=x.offset!=null?x.offset:P_(x.styles),ke=0;return me!=null&&(s++,ke=x.offset=me),m=m||ke<0||ke>1,a=a||ke<h,h=ke,o.push(ke),x});m&&e.errors.push(Xd()),a&&e.errors.push(Zd());let _=t.steps.length,M=0;s>0&&s<_?e.errors.push(Jd()):s==0&&(M=r/(_-1));let S=_-1,T=e.currentTime,A=e.currentAnimateTimings,H=A.duration;return f.forEach((te,x)=>{let me=M>0?x==S?1:M*x:o[x],ke=me*H;e.currentTime=T+A.delay+ke,A.duration=ke,this._validateStyleAst(te,e),te.offset=me,n.styles.push(te)}),n}visitReference(t,e){return{type:G.Reference,animation:Be(this,pi(t.animation),e),options:In(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:G.AnimateChild,options:In(t.options)}}visitAnimateRef(t,e){return{type:G.AnimateRef,animation:this.visitReference(t.animation,e),options:In(t.options)}}visitQuery(t,e){let n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;let[s,o]=M_(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,qe(e.collectedStyles,e.currentQuerySelector,new Map);let a=Be(this,pi(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:G.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:In(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(eu());let n=t.timings==="full"?{duration:0,delay:0,easing:"full"}:ir(t.timings,e.errors,!0);return{type:G.Stagger,animation:Be(this,pi(t.animation),e),timings:n,options:null}}};function M_(i){let t=!!i.split(/\s*,\s*/).find(e=>e==xu);return t&&(i=i.replace(T_,"")),i=i.replace(/@\*/g,nr).replace(/@\w+/g,e=>nr+"-"+e.slice(1)).replace(/:animating/g,Ts),[i,t]}function k_(i){return i?C({},i):null}var wa=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function P_(i){if(typeof i=="string")return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){let n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function A_(i,t){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let s=ir(i,t).duration;return va(s,0,"")}let e=i;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=va(0,0,"");return s.dynamic=!0,s.strValue=e,s}let r=ir(e,t);return va(r.duration,r.delay,r.easing)}function In(i){return i?(i=C({},i),i.params&&(i.params=k_(i.params))):i={},i}function va(i,t,e){return{duration:i,delay:t,easing:e}}function Ra(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var sr=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},x_=1,O_=":enter",I_=new RegExp(O_,"g"),D_=":leave",N_=new RegExp(D_,"g");function Iu(i,t,e,n,r,s=new Map,o=new Map,a,m,h=[]){return new Ta().buildKeyframes(i,t,e,n,r,s,o,a,m,h)}var Ta=class{buildKeyframes(t,e,n,r,s,o,a,m,h,f=[]){h=h||new sr;let _=new Ma(t,e,h,r,s,f,[]);_.options=m;let M=m.delay?Rt(m.delay):0;_.currentTimeline.delayNextStep(M),_.currentTimeline.setStyles([o],null,_.errors,m),Be(this,n,_);let S=_.timelines.filter(T=>T.containsAnimation());if(S.length&&a.size){let T;for(let A=S.length-1;A>=0;A--){let H=S[A];if(H.element===e){T=H;break}}T&&!T.allowOnlyTimelineStyles()&&T.setStyles([a],null,_.errors,m)}return S.length?S.map(T=>T.buildKeyframes()):[Ra(e,[],[],[],0,M,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let n=e.subInstructions.get(e.element);if(n){let r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){let n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(let r of t){let s=r?.delay;if(s){let o=typeof s=="number"?s:Rt(hi(s,r?.params??{},e.errors));n.delayNextStep(o)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime,o=n.duration!=null?Rt(n.duration):null,a=n.delay!=null?Rt(n.delay):null;return o!==0&&t.forEach(m=>{let h=e.appendInstructionToTimeline(m,o,a);s=Math.max(s,h.duration+h.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Be(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let n=e.subContextCount,r=e,s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==G.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ns);let o=Rt(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Be(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let n=[],r=e.currentTimeline.currentTime,s=t.options&&t.options.delay?Rt(t.options.delay):0;t.steps.forEach(o=>{let a=e.createSubContext(t.options);s&&a.delayNextStep(s),Be(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let n=t.strValue,r=e.params?hi(n,e.params,e.errors):n;return ir(r,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());let s=t.style;s.type==G.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();let s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(m=>{let h=m.offset||0;a.forwardTime(h*s),a.setStyles(m.styles,m.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){let n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Rt(r.delay):0;s&&(e.previousNode.type===G.Style||n==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ns);let o=n,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let m=null;a.forEach((h,f)=>{e.currentQueryIndex=f;let _=e.createSubContext(t.options,h);s&&_.delayNextStep(s),h===e.element&&(m=_.currentTimeline),Be(this,t.animation,_),_.currentTimeline.applyStylesToKeyframe();let M=_.currentTimeline.currentTime;o=Math.max(o,M)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),m&&(e.currentTimeline.mergeTimelineCollectedStyles(m),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1),m=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=a-m;break;case"full":m=n.currentStaggerTime;break}let f=e.currentTimeline;m&&f.delayNextStep(m);let _=f.currentTime;Be(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-_+(r.startTime-n.currentTimeline.startTime)}},Ns={},Ma=class i{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Ns;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,n,r,s,o,a,m){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=m||new Rs(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let n=t,r=this.options;n.duration!=null&&(r.duration=Rt(n.duration)),n.delay!=null&&(r.delay=Rt(n.delay));let s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=hi(s[a],o,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){let r=e||this.element,s=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Ns,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){let r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new ka(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=t.replace(I_,"."+this._enterClassName),t=t.replace(N_,"."+this._leaveClassName);let m=n!=1,h=this._driver.query(this.element,t,m);n!==0&&(h=n<0?h.slice(h.length+n,h.length):h.slice(0,n)),a.push(...h)}return!s&&a.length==0&&o.push(tu(e)),a}},Rs=class i{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new i(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=x_,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||vt),this._currentKeyframe.set(e,vt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);let s=r&&r.params||{},o=R_(t,this._globalTimelineStyles);for(let[a,m]of o){let h=hi(m,s,n);this._pendingStyles.set(a,h),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??vt),this._updateStyle(a,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{let r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,n=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,m)=>{let h=new Map([...this._backFill,...a]);h.forEach((f,_)=>{f===Ti?t.add(_):f===vt&&e.add(_)}),n||h.set("offset",m/this.duration),r.push(h)});let s=[...t.values()],o=[...e.values()];if(n){let a=r[0],m=new Map(a);a.set("offset",0),m.set("offset",1),r=[a,m]}return Ra(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},ka=class extends Rs{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],o=n+e,a=e/o,m=new Map(t[0]);m.set("offset",0),s.push(m);let h=new Map(t[0]);h.set("offset",Su(a)),s.push(h);let f=t.length-1;for(let _=1;_<=f;_++){let M=new Map(t[_]),S=M.get("offset"),T=e+S*n;M.set("offset",Su(T/o)),s.push(M)}n=o,e=0,r="",t=s}return Ra(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}};function Su(i,t=3){let e=Math.pow(10,t-1);return Math.round(i*e)/e}function R_(i,t){let e=new Map,n;return i.forEach(r=>{if(r==="*"){n??=t.keys();for(let s of n)e.set(s,vt)}else for(let[s,o]of r)e.set(s,o)}),e}function Eu(i,t,e,n,r,s,o,a,m,h,f,_,M){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:m,preStyleProps:h,postStyleProps:f,totalTime:_,errors:M}}var ba={},Fs=class{_triggerName;ast;_stateStyles;constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return F_(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return t!==void 0&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,a,m,h,f){let _=[],M=this.ast.options&&this.ast.options.params||ba,S=a&&a.params||ba,T=this.buildStyles(n,S,_),A=m&&m.params||ba,H=this.buildStyles(r,A,_),te=new Set,x=new Map,me=new Map,ke=r==="void",Fn={params:Du(A,M),delay:this.ast.options?.delay},St=f?[]:Iu(t,e,this.ast.animation,s,o,T,H,Fn,h,_),Oe=0;return St.forEach(Ne=>{Oe=Math.max(Ne.duration+Ne.delay,Oe)}),_.length?Eu(e,this._triggerName,n,r,ke,T,H,[],[],x,me,Oe,_):(St.forEach(Ne=>{let un=Ne.element,Ln=qe(x,un,new Set);Ne.preStyleProps.forEach(mn=>Ln.add(mn));let $a=qe(me,un,new Set);Ne.postStyleProps.forEach(mn=>$a.add(mn)),un!==e&&te.add(un)}),Eu(e,this._triggerName,n,r,ke,T,H,St,[...te.values()],x,me,Oe))}};function F_(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}function Du(i,t){let e=C({},t);return Object.entries(i).forEach(([n,r])=>{r!=null&&(e[n]=r)}),e}var Pa=class{styles;defaultParams;normalizer;constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){let n=new Map,r=Du(t,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=hi(o,r,e));let m=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,m,o,e),n.set(a,o)})}),n}};function L_(i,t,e){return new Aa(i,t,e)}var Aa=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,e.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new Pa(r.style,s,n))}),wu(this.states,"true","1"),wu(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Fs(t,r,this.states))}),this.fallbackTransition=U_(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}};function U_(i,t,e){let n=[(o,a)=>!0],r={type:G.Sequence,steps:[],options:null},s={type:G.Transition,animation:r,matchers:n,options:null,queryCount:0,depCount:0};return new Fs(i,s,t)}function wu(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}var $_=new sr,xa=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n}register(t,e){let n=[],r=[],s=Ou(this._driver,e,n,r);if(n.length)throw su(n);this._animations.set(t,s)}_buildPlayer(t,e,n){let r=t.element,s=da(this._normalizer,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){let r=[],s=this._animations.get(t),o,a=new Map;if(s?(o=Iu(this._driver,e,s,fa,ws,new Map,new Map,n,$_,r),o.forEach(f=>{let _=qe(a,f.element,new Map);f.postStyleProps.forEach(M=>_.set(M,null))})):(r.push(ou()),o=[]),r.length)throw au(r);a.forEach((f,_)=>{f.forEach((M,S)=>{f.set(S,this._driver.computeStyle(_,S,vt))})});let m=o.map(f=>{let _=a.get(f.element);return this._buildPlayer(f,new Map,_)}),h=Bt(m);return this._playersById.set(t,h),h.onDestroy(()=>this.destroy(t)),this.players.push(h),h}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw lu(t);return e}listen(t,e,n,r){let s=Ss(e,"","","");return Cs(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if(n=="register"){this.register(t,r[0]);return}if(n=="create"){let o=r[0]||{};this.create(t,e,o);return}let s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t);break}}},Tu="ng-animate-queued",j_=".ng-animate-queued",ya="ng-animate-disabled",V_=".ng-animate-disabled",z_="ng-star-inserted",q_=".ng-star-inserted",B_=[],Nu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},H_={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ct="__ng_removed",or=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let n=t&&t.hasOwnProperty("value"),r=n?t.value:t;if(this.value=K_(r),n){let s=t,{value:o}=s,a=qa(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let n=this.options.params;Object.keys(e).forEach(r=>{n[r]==null&&(n[r]=e[r])})}}},rr="void",Ca=new or(rr),Oa=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this._hostClassName="ng-tns-"+t,dt(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw cu(n,e);if(n==null||n.length==0)throw du(e);if(!G_(n))throw uu(n,e);let s=qe(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);let a=qe(this._engine.statesByElement,t,new Map);return a.has(e)||(dt(t,tr),dt(t,tr+"-"+e),a.set(e,Ca)),()=>{this._engine.afterFlush(()=>{let m=s.indexOf(o);m>=0&&s.splice(m,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw mu(t);return e}trigger(t,e,n,r=!0){let s=this._getTrigger(e),o=new ar(this.id,e,t),a=this._engine.statesByElement.get(t);a||(dt(t,tr),dt(t,tr+"-"+e),this._engine.statesByElement.set(t,a=new Map));let m=a.get(e),h=new or(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&m&&h.absorbOptions(m.options),a.set(e,h),m||(m=Ca),!(h.value===rr)&&m.value===h.value){if(!X_(m.params,h.params)){let A=[],H=s.matchStyles(m.value,m.params,A),te=s.matchStyles(h.value,h.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{ln(t,H),yt(t,te)})}return}let M=qe(this._engine.playersByElement,t,[]);M.forEach(A=>{A.namespaceId==this.id&&A.triggerName==e&&A.queued&&A.destroy()});let S=s.matchTransition(m.value,h.value,t,h.params),T=!1;if(!S){if(!r)return;S=s.fallbackTransition,T=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:S,fromState:m,toState:h,player:o,isFallbackTransition:T}),T||(dt(t,Tu),o.onStart(()=>{fi(t,Tu)})),o.onDone(()=>{let A=this.players.indexOf(o);A>=0&&this.players.splice(A,1);let H=this._engine.playersByElement.get(t);if(H){let te=H.indexOf(o);te>=0&&H.splice(te,1)}}),this.players.push(o),M.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let n=this._engine.driver.query(t,nr,!0);n.forEach(r=>{if(r[Ct])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){let s=this._engine.statesByElement.get(t),o=new Map;if(s){let a=[];if(s.forEach((m,h)=>{if(o.set(h,m.value),this._triggers.has(h)){let f=this.trigger(t,h,rr,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&Bt(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){let r=new Set;e.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let m=this._triggers.get(o).fallbackTransition,h=n.get(o)||Ca,f=new or(rr),_=new ar(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:m,fromState:h,toState:f,player:_,isFallbackTransition:!0})})}}removeNode(t,e){let n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){let s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{let s=t[Ct];(!s||s===Nu)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){dt(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(n=>{let r=n.player;if(r.destroyed)return;let s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){let m=Ss(s,n.triggerName,n.fromState.value,n.toState.value);m._data=t,Cs(n.player,a.phase,m,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{let s=n.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Ia=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){let n=new Oa(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){let n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){let m=r.get(a);if(m){let h=n.indexOf(m);n.splice(h+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(t);this.namespacesByHostElement.delete(n.hostElement);let r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,n=this.statesByElement.get(t);if(n){for(let r of n.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}}return e}trigger(t,e,n,r){if(xs(e)){let s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!xs(e))return;let s=e[Ct];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){let o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),dt(t,ya)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),fi(t,ya))}removeNode(t,e,n){if(xs(e)){let r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n);let s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Ct]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return xs(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,nr,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Ts,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Bt(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Ct];if(e&&e.setForRemoval){if(t[Ct]=Nu,e.namespaceId){this.destroyInnerAnimations(t);let n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(ya)&&this.markElementAsDisabled(t,!1),this.driver.query(t,V_,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let r=this.collectedEnterElements[n];dt(r,z_)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let r=this.collectedLeaveElements[n];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],e.length?Bt(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw pu(t)}_flushAnimations(t,e){let n=new sr,r=[],s=new Map,o=[],a=new Map,m=new Map,h=new Map,f=new Set;this.disabledNodes.forEach(I=>{f.add(I);let F=this.driver.query(I,j_,!0);for(let $=0;$<F.length;$++)f.add(F[$])});let _=this.bodyNode,M=Array.from(this.statesByElement.keys()),S=Pu(M,this.collectedEnterElements),T=new Map,A=0;S.forEach((I,F)=>{let $=fa+A++;T.set(F,$),I.forEach(X=>dt(X,$))});let H=[],te=new Set,x=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){let F=this.collectedLeaveElements[I],$=F[Ct];$&&$.setForRemoval&&(H.push(F),te.add(F),$.hasAnimation?this.driver.query(F,q_,!0).forEach(X=>te.add(X)):x.add(F))}let me=new Map,ke=Pu(M,Array.from(te));ke.forEach((I,F)=>{let $=ws+A++;me.set(F,$),I.forEach(X=>dt(X,$))}),t.push(()=>{S.forEach((I,F)=>{let $=T.get(F);I.forEach(X=>fi(X,$))}),ke.forEach((I,F)=>{let $=me.get(F);I.forEach(X=>fi(X,$))}),H.forEach(I=>{this.processLeaveNode(I)})});let Fn=[],St=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(e).forEach($=>{let X=$.player,Te=$.element;if(Fn.push(X),this.collectedEnterElements.length){let Ae=Te[Ct];if(Ae&&Ae.setForMove){if(Ae.previousTriggersValues&&Ae.previousTriggersValues.has($.triggerName)){let pn=Ae.previousTriggersValues.get($.triggerName),it=this.statesByElement.get($.element);if(it&&it.has($.triggerName)){let ur=it.get($.triggerName);ur.value=pn,it.set($.triggerName,ur)}}X.destroy();return}}let Et=!_||!this.driver.containsElement(_,Te),We=me.get(Te),Ht=T.get(Te),de=this._buildInstruction($,n,Ht,We,Et);if(de.errors&&de.errors.length){St.push(de);return}if(Et){X.onStart(()=>ln(Te,de.fromStyles)),X.onDestroy(()=>yt(Te,de.toStyles)),r.push(X);return}if($.isFallbackTransition){X.onStart(()=>ln(Te,de.fromStyles)),X.onDestroy(()=>yt(Te,de.toStyles)),r.push(X);return}let za=[];de.timelines.forEach(Ae=>{Ae.stretchStartingKeyframe=!0,this.disabledNodes.has(Ae.element)||za.push(Ae)}),de.timelines=za,n.append(Te,de.timelines);let rm={instruction:de,player:X,element:Te};o.push(rm),de.queriedElements.forEach(Ae=>qe(a,Ae,[]).push(X)),de.preStyleProps.forEach((Ae,pn)=>{if(Ae.size){let it=m.get(pn);it||m.set(pn,it=new Set),Ae.forEach((ur,Bs)=>it.add(Bs))}}),de.postStyleProps.forEach((Ae,pn)=>{let it=h.get(pn);it||h.set(pn,it=new Set),Ae.forEach((ur,Bs)=>it.add(Bs))})});if(St.length){let I=[];St.forEach(F=>{I.push(hu(F.triggerName,F.errors))}),Fn.forEach(F=>F.destroy()),this.reportError(I)}let Oe=new Map,Ne=new Map;o.forEach(I=>{let F=I.element;n.has(F)&&(Ne.set(F,F),this._beforeAnimationBuild(I.player.namespaceId,I.instruction,Oe))}),r.forEach(I=>{let F=I.element;this._getPreviousPlayers(F,!1,I.namespaceId,I.triggerName,null).forEach(X=>{qe(Oe,F,[]).push(X),X.destroy()})});let un=H.filter(I=>Au(I,m,h)),Ln=new Map;ku(Ln,this.driver,x,h,vt).forEach(I=>{Au(I,m,h)&&un.push(I)});let mn=new Map;S.forEach((I,F)=>{ku(mn,this.driver,new Set(I),m,Ti)}),un.forEach(I=>{let F=Ln.get(I),$=mn.get(I);Ln.set(I,new Map([...F?.entries()??[],...$?.entries()??[]]))});let qs=[],ja=[],Va={};o.forEach(I=>{let{element:F,player:$,instruction:X}=I;if(n.has(F)){if(f.has(F)){$.onDestroy(()=>yt(F,X.toStyles)),$.disabled=!0,$.overrideTotalTime(X.totalTime),r.push($);return}let Te=Va;if(Ne.size>1){let We=F,Ht=[];for(;We=We.parentNode;){let de=Ne.get(We);if(de){Te=de;break}Ht.push(We)}Ht.forEach(de=>Ne.set(de,Te))}let Et=this._buildAnimation($.namespaceId,X,Oe,s,mn,Ln);if($.setRealPlayer(Et),Te===Va)qs.push($);else{let We=this.playersByElement.get(Te);We&&We.length&&($.parentPlayer=Bt(We)),r.push($)}}else ln(F,X.fromStyles),$.onDestroy(()=>yt(F,X.toStyles)),ja.push($),f.has(F)&&r.push($)}),ja.forEach(I=>{let F=s.get(I.element);if(F&&F.length){let $=Bt(F);I.setRealPlayer($)}}),r.forEach(I=>{I.parentPlayer?I.syncPlayerEvents(I.parentPlayer):I.destroy()});for(let I=0;I<H.length;I++){let F=H[I],$=F[Ct];if(fi(F,ws),$&&$.hasAnimation)continue;let X=[];if(a.size){let Et=a.get(F);Et&&Et.length&&X.push(...Et);let We=this.driver.query(F,Ts,!0);for(let Ht=0;Ht<We.length;Ht++){let de=a.get(We[Ht]);de&&de.length&&X.push(...de)}}let Te=X.filter(Et=>!Et.destroyed);Te.length?Q_(this,F,Te):this.processLeaveNode(F)}return H.length=0,qs.forEach(I=>{this.players.push(I),I.onDone(()=>{I.destroy();let F=this.players.indexOf(I);this.players.splice(F,1)}),I.play()}),qs}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(o=a)}else{let a=this.playersByElement.get(t);if(a){let m=!s||s==rr;a.forEach(h=>{h.queued||!m&&h.triggerName!=r||o.push(h)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){let r=e.triggerName,s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:r;for(let m of e.timelines){let h=m.element,f=h!==s,_=qe(n,h,[]);this._getPreviousPlayers(h,f,o,a,e.toState).forEach(S=>{let T=S.getRealPlayer();T.beforeDestroy&&T.beforeDestroy(),S.destroy(),_.push(S)})}ln(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){let a=e.triggerName,m=e.element,h=[],f=new Set,_=new Set,M=e.timelines.map(T=>{let A=T.element;f.add(A);let H=A[Ct];if(H&&H.removedBeforeQueried)return new _n(T.duration,T.delay);let te=A!==m,x=Y_((n.get(A)||B_).map(Oe=>Oe.getRealPlayer())).filter(Oe=>{let Ne=Oe;return Ne.element?Ne.element===A:!1}),me=s.get(A),ke=o.get(A),Fn=da(this._normalizer,T.keyframes,me,ke),St=this._buildPlayer(T,Fn,x);if(T.subTimeline&&r&&_.add(A),te){let Oe=new ar(t,a,A);Oe.setRealPlayer(St),h.push(Oe)}return St});h.forEach(T=>{qe(this.playersByQueriedElement,T.element,[]).push(T),T.onDone(()=>W_(this.playersByQueriedElement,T.element,T))}),f.forEach(T=>dt(T,ga));let S=Bt(M);return S.onDestroy(()=>{f.forEach(T=>fi(T,ga)),yt(m,e.toStyles)}),_.forEach(T=>{qe(r,T,[]).push(S)}),S}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new _n(t.duration,t.delay)}},ar=class{namespaceId;triggerName;element;_player=new _n;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>Cs(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){qe(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function W_(i,t,e){let n=i.get(t);if(n){if(n.length){let r=n.indexOf(e);n.splice(r,1)}n.length==0&&i.delete(t)}return n}function K_(i){return i??null}function xs(i){return i&&i.nodeType===1}function G_(i){return i=="start"||i=="done"}function Mu(i,t){let e=i.style.display;return i.style.display=t??"none",e}function ku(i,t,e,n,r){let s=[];e.forEach(m=>s.push(Mu(m)));let o=[];n.forEach((m,h)=>{let f=new Map;m.forEach(_=>{let M=t.computeStyle(h,_,r);f.set(_,M),(!M||M.length==0)&&(h[Ct]=H_,o.push(h))}),i.set(h,f)});let a=0;return e.forEach(m=>Mu(m,s[a++])),o}function Pu(i,t){let e=new Map;if(i.forEach(a=>e.set(a,[])),t.length==0)return e;let n=1,r=new Set(t),s=new Map;function o(a){if(!a)return n;let m=s.get(a);if(m)return m;let h=a.parentNode;return e.has(h)?m=h:r.has(h)?m=n:m=o(h),s.set(a,m),m}return t.forEach(a=>{let m=o(a);m!==n&&e.get(m).push(a)}),e}function dt(i,t){i.classList?.add(t)}function fi(i,t){i.classList?.remove(t)}function Q_(i,t,e){Bt(e).onDone(()=>i.processLeaveNode(t))}function Y_(i){let t=[];return Ru(i,t),t}function Ru(i,t){for(let e=0;e<i.length;e++){let n=i[e];n instanceof Mr?Ru(n.players,t):t.push(n)}}function X_(i,t){let e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}function Au(i,t,e){let n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}var gi=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,n){this._driver=e,this._normalizer=n,this._transitionEngine=new Ia(t.body,e,n),this._timelineEngine=new xa(t.body,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){let o=t+"-"+r,a=this._triggerCache[o];if(!a){let m=[],h=[],f=Ou(this._driver,s,m,h);if(m.length)throw ru(r,m);a=L_(r,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if(n.charAt(0)=="@"){let[s,o]=ua(n),a=r;this._timelineEngine.command(s,e,o,a)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if(n.charAt(0)=="@"){let[o,a]=ua(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function Z_(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=Sa(t[0]),t.length>1&&(n=Sa(t[t.length-1]))):t instanceof Map&&(e=Sa(t)),e||n?new J_(i,e,n):null}var J_=(()=>{class i{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&yt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(yt(this._element,this._initialStyles),this._endStyles&&(yt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ln(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ln(this._element,this._endStyles),this._endStyles=null),yt(this._element,this._initialStyles),this._state=3)}}return i})();function Sa(i){let t=null;return i.forEach((e,n)=>{ev(n)&&(t=t||new Map,t.set(n,e))}),t}function ev(i){return i==="display"||i==="position"}var Ls=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{r!=="offset"&&t.set(r,this._finished?n:ks(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},Us=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return ma(t,e)}getParentElement(t){return Es(t)}query(t,e,n){return pa(t,e,n)}computeStyle(t,e,n){return ks(t,e)}animate(t,e,n,r,s,o=[]){let a=r==0?"both":"forwards",m={duration:n,delay:r,fill:a};s&&(m.easing=s);let h=new Map,f=o.filter(S=>S instanceof Ls);vu(n,r)&&f.forEach(S=>{S.currentSnapshot.forEach((T,A)=>h.set(A,T))});let _=gu(e).map(S=>new Map(S));_=bu(t,_,h);let M=Z_(t,_);return new Ls(t,_,m,M)}};var Os="@",Fu="@.disabled",$s=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Os&&e==Fu?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,r){return this.delegate.listen(t,e,n,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},Da=class extends $s{factory;constructor(t,e,n,r,s){super(e,n,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Os?e.charAt(1)=="."&&e==Fu?(n=n===void 0?!0:!!n,this.disableAnimations(t,n)):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n,r){if(e.charAt(0)==Os){let s=tv(t),o=e.slice(1),a="";return o.charAt(0)!=Os&&([o,a]=nv(o)),this.engine.listen(this.namespaceId,s,o,a,m=>{let h=m._data||-1;this.factory.scheduleListenerCallback(h,n,m)})}return this.delegate.listen(t,e,n,r)}};function tv(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function nv(i){let t=i.indexOf("."),e=i.substring(0,t),n=i.slice(t+1);return[e,n]}var js=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,e.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(t,e){let n="",r=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let h=this._rendererCache,f=h.get(r);if(!f){let _=()=>h.delete(r);f=new $s(n,r,this.engine,_),h.set(r,f)}return f}let s=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,t);let a=h=>{Array.isArray(h)?h.forEach(a):this.engine.registerTrigger(s,o,t,h.name,h)};return e.data.animation.forEach(a),new Da(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(n));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var rv=(()=>{class i extends gi{constructor(e,n,r){super(e,n,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||i)(K(wr),K(Dn),K(Nn))};static \u0275prov=B({token:i,factory:i.\u0275fac})}return i})();function sv(){return new Is}function ov(i,t,e){return new js(i,t,e)}var Lu=[{provide:Nn,useFactory:sv},{provide:gi,useClass:rv},{provide:al,useFactory:ov,deps:[Ml,gi,jn]}],EC=[{provide:Dn,useClass:Na},{provide:to,useValue:"NoopAnimations"},...Lu],av=[{provide:Dn,useFactory:()=>new Us},{provide:to,useFactory:()=>"BrowserAnimations"},...Lu];function Uu(){return hr("NgEagerAnimations"),[...av]}var $u=i=>({"is-invalid":i});function lv(i,t){if(i&1&&(c(0,"div",19),d(1),l()),i&2){let e=y();u(),D(e.error)}}function cv(i,t){i&1&&(c(0,"div"),d(1,"Email is required"),l())}function dv(i,t){i&1&&(c(0,"div"),d(1,"Email is invalid"),l())}function uv(i,t){if(i&1&&(c(0,"div",20),g(1,cv,2,0,"div",18)(2,dv,2,0,"div",18),l()),i&2){let e=y();u(),p("ngIf",e.f.email.errors.required),u(),p("ngIf",e.f.email.errors.email)}}function mv(i,t){i&1&&(c(0,"div"),d(1,"Password is required"),l())}function pv(i,t){if(i&1&&(c(0,"div",20),g(1,mv,2,0,"div",18),l()),i&2){let e=y();u(),p("ngIf",e.f.password.errors.required)}}function hv(i,t){i&1&&b(0,"span",21)}function fv(i,t){i&1&&(c(0,"span"),d(1,"Login"),l())}var ju=(()=>{class i{constructor(e,n,r,s){this.formBuilder=e,this.route=n,this.router=r,this.authService=s,this.loading=!1,this.submitted=!1,this.returnUrl="/dashboard",this.error="",this.authService.currentUserValue&&this.router.navigate([this.returnUrl])}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[O.required,O.email]],password:["",O.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard"}get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,!this.loginForm.invalid&&(this.loading=!0,this.error="",this.authService.login(this.f.email.value,this.f.password.value).subscribe({next:e=>{this.router.navigateByUrl(this.returnUrl)},error:e=>{this.error=e.message||"Login failed. Please check your credentials.",this.loading=!1}}))}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(De),E(Y),E(ae))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-login"]],decls:26,vars:13,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-4"],[1,"card","mt-5"],[1,"card-body"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"form-group","mb-3"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["for","password"],["routerLink","/forgot-password",1,"text-decoration-none","small"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6,"Login"),l(),c(7,"form",6),w("ngSubmit",function(){return r.onSubmit()}),g(8,lv,2,1,"div",7),c(9,"div",8)(10,"label",9),d(11,"Email"),l(),b(12,"input",10),g(13,uv,3,2,"div",11),l(),c(14,"div",8)(15,"div",12)(16,"label",13),d(17,"Password"),l(),c(18,"a",14),d(19,"Forgot Password?"),l()(),b(20,"input",15),g(21,pv,2,1,"div",11),l(),c(22,"div",8)(23,"button",16),g(24,hv,1,0,"span",17)(25,fv,2,0,"span",18),l()()()()()()()()),n&2&&(u(7),p("formGroup",r.loginForm),u(),p("ngIf",r.error),u(4),p("ngClass",pe(9,$u,r.submitted&&r.f.email.errors)),u(),p("ngIf",r.submitted&&r.f.email.errors),u(7),p("ngClass",pe(11,$u,r.submitted&&r.f.password.errors)),u(),p("ngIf",r.submitted&&r.f.password.errors),u(2),p("disabled",r.loading),u(),p("ngIf",r.loading),u(),p("ngIf",!r.loading))},dependencies:[ne,rt,oe,je,ge,he,ue,fe,be,_e,xe,we,ot],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a90e2;box-shadow:0 0 0 2px #4a90e233}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#4a90e2;color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:background-color .3s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#3a7bc8}.error-message[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#f8d7da;color:#721c24;border-radius:4px;text-align:center}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}}"]})}}return i})();var He=(()=>{class i{constructor(e,n){this.http=e,this.authService=n,this.apiUrl="http://localhost:3000/api/users"}getAuthHeaders(){let e=localStorage.getItem("token");return new Ue({"Content-Type":"application/json",Authorization:`Bearer ${e}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","If-Modified-Since":new Date().toUTCString()})}getCurrentUser(){let e=this.authService.currentUserValue,n=e?.user?.id||e?.id;return n?this.http.get(`${this.apiUrl}/get/user/${n}`,{headers:this.getAuthHeaders(),params:{t:Date.now().toString()}}).pipe(V(r=>{let s=r.success?r.data:r;if(s.notification_preferences&&typeof s.notification_preferences=="string")try{s.notification_preferences=JSON.parse(s.notification_preferences)}catch(o){console.error("Error parsing notification_preferences:",o),s.notification_preferences=this.getDefaultPreferences()}else s.notification_preferences||(s.notification_preferences=this.getDefaultPreferences());return s}),U(r=>(console.error("Error fetching current user:",r),N({notification_preferences:this.getDefaultPreferences()})))):N(null)}getDefaultPreferences(){return{email:{enabled:!0,taskReminders:!0,dueDateAlerts:!0,statusUpdates:!0},in_app:{enabled:!0,taskReminders:!0,mentions:!0,statusUpdates:!0},push:{enabled:!1,taskReminders:!1,mentions:!1}}}updateNotificationPreferences(e){console.log("Current User:",this.authService.currentUserValue),console.log("Token exists:",!!this.authService.getToken()),console.log("Token value:",this.authService.getToken());let n=this.authService.currentUserValue;console.log("Current user object:",JSON.stringify(n,null,2));let r=n?.user?.id||n?.id;if(console.log("Extracted user ID:",r),!r)return console.error("No user ID found in:",n),ce(()=>new Error("No user is logged in"));let s=this.authService.getToken();if(!s)return ce(()=>new Error("No authentication token found"));let o=new Ue({"Content-Type":"application/json",Authorization:`Bearer ${s}`});return console.log("Sending request to:",`${this.apiUrl}/update/user/${r}/preferences`),this.http.put(`${this.apiUrl}/update/user/${r}/preferences`,{notification_preferences:e},{headers:o}).pipe(V(a=>{if(a.success&&a.data){let m=W(C({},n),{notification_preferences:a.data.notification_preferences});return localStorage.setItem("currentUser",JSON.stringify(m)),this.authService.currentUserSubject.next(m),a}return a}),U(a=>(console.error("Error updating preferences:",a),ce(a))))}getHeaders(){let e=localStorage.getItem("token");return!e&&this.authService&&typeof this.authService.getToken=="function"&&(e=this.authService.getToken()),e?new Ue({"Content-Type":"application/json",Authorization:`Bearer ${e}`}):(console.error("No authentication token found"),new Ue({"Content-Type":"application/json"}))}handleError(e){console.error("API Error:",{status:e.status,statusText:e.statusText,error:e.error,url:e.url});let n="Something went wrong; please try again later.";return e.status===0?n="Unable to connect to the server. Please check your internet connection.":e.status===401?n="Authentication required. Please log in again.":e.status===403?n="You do not have permission to access this resource.":e.status===404?n="The requested resource was not found.":e.error?.message&&(n=e.error.message),ce(()=>new Error(n))}getUsers(){return this.http.get(`${this.apiUrl}/get/users`,{headers:this.getAuthHeaders(),params:{t:Date.now().toString()}}).pipe(V(e=>e.data||e),U(this.handleError))}getUsersByRole(e){return this.http.get(`${this.apiUrl}/get/users?role=${e}`,{headers:this.getAuthHeaders(),params:{t:Date.now().toString()}}).pipe(V(n=>n.data||n),U(this.handleError))}getUserById(e){return this.http.get(`${this.apiUrl}/get/user/${e}`,{headers:this.getAuthHeaders(),params:{t:Date.now().toString()}}).pipe(V(n=>n.success?n.data:n),U(this.handleError))}updateUser(e,n){let r={username:n.username,email:n.email,role:n.role,department:n.department,status:n.status};return Object.keys(r).forEach(s=>r[s]===void 0&&delete r[s]),console.log("Sending clean update request:",r),this.http.put(`${this.apiUrl}/update/user/${e}`,r,{headers:this.getHeaders()}).pipe(U(s=>(console.error("Error in updateUser:",s),ce(()=>s))))}createUser(e){console.log("Creating user with data:",e);let n=this.getHeaders();return console.log("Request headers:",n),this.http.post(`${this.apiUrl}/create/user`,e,{headers:n}).pipe(Z(r=>console.log("User created:",r)),U(r=>(console.error("Error creating user:",{status:r.status,statusText:r.statusText,error:r.error,headers:r.headers}),ce(()=>new Error("Failed to create user. Please check your credentials and try again.")))))}deleteUser(e){return this.http.delete(`${this.apiUrl}/delete/user/${e}`,{headers:this.getHeaders()}).pipe(U(this.handleError))}static{this.\u0275fac=function(n){return new(n||i)(K($e),K(ae))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Vu=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${Mi.apiUrl}/api/notifications`,this.wsUrl=Mi.wsUrl||"ws://localhost:3000",this.notifications$=new Pe([]),this.unreadCount$=new Pe(0)}connectWebSocket(){try{this.ws=new WebSocket(this.wsUrl),this.ws.onopen=()=>{console.log("WebSocket connected")},this.ws.onmessage=e=>{let n=JSON.parse(e.data);n.type==="notification"&&this.handleNewNotification(n.payload)},this.ws.onerror=e=>{console.error("WebSocket error:",e)},this.ws.onclose=()=>{console.log("WebSocket disconnected. Attempting to reconnect..."),setTimeout(()=>this.connectWebSocket(),5e3)}}catch(e){console.error("Error connecting to WebSocket:",e)}}handleNewNotification(e){let n=this.notifications$.value;this.notifications$.next([e,...n]),e.status==="unread"&&this.unreadCount$.next(this.unreadCount$.value+1),Notification.permission==="granted"&&e.type==="push"&&this.showBrowserNotification(e)}showBrowserNotification(e){let n={body:e.message,icon:"/assets/logo.png",data:{url:this.getNotificationUrl(e)}},r=new Notification(e.title,n);r.onclick=s=>{s.preventDefault(),window.focus(),r.data?.url&&window.open(r.data.url,"_blank"),r.close()}}getNotificationUrl(e){if(!(!e.relatedEntity||!e.relatedEntityId))switch(e.relatedEntity.toLowerCase()){case"task":return`/tasks/${e.relatedEntityId}`;case"project":return`/projects/${e.relatedEntityId}`;default:return}}getUserNotifications(e,n){return this.http.get(`${this.apiUrl}/get/notifications/user/${e}`,{params:n}).pipe(Z(r=>{this.notifications$.next(r.data),this.updateUnreadCount(r.data)}),U(r=>(console.error("Error fetching notifications:",r),N({data:[],total:0}))))}markAsRead(e){return this.http.patch(`${this.apiUrl}/mark-as-read/${e}`,{}).pipe(Z(()=>{let n=this.notifications$.value.map(r=>r.id===e?W(C({},r),{status:"read"}):r);this.notifications$.next(n),this.updateUnreadCount(n)}))}markAllAsRead(e){return this.http.patch(`${this.apiUrl}/mark-all-read`,{userId:e}).pipe(Z(()=>{let n=this.notifications$.value.map(r=>W(C({},r),{status:"read"}));this.notifications$.next(n),this.unreadCount$.next(0)}))}deleteNotification(e){return this.http.delete(`${this.apiUrl}/delete/notification/${e}`).pipe(Z(()=>{let n=this.notifications$.value.filter(r=>r.id!==e);this.notifications$.next(n),this.updateUnreadCount(n)}))}getNotifications(){return this.notifications$.asObservable()}getUnreadCount(){return this.unreadCount$.asObservable()}requestNotificationPermission(){"Notification"in window&&Notification.requestPermission().then(e=>{console.log("Notification permission:",e)})}updateUnreadCount(e){let n=e.filter(r=>r.status==="unread").length;this.unreadCount$.next(n)}showSuccess(e){this.toastr?this.toastr.success(e,"Success"):console.log("Success:",e)}showError(e){this.toastr?this.toastr.error(e,"Error"):console.error("Error:",e)}requestPushPermission(){return le(this,null,function*(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?(this.toastr.warning("Please enable notifications in your browser settings"),!1):(yield Notification.requestPermission())==="granted":!1})}ngOnDestroy(){this.ws&&this.ws.close()}sendTaskUpdateEmail(e,n,r){return le(this,null,function*(){try{let s=yield this.userService.getUserById(e),o=s.notification_preferences||{};if(!o.email?.enabled||!o.email?.taskUpdates)return{success:!0,notificationSent:!1};let a=r?`${r.firstName} ${r.lastName}`.trim():"A team member",m=`
        <div>
          <p>Hello ${s.firstName},</p>
          <p>${a} has updated the task: <strong>${n.title}</strong></p>
          <!-- Add more task details here -->
        </div>
      `;return yield this.emailService.sendEmail({to:s.email,subject:`Task Updated: ${n.title}`,html:m}),{success:!0,notificationSent:!0}}catch(s){return console.error("Error sending task update email:",s),{success:!1,error:s instanceof Error?s.message:"An unknown error occurred"}}})}static{this.\u0275fac=function(n){return new(n||i)(K($e))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function _v(i,t){i&1&&b(0,"span",44)}function vv(i,t){if(i&1){let e=Q();c(0,"form",7),w("ngSubmit",function(){k(e);let r=y();return P(r.saveSettings())}),c(1,"div",8)(2,"div",9)(3,"div")(4,"h5"),b(5,"i",10),d(6," Email Notifications"),l(),c(7,"p",11),d(8,"Receive notifications via email"),l()(),c(9,"div",12)(10,"input",13),w("change",function(){k(e);let r=y();return P(r.onPreferenceChange("email"))}),l(),b(11,"label",14),l()(),c(12,"div",15)(13,"div",16),b(14,"input",17),c(15,"label",18),d(16,"Task reminders"),l()(),c(17,"div",16),b(18,"input",19),c(19,"label",20),d(20,"Due date alerts"),l()(),c(21,"div",21),b(22,"input",22),c(23,"label",23),d(24,"Status updates"),l()()()(),c(25,"div",8)(26,"div",9)(27,"div")(28,"h5"),b(29,"i",24),d(30," In-App Notifications"),l(),c(31,"p",11),d(32,"Receive notifications within the application"),l()(),c(33,"div",12)(34,"input",25),w("change",function(){k(e);let r=y();return P(r.onPreferenceChange("in_app"))}),l(),b(35,"label",26),l()(),c(36,"div",15)(37,"div",16),b(38,"input",27),c(39,"label",28),d(40,"Task reminders"),l()(),c(41,"div",16),b(42,"input",29),c(43,"label",30),d(44,"Mentions"),l()(),c(45,"div",21),b(46,"input",31),c(47,"label",32),d(48,"Status updates"),l()()()(),c(49,"div",8)(50,"div",9)(51,"div")(52,"h5"),b(53,"i",33),d(54," Push Notifications"),l(),c(55,"p",11),d(56,"Receive push notifications on your device"),l()(),c(57,"div",12)(58,"input",34),w("change",function(){k(e);let r=y();return P(r.onPushNotificationChange())}),l(),b(59,"label",35),l()(),c(60,"div",15)(61,"div",16),b(62,"input",36),c(63,"label",37),d(64,"Task reminders"),l()(),c(65,"div",21),b(66,"input",38),c(67,"label",39),d(68,"Mentions"),l()()()(),c(69,"div",40)(70,"button",41),w("click",function(){k(e);let r=y();return P(r.dismissModal())}),d(71," Cancel "),l(),c(72,"button",42),g(73,_v,1,0,"span",43),d(74),l()()()}if(i&2){let e,n,r,s,o=y();p("formGroup",o.settingsForm),u(10),p("formControl",o.emailGroup.get("enabled")),u(2),re("text-muted",!((e=o.emailGroup.get("enabled"))!=null&&e.value)),u(2),p("formControl",o.emailGroup.get("taskReminders")),u(4),p("formControl",o.emailGroup.get("dueDateAlerts")),u(4),p("formControl",o.emailStatusUpdates)("disabled",!(!((n=o.settingsForm.get("email"))==null||(n=n.get("enabled"))==null)&&n.value)),u(12),p("formControl",o.inAppEnabled),u(2),re("text-muted",!(!((r=o.settingsForm.get("in_app"))==null||(r=r.get("enabled"))==null)&&r.value)),u(2),p("formControl",o.inAppTaskReminders),u(4),p("formControl",o.inAppMentions),u(4),p("formControl",o.inAppStatusUpdates),u(12),p("formControl",o.pushEnabled),u(2),re("text-muted",!(!((s=o.settingsForm.get("push"))==null||(s=s.get("enabled"))==null)&&s.value)),u(2),p("formControl",o.pushTaskReminders),u(4),p("formControl",o.pushMentions),u(6),p("disabled",o.isSaving||!o.settingsForm.dirty),u(),p("ngIf",o.isSaving),u(),R(" ",o.isSaving?"Saving...":"Save Changes"," ")}}var zu=(()=>{class i{constructor(e,n,r,s){this.fb=e,this.userService=n,this.notificationService=r,this.modalService=s,this.destroy$=new mt,this.isLoading=!0,this.isSaving=!1,this.defaultPreferences={email:{enabled:!0,taskReminders:!0,dueDateAlerts:!0,statusUpdates:!0},in_app:{enabled:!0,taskReminders:!0,mentions:!0,statusUpdates:!0},push:{enabled:!1,taskReminders:!1,mentions:!1}},this.settingsForm=this.createForm()}ngOnInit(){this.loadUserPreferences()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUserPreferences(){this.isLoading=!0,this.settingsForm=this.createForm(),this.userService.getCurrentUser().pipe(fn(this.destroy$)).subscribe({next:e=>{e?.notification_preferences?(console.log("Loading user preferences:",e.notification_preferences),this.settingsForm.patchValue({email:e.notification_preferences.email||this.defaultPreferences.email,in_app:e.notification_preferences.in_app||this.defaultPreferences.in_app,push:e.notification_preferences.push||this.defaultPreferences.push},{emitEvent:!1})):console.log("No saved preferences found, using defaults"),this.isLoading=!1},error:e=>{console.error("Error loading user preferences:",e),this.isLoading=!1}})}get emailEnabled(){return this.emailGroup?.get("enabled")||new st(!0)}get emailTaskReminders(){return this.emailGroup?.get("taskReminders")||new st(!0)}get emailDueDateAlerts(){return this.emailGroup?.get("dueDateAlerts")||new st(!0)}get emailStatusUpdates(){return this.emailGroup?.get("statusUpdates")||new st(!0)}get inAppEnabled(){return this.settingsForm?.get("in_app.enabled")||new st(!0)}get inAppTaskReminders(){return this.settingsForm?.get("in_app.taskReminders")||new st(!0)}get inAppMentions(){return this.settingsForm?.get("in_app.mentions")||new st(!0)}get inAppStatusUpdates(){return this.settingsForm?.get("in_app.statusUpdates")||new st(!0)}get pushEnabled(){return this.settingsForm?.get("push.enabled")||new st(!1)}get pushTaskReminders(){return this.settingsForm?.get("push.taskReminders")||new st(!1)}get pushMentions(){return this.settingsForm?.get("push.mentions")||new st(!1)}createForm(){let e=this.fb.group({email:this.fb.group({enabled:[!0],taskReminders:[{value:!0,disabled:!1}],dueDateAlerts:[{value:!0,disabled:!1}],statusUpdates:[{value:!0,disabled:!1}]}),in_app:this.fb.group({enabled:[!0],taskReminders:[{value:!0,disabled:!1}],mentions:[{value:!0,disabled:!1}],statusUpdates:[{value:!0,disabled:!1}]}),push:this.fb.group({enabled:[!1],taskReminders:[{value:!1,disabled:!1}],mentions:[{value:!1,disabled:!1}]})});return this.emailGroup=e.get("email"),this.setupFormValueChanges(e),e}shouldSendEmailNotification(e){let n=this.settingsForm.get("email.enabled")?.value,r=this.settingsForm.get("email.statusUpdates")?.value;return!(!n||e==="status_update"&&!r)}sendNotification(e,n){this.shouldSendEmailNotification(e)?console.log("Sending email notification:",e,n):console.log("Email notification skipped - status updates disabled or email notifications off")}setupFormValueChanges(e){let n=e.get("email");n.get("enabled")?.valueChanges.subscribe(o=>{let a=["taskReminders","dueDateAlerts","statusUpdates"];this.toggleControlsState(n,a,o)});let r=e.get("in_app");r.get("enabled")?.valueChanges.subscribe(o=>{let a=["taskReminders","mentions","statusUpdates"];this.toggleControlsState(r,a,o)});let s=e.get("push");s.get("enabled")?.valueChanges.subscribe(o=>{let a=["taskReminders","mentions"];this.toggleControlsState(s,a,o)})}toggleControlsState(e,n,r){n.forEach(s=>{let o=e.get(s);o&&(r?o.enable():o.disable())})}onPreferenceChange(e){let n=this.settingsForm.get(e);if(n){let r=n.get("enabled")?.value;Object.keys(n.controls).forEach(s=>{if(s!=="enabled"){let o=n.get(s);o&&(r?o.enable():o.disable())}})}}onPushNotificationChange(){let e=this.settingsForm.get("push");if(e){let n=e.get("enabled")?.value;if(n&&!("Notification"in window)){alert("Push notifications are not supported in your browser"),e.get("enabled")?.setValue(!1);return}if(n&&Notification.permission!=="granted"){Notification.requestPermission().then(r=>{r!=="granted"&&e.get("enabled")?.setValue(!1)});return}Object.keys(e.controls).forEach(r=>{if(r!=="enabled"){let s=e.get(r);s&&(n?s.enable():s.disable())}})}}saveSettings(){if(this.settingsForm.invalid||this.isSaving)return;this.isSaving=!0;let e=this.settingsForm.getRawValue();e.email.enabled||(e.email.statusUpdates=!1),this.userService.updateNotificationPreferences(e).pipe(fn(this.destroy$)).subscribe({next:n=>{this.isSaving=!1,this.notificationService.showSuccess("Notification preferences saved successfully"),this.modalService.dismissAll()},error:n=>{console.error("Error saving settings:",n),this.isSaving=!1;let r=n?.error?.message||n?.message||"Failed to save preferences";this.notificationService.showError(r)}})}dismissModal(){this.modalService.hasOpenModals()&&this.modalService.dismissAll("Preferences saved")}onPushToggleChange(e){e&&this.notificationService.requestNotificationPermission()}onSubmit(){if(this.settingsForm.invalid||this.isSaving)return;this.isSaving=!0;let e=this.settingsForm.value;this.userService.updateNotificationPreferences(e).pipe(fn(this.destroy$)).subscribe({next:()=>{this.isSaving=!1},error:n=>{console.error("Error saving notification preferences:",n),this.isSaving=!1}})}sendTestNotification(e){this.isTesting=!0,this.notificationService.sendTestNotification(e).pipe(fn(this.destroy$)).subscribe({next:()=>{this.isTesting=!1},error:n=>{console.error(`Error sending test notification for ${e}:`,n),this.isTesting=!1}})}sendTestNotificationRequest(e){this.notificationService.sendTestNotification(e).subscribe({next:()=>{this.isTesting=!1},error:n=>{console.error("Error sending test notification:",n),this.isTesting=!1}})}requestPushPermission(){return le(this,null,function*(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:(yield Notification.requestPermission())==="granted":!1})}resetToDefaults(){confirm("Are you sure you want to reset to default notification settings?")&&this.settingsForm.patchValue(this.defaultPreferences)}onCancel(){this.activeModal.dismiss("cancel")}checkPushNotificationSupport(){if("Notification"in window)Notification.requestPermission().then(e=>{e==="denied"&&this.settingsForm.get("push").get("enabled")?.disable()});else{let e=this.settingsForm.get("push");e.disable(),e.get("enabled")?.setValue(!1)}}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(He),E(Vu),E(At))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-notification-settings"]],decls:9,vars:1,consts:[[1,"notification-settings"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-subtitle"],[1,"card-body"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"notification-type"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fas","fa-envelope","me-2"],[1,"text-muted","mb-0"],[1,"form-check","form-switch"],["type","checkbox","id","emailEnabled",1,"form-check-input",3,"change","formControl"],["for","emailEnabled",1,"form-check-label"],[1,"ps-4"],[1,"form-check","mb-2"],["type","checkbox","id","emailTaskReminders",1,"form-check-input",3,"formControl"],["for","emailTaskReminders",1,"form-check-label"],["type","checkbox","id","emailDueDateAlerts",1,"form-check-input",3,"formControl"],["for","emailDueDateAlerts",1,"form-check-label"],[1,"form-check"],["type","checkbox","id","emailStatusUpdates",1,"form-check-input",3,"formControl","disabled"],["for","emailStatusUpdates",1,"form-check-label"],[1,"fas","fa-bell","me-2"],["type","checkbox","id","inAppEnabled",1,"form-check-input",3,"change","formControl"],["for","inAppEnabled",1,"form-check-label"],["type","checkbox","id","inAppTaskReminders",1,"form-check-input",3,"formControl"],["for","inAppTaskReminders",1,"form-check-label"],["type","checkbox","id","inAppMentions",1,"form-check-input",3,"formControl"],["for","inAppMentions",1,"form-check-label"],["type","checkbox","id","inAppStatusUpdates",1,"form-check-input",3,"formControl"],["for","inAppStatusUpdates",1,"form-check-label"],[1,"fas","fa-mobile-alt","me-2"],["type","checkbox","id","pushEnabled",1,"form-check-input",3,"change","formControl"],["for","pushEnabled",1,"form-check-label"],["type","checkbox","id","pushTaskReminders",1,"form-check-input",3,"formControl"],["for","pushTaskReminders",1,"form-check-label"],["type","checkbox","id","pushMentions",1,"form-check-input",3,"formControl"],["for","pushMentions",1,"form-check-label"],[1,"d-flex","justify-content-end","mt-4"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),d(4,"Notification Settings"),l(),c(5,"p",4),d(6,"Customize how you receive notifications"),l()(),c(7,"div",5),g(8,vv,75,22,"form",6),l()()()),n&2&&(u(8),p("ngIf",r.settingsForm))},dependencies:[ne,oe,be,ge,Nl,ue,fe,Ll,_e,je],styles:[`.notification-settings[_ngcontent-%COMP%]{padding:1.5rem}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013;border-radius:.5rem;overflow:hidden}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.125);padding:1.25rem 1.5rem}.card-title[_ngcontent-%COMP%]{margin-bottom:.25rem;font-weight:600}.card-subtitle[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:0}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.notification-type[_ngcontent-%COMP%]{margin-bottom:1.5rem}.notification-type[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.25rem;display:flex;align-items:center}.notification-type[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#6c757d}.notification-type[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#0d6efd;border-color:#0d6efd}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:2.5em;margin-left:-2.5em;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%28(255,255,255,0.25)'/%3e%3c/svg%3e")}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%2386b7fe'/%3e%3c/svg%3e")}.text-muted[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%], .text-muted[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:disabled + .form-check-label[_ngcontent-%COMP%]{color:#6c757d!important;cursor:not-allowed}.spinner-border[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]{padding:1rem}.notification-settings[_ngcontent-%COMP%]{padding:1rem .5rem}}.form-check-input[_ngcontent-%COMP%]{transition:background-color .2s ease-in-out,border-color .2s ease-in-out}.form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #0d6efd26;border-color:#86b7fe}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#dee2e6}.btn-primary[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b5ed7;border-color:#0a58ca}.btn[_ngcontent-%COMP%]:disabled, .btn.disabled[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]:disabled   .btn[_ngcontent-%COMP%]{opacity:.65;pointer-events:none}.test-notification-section[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f8f9fa;border-radius:.5rem;margin-top:2rem;border:1px dashed #dee2e6}.test-notification-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#495057;margin-bottom:.75rem}.opacity-50[_ngcontent-%COMP%]{opacity:.5;transition:opacity .2s ease}.spinner-border[_ngcontent-%COMP%]{vertical-align:-.125em}.alert[_ngcontent-%COMP%]{border:none;border-radius:.375rem;padding:.75rem 1rem}.alert-info[_ngcontent-%COMP%]{background-color:#e7f5ff;color:#0a58ca}.bi[_ngcontent-%COMP%]{font-size:1.1em;vertical-align:-.1em}.form-check-label[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.65}`]})}}return i})();var _i=(()=>{class i{uploadTaskAttachments(e,n){let r=localStorage.getItem("token"),s=new Ue({Authorization:`Bearer ${r}`});return this.http.post(`${this.apiUrl}/get/task/${e}/attachments`,n,{headers:s}).pipe(U(o=>(console.error("Upload error:",{status:o.status,message:o.message,error:o.error}),ce(()=>new Error("Failed to upload files")))))}deleteAttachment(e){throw new Error("Method not implemented.")}getTaskAttachments(e){return this.http.get(`${this.apiUrl}/get/task/${e}/attachments`).pipe(V(n=>n.data||[]))}downloadFile(e){return this.http.get(`${this.apiUrl}/get/task-attachments/${e}/download`,{responseType:"blob"}).pipe(U(this.handleError))}notifyTaskUpdate(e){throw new Error("Method not implemented.")}getTaskById(e){return this.http.get(`${this.apiUrl}/get/task/${e}`).pipe(V(n=>n.success&&n.data?W(C({},n.data),{total_time:n.data.total_time||0,last_time_tracked:n.data.last_time_tracked||null,comments:n.data.comments||[]}):n))}getTaskCounts(){let e=this.getHeaders().set("Cache-Control","no-cache, no-store, must-revalidate").set("Pragma","no-cache").set("Expires","0").set("If-Modified-Since",new Date().toUTCString());return this.http.get(`${this.apiUrl}/get/counts`,{headers:e,params:new _t().set("t",Date.now().toString())}).pipe(V(n=>n?.data||{pending:0,in_progress:0,completed:0}),U(n=>(console.error("Error fetching task counts:",n),N({pending:0,in_progress:0,completed:0}))))}getTasksByUser(e){return this.http.get(`${this.apiUrl}/get/tasks/user/${e}`,{headers:this.getHeaders()}).pipe(V(n=>n.data||[]),U(this.handleError))}constructor(e){this.http=e,this.apiUrl="http://localhost:3000/api/tasks",this.cache=new Map,this.CACHE_DURATION=5*60*1e3}getHeaders(){let e=localStorage.getItem("token");return new Ue({"Content-Type":"application/json",Authorization:`Bearer ${e}`})}handleError(e){let n="An error occurred";return e.error instanceof ErrorEvent?n=`Error: ${e.error.message}`:n=e.error?.message||e.statusText||"Server error",console.error("API Error:",{status:e.status,message:n,url:e.url}),ce(()=>new Error(n))}getWithCache(e,n){let r=this.cache.get(n),s=Date.now();return r&&s-r.timestamp<this.CACHE_DURATION?new mr(o=>{o.next(r.data),o.complete()}):this.http.get(e,{headers:this.getHeaders()}).pipe(U(this.handleError),Z(o=>{this.cache.set(n,{data:o,timestamp:s})}))}getTasks(){let e=this.getHeaders().set("Cache-Control","no-cache, no-store, must-revalidate").set("Pragma","no-cache").set("Expires","0").set("If-Modified-Since",new Date().toUTCString());return this.http.get(`${this.apiUrl}/get/tasks`,{headers:e,params:new _t().set("t",Date.now().toString())}).pipe(Z(n=>console.log("Raw tasks API response:",n)),V(n=>{let r=[];return n&&n.success!==void 0?r=n.data||[]:r=n,r.map(s=>{let o=s.assignee&&s.assignee.name&&s.assignee.name.toLowerCase()!=="unassigned",a=o?s.assignee.name:s.assigned_to_name&&s.assigned_to_name.toLowerCase()!=="unassigned"?s.assigned_to_name:"Unassigned";return W(C({},s),{project_name:s.project?.name||s.project_name||"No Project",project:s.project||{name:"No Project"},assigned_to_name:a,assignee:o?s.assignee:null,comments:s.comments||""})})}),Z(n=>console.log("Processed tasks with projects and assignees:",n)),U(this.handleError))}getTasksByUserRole(){let e=this.authService.currentUserValue;if(e?e.user?.role==="admin"||e.role==="admin":!1)return this.getTasks();{let r=e?.id;return this.http.get(`${this.apiUrl}/get/tasks/user/${r}`)}}getTask(){let e=localStorage.getItem("token");return e?this.http.get(`${this.apiUrl}/get/tasks`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).pipe(V(n=>(n.data&&Array.isArray(n.data)&&(n.data=n.data.map(s=>W(C({},s),{comments:s.comments||""})),this.authService.currentUserValue?.role!=="admin"&&(n.data=n.data.filter(s=>s.assignee_role==="admin"||s.creator_role==="admin"))),n)),U(n=>(console.error("Error in getTasks:",n),ce(()=>n)))):ce(()=>new Error("No authentication token found"))}createTask(e){return this.cache.clear(),this.http.post(`${this.apiUrl}/create/task`,e,{headers:this.getHeaders()}).pipe(U(this.handleError))}updateTask(e,n){return n.progress!==void 0&&(n.progress=Math.min(100,Math.max(0,Number(n.progress)||0))),this.http.put(`${this.apiUrl}/update/task/${e}`,n,{headers:this.getHeaders()}).pipe(U(this.handleError))}deleteTask(e){return this.cache.delete(`task_${e}`),this.cache.clear(),this.http.delete(`${this.apiUrl}/delete/task/${e}`,{headers:this.getHeaders(),withCredentials:!0}).pipe(U(this.handleError))}updateTaskStatus(e,n){return this.http.patch(`${this.apiUrl}/update/task/${e}/status`,{status:n},{headers:this.getHeaders()}).pipe(U(this.handleError))}getTaskComments(e){return this.http.get(`${this.apiUrl}/get/task/${e}/comments`,{headers:this.getHeaders()}).pipe(V(n=>n.success?n.data:[]),U(n=>(console.error("Error fetching comments:",n),N([]))))}addTaskComment(e,n){return this.http.post(`${this.apiUrl}/create/task/${e}/comments`,{comment:n},{headers:this.getHeaders()}).pipe(U(r=>(console.error("Error in addTaskComment:",r),ce(()=>r))))}updateComment(e,n){return this.http.put(`${this.apiUrl}/update/comments/${e}`,{comment:n},{headers:this.getHeaders()}).pipe(V(r=>r.data),U(this.handleError))}deleteComment(e){return this.http.delete(`${this.apiUrl}/delete/comments/${e}`,{headers:this.getHeaders()}).pipe(V(n=>n.success||!1),U(this.handleError))}getTaskCommentsOld(e){let n=`task_${e}_comments`;return this.getWithCache(`${this.apiUrl}/get/task/${e}/comments`,n)}addComment(e,n){return this.http.post(`${this.apiUrl}/create/task/${e}/comments`,{comment:n},{headers:this.getHeaders()}).pipe(U(this.handleError))}getMyTasks(e){let n=new _t;return e&&Object.entries(e).forEach(([r,s])=>{s!=null&&(n=n.set(r,s.toString()))}),this.http.get(`${this.apiUrl}/get/my-tasks`,{params:n,headers:this.getHeaders()}).pipe(U(this.handleError))}clearCache(){this.cache.clear()}uploadTaskAttachment(e,n){return this.http.post(`${this.apiUrl}/get/task/${e}/attachments`,n,{reportProgress:!0,observe:"events"}).pipe(U(this.handleError))}deleteTaskAttachment(e){return this.http.delete(`${this.apiUrl}/delete/task-attachments/${e}`).pipe(U(this.handleError))}getFileUploadHeaders(){let e=localStorage.getItem("token");return new Ue({Authorization:`Bearer ${e}`})}static{this.\u0275fac=function(n){return new(n||i)(K($e))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var cn=(()=>{class i{constructor(e,n){this.http=e,this.authService=n,this.apiUrl="http://localhost:3000/api"}getAuthHeaders(e={}){let n=localStorage.getItem("token"),r=new Ue({"Content-Type":"application/json",Authorization:`Bearer ${n}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}),s={t:Date.now().toString()},o=C(C({},e),s);return{headers:r,params:new _t({fromObject:o})}}handleError(e){return console.error("API Error:",e),ce(()=>e)}createProject(e){return this.http.post(`${this.apiUrl}/projects/post/projects`,e,this.getAuthHeaders()).pipe(V(n=>n.data),U(this.handleError))}getProjects(){return this.http.get(`${this.apiUrl}/projects/get/projects`,this.getAuthHeaders()).pipe(V(e=>(Array.isArray(e)?e:e?.data||[]).map(r=>({id:r.id.toString(),name:r.name,description:r.description,startDate:new Date(r.start_date||r.startDate),endDate:new Date(r.end_date||r.endDate),status:r.status}))),U(this.handleError))}updateProject(e,n){return this.http.put(`${this.apiUrl}/projects/put/projects/${e}`,n,this.getAuthHeaders()).pipe(V(r=>r.data),U(this.handleError))}deleteProject(e){return this.http.delete(`${this.apiUrl}/projects/delete/projects/${e}`,this.getAuthHeaders()).pipe(V(n=>n.success),U(this.handleError))}static{this.\u0275fac=function(n){return new(n||i)(K($e),K(ae))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var bv=["addTaskModal"],yv=["addProjectModal"],Cv=["addUserModal"],Sv=(i,t)=>({"fa-arrow-up":i,"fa-arrow-down":t}),Ev=(i,t,e)=>({"bg-success":i,"bg-warning":t,"bg-info":e}),wv=(i,t,e)=>({"bg-danger":i,"bg-warning":t,"bg-success":e}),dn=i=>({"is-invalid":i});function Tv(i,t){if(i&1&&(c(0,"div",25),b(1,"i",26),c(2,"span"),d(3),l()()),i&2){let e=y().$implicit;u(),p("ngClass",Sr(2,Sv,e.trend==="up",e.trend==="down")),u(2),D(e.trendValue)}}function Mv(i,t){if(i&1&&(c(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20),b(4,"i"),l(),c(5,"div",21)(6,"h3",22),d(7),l(),c(8,"p",23),d(9),l(),g(10,Tv,4,5,"div",24),l()()()()),i&2){let e=t.$implicit;u(4),fl("fas ",e.icon,""),u(3),D(e.value),u(2),D(e.title),u(),p("ngIf",e.trend)}}function kv(i,t){if(i&1&&(c(0,"tr")(1,"td"),d(2),l(),c(3,"td"),d(4),l(),c(5,"td")(6,"span",27),d(7),l()(),c(8,"td"),d(9),se(10,"date"),l(),c(11,"td")(12,"span",27),d(13),l()()()),i&2){let e=t.$implicit;u(2),D(e.title),u(2),D((e.project==null?null:e.project.name)||"No project"),u(2),p("ngClass",Ut(9,Ev,e.status==="completed",e.status==="in_progress",e.status==="pending")),u(),R(" ",e.status," "),u(2),D(e.due_date?Me(10,7,e.due_date):"No due date"),u(3),p("ngClass",Ut(13,wv,e.priority==="high",e.priority==="medium",e.priority==="low")),u(),R(" ",e.priority," ")}}function Pv(i,t){if(i&1){let e=Q();c(0,"div",30)(1,"div",31),w("click",function(){let r=k(e).$implicit;return P(r.onClick())}),c(2,"div",32),b(3,"i"),l(),c(4,"h6"),d(5),l(),c(6,"p",33),d(7),l(),c(8,"button",34),d(9),l()()()}if(i&2){let e=t.$implicit;u(3),br(e.icon),u(2),D(e.title),u(2),D(e.description),u(2),D(e.buttonText)}}function Av(i,t){if(i&1&&(c(0,"div",28),g(1,Pv,10,5,"div",29),l()),i&2){let e=y();u(),p("ngForOf",e.quickActions)}}function xv(i,t){i&1&&(c(0,"div",74),d(1," Please fill in all required fields correctly. "),l())}function Ov(i,t){i&1&&(c(0,"div",75),d(1," Title is required "),l())}function Iv(i,t){i&1&&(c(0,"div",75),d(1," Description is required "),l())}function Dv(i,t){if(i&1&&(c(0,"option",76),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),R(" ",e.name," ")}}function Nv(i,t){i&1&&(c(0,"div",75),d(1," Please select a project "),l())}function Rv(i,t){if(i&1&&(c(0,"option",76),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),Si(" ",e.username," (",e.role,") ")}}function Fv(i,t){if(i&1&&(c(0,"optgroup",77),g(1,Rv,2,3,"option",52),l()),i&2){let e=y(2);u(),p("ngForOf",e.managers)}}function Lv(i,t){if(i&1&&(c(0,"option",76),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),Si(" ",e.username," (",e.role,") ")}}function Uv(i,t){if(i&1&&(c(0,"optgroup",78),g(1,Lv,2,3,"option",52),l()),i&2){let e=y(2);u(),p("ngForOf",e.teamMembers)}}function $v(i,t){i&1&&(c(0,"option",79),d(1," No users available "),l())}function jv(i,t){i&1&&(c(0,"div",75),d(1," Please select an assignee "),l())}function Vv(i,t){if(i&1&&(c(0,"option",76),d(1),se(2,"titlecase"),l()),i&2){let e=t.$implicit;p("value",e),u(),R(" ",Me(2,2,e)," ")}}function zv(i,t){if(i&1&&(c(0,"option",76),d(1),se(2,"titlecase"),l()),i&2){let e=t.$implicit;p("value",e),u(),R(" ",e==="in_progress"?"In Progress":Me(2,2,e)," ")}}function qv(i,t){i&1&&(c(0,"div",75),d(1," Please select a valid date "),l())}function Bv(i,t){i&1&&(c(0,"div",75),d(1," Due date cannot be in the past "),l())}function Hv(i,t){i&1&&(c(0,"div",75),d(1," Progress must be between 0 and 100 "),l())}function Wv(i,t){if(i&1&&(c(0,"span"),d(1),l()),i&2){let e=y(2);u(),R("",e.editMode?"Update":"Create"," Task")}}function Kv(i,t){i&1&&b(0,"span",80)}function Gv(i,t){if(i&1){let e=Q();c(0,"div",35)(1,"h5",36),d(2),l(),c(3,"button",37),w("click",function(){k(e);let r=y();return P(r.dismissModal())}),l()(),c(4,"div",38)(5,"form",39),w("ngSubmit",function(){k(e);let r=y();return P(r.onSubmit())}),g(6,xv,2,0,"div",40),c(7,"div",41)(8,"label",42),d(9,"Title *"),l(),b(10,"input",43),g(11,Ov,2,0,"div",44),l(),c(12,"div",41)(13,"label",45),d(14,"Description *"),l(),b(15,"textarea",46),g(16,Iv,2,0,"div",44),l(),c(17,"div",47)(18,"div",48)(19,"label",49),d(20,"Project *"),l(),c(21,"select",50)(22,"option",51),d(23,"Select Project"),l(),g(24,Dv,2,2,"option",52),l(),g(25,Nv,2,0,"div",44),l(),c(26,"div",48)(27,"label",53),d(28,"Assign To *"),l(),c(29,"select",54)(30,"option",51),d(31,"Select Assignee"),l(),g(32,Fv,2,1,"optgroup",55)(33,Uv,2,1,"optgroup",56)(34,$v,2,0,"option",57),l(),g(35,jv,2,0,"div",44),l()(),c(36,"div",47)(37,"div",48)(38,"label",58),d(39,"Priority *"),l(),c(40,"select",59),g(41,Vv,3,4,"option",52),l()(),c(42,"div",48)(43,"label",60),d(44,"Status *"),l(),c(45,"select",61),g(46,zv,3,4,"option",52),l()()(),c(47,"div",41)(48,"label",62),d(49,"Comments/Notes"),l(),b(50,"textarea",63),l(),c(51,"div",41)(52,"label",64),d(53,"Due Date *"),l(),b(54,"input",65),g(55,qv,2,0,"div",44)(56,Bv,2,0,"div",44),l(),c(57,"div",41)(58,"label",66),d(59,"Progress *"),l(),b(60,"input",67),c(61,"div",68)(62,"small"),d(63,"0%"),l(),c(64,"small"),d(65),l(),c(66,"small"),d(67,"100%"),l()(),g(68,Hv,2,0,"div",44),l(),c(69,"div",69)(70,"button",70),w("click",function(){k(e);let r=y();return P(r.dismissModal())}),d(71,"Cancel"),l(),c(72,"button",71),g(73,Wv,2,1,"span",72)(74,Kv,1,0,"span",73),l()()()()}if(i&2){let e,n,r,s,o,a,m,h,f,_,M,S,T,A,H,te,x=y();u(2),D(x.editMode?"Edit Task":"Add New Task"),u(3),p("formGroup",x.taskForm),u(),p("ngIf",!x.taskForm.valid&&x.taskForm.touched),u(4),p("ngClass",pe(28,dn,((e=x.taskForm.get("title"))==null?null:e.invalid)&&((e=x.taskForm.get("title"))==null?null:e.touched))),u(),p("ngIf",((n=x.taskForm.get("title"))==null?null:n.invalid)&&((n=x.taskForm.get("title"))==null?null:n.touched)),u(4),p("ngClass",pe(30,dn,((r=x.taskForm.get("description"))==null?null:r.invalid)&&((r=x.taskForm.get("description"))==null?null:r.touched))),u(),p("ngIf",((s=x.taskForm.get("description"))==null?null:s.invalid)&&((s=x.taskForm.get("description"))==null?null:s.touched)),u(5),p("ngClass",pe(32,dn,((o=x.taskForm.get("projectId"))==null?null:o.invalid)&&((o=x.taskForm.get("projectId"))==null?null:o.touched))),u(3),p("ngForOf",x.projects),u(),p("ngIf",((a=x.taskForm.get("projectId"))==null?null:a.invalid)&&((a=x.taskForm.get("projectId"))==null?null:a.touched)),u(4),p("ngClass",pe(34,dn,((m=x.taskForm.get("assigned_to"))==null?null:m.invalid)&&((m=x.taskForm.get("assigned_to"))==null?null:m.touched))),u(3),p("ngIf",x.managers.length>0),u(),p("ngIf",x.teamMembers.length>0),u(),p("ngIf",x.managers.length===0&&x.teamMembers.length===0),u(),p("ngIf",((h=x.taskForm.get("assigned_to"))==null?null:h.invalid)&&((h=x.taskForm.get("assigned_to"))==null?null:h.touched)),u(5),p("ngClass",pe(36,dn,((f=x.taskForm.get("priority"))==null?null:f.invalid)&&((f=x.taskForm.get("priority"))==null?null:f.touched))),u(),p("ngForOf",x.priorities),u(4),p("ngClass",pe(38,dn,((_=x.taskForm.get("status"))==null?null:_.invalid)&&((_=x.taskForm.get("status"))==null?null:_.touched))),u(),p("ngForOf",x.statuses),u(8),p("ngClass",pe(40,dn,(((M=x.taskForm.get("dueDate"))==null?null:M.invalid)||((M=x.taskForm.get("dueDate"))==null?null:M.hasError("invalidDate")))&&((M=x.taskForm.get("dueDate"))==null?null:M.touched))),u(),p("ngIf",((S=x.taskForm.get("dueDate"))==null?null:S.invalid)&&((S=x.taskForm.get("dueDate"))==null?null:S.touched)),u(),p("ngIf",(T=x.taskForm.get("dueDate"))==null?null:T.hasError("invalidDate")),u(4),p("ngClass",pe(42,dn,((A=x.taskForm.get("progress"))==null?null:A.invalid)&&((A=x.taskForm.get("progress"))==null?null:A.touched))),u(5),R("",((H=x.taskForm.get("progress"))==null?null:H.value)||0,"%"),u(3),p("ngIf",((te=x.taskForm.get("progress"))==null?null:te.invalid)&&((te=x.taskForm.get("progress"))==null?null:te.touched)),u(4),p("disabled",x.taskForm.invalid),u(),p("ngIf",!x.taskForm.disabled),u(),p("ngIf",x.taskForm.disabled)}}var qu=(()=>{class i{openNotificationSettingsModal(){let e=this.modalService.open(zu,{size:"lg",windowClass:"notification-settings-modal",backdrop:"static",keyboard:!1});this.currentModalRef=e,e.result.then(n=>{console.log("Notification settings saved:",n),n==="saved"&&this.loadUserPreferences()},n=>{console.log("Modal dismissed: user dismissed the modal",n)}).finally(()=>{this.currentModalRef=null})}loadUserPreferences(){throw new Error("Method not implemented.")}openAddDepartmentModal(){this.modalService.open(Pr,{size:"lg",windowClass:"department-modal",backdrop:"static"}).result.then(n=>{n==="saved"&&this.toastr.success("Department saved successfully!")},n=>{console.log("Modal dismissed:",n)})}get quickActions(){let e=[{icon:"fas fa-tasks",title:"Add Task",description:"Create a new task",buttonText:"Add Task",onClick:()=>this.openAddTaskModal(),adminOnly:!0},{icon:"fas fa-project-diagram",title:"Add Project",description:"Create a new project",buttonText:"Add Project",onClick:()=>this.openAddProject(),adminOnly:!0},{icon:"fas fa-user-plus",title:"Add User",description:"Create a new user",buttonText:"Add User",onClick:()=>this.openAddUserModal(),adminOnly:!0},{icon:"fas fa-user-plus",title:"Add Department",description:"Create a new department",buttonText:"Add Department",onClick:()=>this.openAddDepartmentModal(),adminOnly:!0}];return this.isAdmin?e:e.filter(n=>!n.adminOnly)}constructor(e,n,r,s,o,a,m){this.fb=e,this.modalService=n,this.taskService=r,this.projectService=s,this.authService=o,this.userService=a,this.router=m,this.tasks=[],this.recentTasks=[],this.projects=[],this.users=[],this.filteredTasks=[],this.stats=[{title:"Total Tasks",value:"0",color:"bg-primary",icon:"fa-tasks"},{title:"Completed",value:"0",color:"bg-success",icon:"fa-check-circle"},{title:"In Progress",value:"0",color:"bg-warning",icon:"fa-spinner"}],this.editMode=!1,this.selectedTask=null,this.newTask={id:0,title:"",description:"",status:"pending",priority:"medium",progress:0,assigned_to:0,project_id:0,created_at:new Date().toISOString()},this.editProjectMode=!1,this.selectedProject=null,this.priorities=["high","medium","low"],this.statuses=["pending","in_progress","completed"],this.managers=[],this.teamMembers=[],this.currentModalRef=null,this.selectedFiles=[],this.isUploading=!1,this.uploadProgress=0,this.uploadMessage="",this.uploadMessageType="info",this.maxFileSize=10*1024*1024,this.allowedFileTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif","text/plain"],this.taskForm=this.fb.group({title:["",[O.required,O.minLength(3),O.maxLength(100)]],description:["",[O.required,O.maxLength(500)]],projectId:["",O.required],assigned_to:["",O.required],priority:["medium",O.required],status:["pending",O.required],dueDate:[null,[O.required,this.futureDateValidator()]],comment:[""],progress:[0,[O.required,O.min(0),O.max(100),O.pattern("^[0-9]*$")]]}),this.projectForm=this.fb.group({name:["",O.required],description:["",O.required],status:["",O.required]})}futureDateValidator(){return e=>{if(!e.value)return null;let n=new Date(e.value),r=new Date;return r.setHours(0,0,0,0),n<r?{invalidDate:!0}:null}}ngOnInit(){let e=this.authService.currentUserValue;console.log("Current user in dashboard:",e),this.isAdmin=e?e.user?.role==="admin"||e.role==="admin":!1,console.log("Is admin in dashboard:",this.isAdmin),this.loadAllData().catch(n=>{console.error("Error loading dashboard data:",n)})}loadAllData(){return le(this,null,function*(){try{yield Promise.all([this.loadProjects(),this.loadUsers()]),yield this.loadTasks()}catch(e){console.error("Error loading dashboard data:",e)}})}formatDueDate(e){if(!e)return"No due date";try{let n=new Date(e);return isNaN(n.getTime())?"Invalid date":n.toLocaleDateString()}catch{return"Invalid date"}}loadProjects(){return le(this,null,function*(){try{console.log("Loading projects...");let e=yield Ke(this.projectService.getProjects());console.log("Projects loaded:",e),this.projects=e}catch(e){console.error("Error loading projects:",e),this.toastr.error("Failed to load projects")}})}loadUsers(){return le(this,null,function*(){try{console.log("Fetching users...");let e=yield Ke(this.userService.getUsers().pipe(U(n=>{if(n.status===403)return console.log("User does not have permission to view all users"),N([]);throw n})));if(!Array.isArray(e)){console.error("Expected users array but got:",typeof e);return}this.users=e.map(n=>({id:n.id,username:n.username||n.email,email:n.email,role:n.role||"user",status:n.status||"active",departmentId:n.departmentId||n.department||void 0,department:n.department})),console.log("Mapped users:",this.users),this.managers=this.users.filter(n=>n.role==="manager"||n.role==="admin"),this.teamMembers=this.users.filter(n=>n.role==="user"),console.log("Managers:",this.managers),console.log("Team Members:",this.teamMembers)}catch(e){console.error("Error loading users:",e)}})}getUsersByRole(e="all"){return e==="all"?this.users:this.users.filter(n=>n.role===e)}updateTaskStatus(e,n){return le(this,null,function*(){try{if(!e.id){console.error("Cannot update task status: Task ID is undefined");return}e.status=n,yield this.taskService.updateTask(e.id,e).toPromise(),this.updateStats()}catch(r){console.error("Error updating task status:",r)}})}deleteTask(e){return le(this,null,function*(){try{if(!e.id){console.error("Cannot delete task: Task ID is undefined");return}yield this.taskService.deleteTask(e.id).toPromise(),this.tasks=this.tasks.filter(n=>n.id!==e.id),this.recentTasks=this.recentTasks.filter(n=>n.id!==e.id),this.updateStats()}catch(n){console.error("Error deleting task:",n)}})}openAddTaskModal(){this.modalService.open(this.addTaskModal,{size:"lg",centered:!0,backdrop:"static"}).result.then(e=>{e==="success"&&this.loadTasks()}).catch(e=>{console.log("Modal dismissed:",e)})}openAddUserModal(){console.log("Open add user modal"),this.router.navigate(["/users/new"])}openAddProject(){console.log("Opening project form..."),this.router.navigate(["/projects/new"])}createTask(){if(this.taskForm.invalid){this.taskForm.markAllAsTouched();return}let e=this.taskForm.value;console.log("Form values before creating task:",e);let n=W(C({},this.newTask),{title:e.title,description:e.description,status:e.status,priority:e.priority,progress:e.progress,assigned_to:e.assigned_to,project_id:e.projectId,comments:e.comment||null,created_at:new Date().toISOString()});console.log("Task data being sent to backend:",n),this.taskService.createTask(n).subscribe(r=>{console.log("Task created successfully:",r),this.modalService.dismissAll("success"),this.taskForm.reset({priority:"medium",status:"pending",progress:0,comment:""}),this.loadTasks()},r=>{console.error("Error creating task:",r),alert("Failed to create task. Please try again.")})}openAddProjectModal(){this.editProjectMode=!1,this.selectedProject=null,this.projectForm.reset(),this.modalService.open(this.addProjectModal)}editProject(e){this.editProjectMode=!0,this.selectedProject=e,this.projectForm.patchValue({name:e.name,description:e.description,status:e.status}),this.modalService.open(this.addProjectModal)}saveProject(){return le(this,null,function*(){if(this.projectForm.valid)try{let e=this.projectForm.value;if(console.log("Saving project with data:",e),this.editProjectMode&&this.selectedProject?.id){console.log("Updating project with ID:",this.selectedProject.id);let n=yield this.projectService.updateProject(this.selectedProject.id.toString(),e).toPromise();console.log("Project updated:",n)}else{console.log("Creating new project");let n=yield this.projectService.createProject(e).toPromise();console.log("Project created:",n)}this.modalService.dismissAll(),yield this.loadProjects()}catch(e){console.error("Error saving project:",e)}else console.log("Form is invalid:",this.projectForm.errors)})}deleteProject(e){return le(this,null,function*(){if(confirm("Are you sure you want to delete this project?"))try{if(!e.id){console.error("Cannot delete project: Project ID is undefined");return}yield this.projectService.deleteProject(e.id).toPromise(),this.projects=this.projects.filter(n=>n.id!==e.id),this.updateStats()}catch(n){console.error("Error deleting project:",n)}})}updateProjectStatus(e,n){return le(this,null,function*(){try{if(!e.id){console.error("Cannot update project status: Project ID is undefined");return}e.status=n,yield this.projectService.updateProject(e.id,e).toPromise(),this.updateStats()}catch(r){console.error("Error updating project status:",r)}})}viewAllTasks(){this.router.navigate(["/tasks"])}editTask(e){this.editMode=!0,this.selectedTask=e;let n="";if(e.due_date){let r=new Date(e.due_date);isNaN(r.getTime())||(n=r.toISOString().split("T")[0])}this.taskForm.patchValue({title:e.title||"",description:e.description||"",projectId:e.project_id?.toString()||"",assigned_to:e.assigned_to?.toString()||"",priority:e.priority||"medium",status:e.status||"pending",dueDate:n,progress:e.progress||0,comment:e.comments||""}),this.modalService.open(this.addTaskModal,{size:"lg",centered:!0,backdrop:"static"})}onSubmit(){return le(this,null,function*(){if(this.taskForm.invalid){this.taskForm.markAllAsTouched();return}try{this.taskForm.disable();let e=this.taskForm.value,n=e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:null,r={title:e.title,description:e.description,project_id:e.projectId,assigned_to:e.assigned_to,priority:e.priority,status:e.status,progress:e.progress||0,comments:e.comment||null,due_date:n};console.log("Submitting task data:",r);let s;if(this.editMode&&this.selectedTask){let o=yield Ke(this.taskService.updateTask(this.selectedTask.id,r));s=this.selectedTask.id,this.showUploadMessage("Task updated successfully","success")}else s=(yield Ke(this.taskService.createTask(r))).id,this.showUploadMessage("Task created successfully","success");this.selectedFiles.length>0&&s&&(console.log("Uploading files for task ID:",s),yield this.uploadFiles(s)),this.loadTasks(),this.dismissModal()}catch(e){console.error("Error saving task:",e),this.showUploadMessage("Failed to save task. Please try again.","error")}finally{this.taskForm.enable()}})}editTaskFromRecent(e){this.taskService.getTaskById(e.id).subscribe({next:n=>{this.editTask(n),n.comments&&(this.taskComments[e.id]=Array.isArray(n.comments)?n.comments:[n.comments])},error:n=>{console.error("Error loading task details:",n)}})}addComment(e){this.newComment[e]?.trim()&&this.taskService.addTaskComment(e,this.newComment[e].trim()).subscribe({next:n=>{n&&n.success&&(this.taskComments[e]||(this.taskComments[e]=[]),this.taskComments[e].unshift(n.data||n),this.newComment[e]="")},error:n=>{console.error("Error adding comment:",n)}})}dismissModal(){this.currentModalRef?(this.currentModalRef.dismiss("User dismissed the modal"),this.currentModalRef=null):this.modalService.hasOpenModals()&&this.modalService.dismissAll("User dismissed the modal")}updateStats(){let e=this.tasks.length,n=this.tasks.filter(s=>s.status==="completed").length,r=this.tasks.filter(s=>["in_progress","pending"].includes(s.status)).length;this.stats[0].value=e.toString(),this.stats[1].value=n.toString(),this.stats[2].value=r.toString()}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}onFileSelected(e){let n=e.target.files;if(!(!n||n.length===0)){for(let r=0;r<n.length;r++){let s=n[r];if(s.size>this.maxFileSize){this.showUploadMessage(`File ${s.name} exceeds maximum size of 10MB`,"error");continue}if(!this.allowedFileTypes.includes(s.type)){this.showUploadMessage(`File type not supported: ${s.name}`,"error");continue}this.selectedFiles.some(o=>o.name===s.name&&o.size===s.size)||this.selectedFiles.push(s)}e.target.value=""}}removeSelectedFile(e){this.selectedFiles.splice(e,1)}uploadFiles(e){return le(this,null,function*(){if(this.selectedFiles.length!==0){this.isUploading=!0,this.uploadProgress=0;try{let n=new FormData;this.selectedFiles.forEach(s=>{n.append("files",s)});let r=setInterval(()=>{this.uploadProgress<90&&(this.uploadProgress+=10)},300);yield Ke(this.taskService.uploadTaskAttachments(e,n)),yield new Promise(s=>setTimeout(s,300)),clearInterval(r),this.uploadProgress=100,this.showUploadMessage("Files uploaded successfully","success"),this.selectedFiles=[]}catch(n){console.error("Error uploading files:",n),this.showUploadMessage("Failed to upload files. Please try again.","error")}finally{this.isUploading=!1}}})}showUploadMessage(e,n="info"){this.uploadMessage=e,this.uploadMessageType=n,n!=="error"&&setTimeout(()=>{this.uploadMessage=""},5e3)}ngOnDestroy(){}loadTasks(){return le(this,null,function*(){try{this.projects.length===0&&(yield this.loadProjects());let e=yield Ke(this.taskService.getTasks());this.tasks=e.map(n=>W(C({},n),{project:this.projects.find(s=>s.id===n.project_id?.toString())})),this.recentTasks=[...this.tasks].sort((n,r)=>new Date(r.created_at||0).getTime()-new Date(n.created_at||0).getTime()).slice(0,5),this.updateStats()}catch(e){console.error("Error loading tasks:",e)}})}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(At),E(_i),E(cn),E(ae),E(He),E(Y))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-dashboard"]],viewQuery:function(n,r){if(n&1&&(ft(bv,5),ft(yv,5),ft(Cv,5)),n&2){let s;Ge(s=Qe())&&(r.addTaskModal=s.first),Ge(s=Qe())&&(r.addProjectModal=s.first),Ge(s=Qe())&&(r.addUserModal=s.first)}},decls:33,vars:3,consts:[["addTaskModal",""],[1,"container-fluid","dashboard-container"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center","mb-4"],[1,"dashboard-title","mb-3","mb-md-0"],[1,"d-flex","flex-column","flex-sm-row","gap-2","ms-md-3"],[1,"row","mb-4","gap-2"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"card","mb-4"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0","fw-bold"],[1,"btn","btn-link","text-primary","p-0",3,"click"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[1,"fw-bold"],[4,"ngFor","ngForOf"],["class","row mb-4 g-2",4,"ngIf"],[1,"col-md-3"],[1,"stat-card"],[1,"stat-card-body"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],["class","stat-trend",4,"ngIf"],[1,"stat-trend"],[1,"fas",3,"ngClass"],[1,"badge",3,"ngClass"],[1,"row","mb-4","g-2"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"action-card",3,"click"],[1,"action-icon"],[1,"text-muted"],[1,"btn","btn-primary","w-100"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3",1,"form-control",3,"ngClass"],[1,"row"],[1,"col-md-6","mb-3"],["for","projectId",1,"form-label"],["id","projectId","formControlName","projectId",1,"form-select",3,"ngClass"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","assigned_to",1,"form-label"],["id","assigned_to","formControlName","assigned_to",1,"form-select",3,"ngClass"],["label","Managers",4,"ngIf"],["label","Team Members",4,"ngIf"],["disabled","",4,"ngIf"],["for","priority",1,"form-label"],["id","priority","formControlName","priority",1,"form-select",3,"ngClass"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select",3,"ngClass"],["for","comment",1,"form-label"],["id","comment","formControlName","comment","rows","3",1,"form-control"],["for","dueDate",1,"form-label"],["type","date","id","dueDate","formControlName","dueDate",1,"form-control",3,"ngClass"],["for","progress",1,"form-label"],["type","range","id","progress","min","0","max","100","formControlName","progress",1,"form-range",3,"ngClass"],[1,"d-flex","justify-content-between"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"alert","alert-danger"],[1,"invalid-feedback"],[3,"value"],["label","Managers"],["label","Team Members"],["disabled",""],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,r){if(n&1){let s=Q();c(0,"div",1)(1,"div",2)(2,"h2",3),d(3,"Dashboard"),l(),b(4,"div",4),l(),c(5,"div",5),g(6,Mv,11,6,"div",6),l(),c(7,"div",7)(8,"div",8)(9,"h5",9),d(10,"Recent Tasks"),l(),c(11,"button",10),w("click",function(){return k(s),P(r.viewAllTasks())}),d(12,"View All"),l()(),c(13,"div",11)(14,"div",12)(15,"table",13)(16,"thead")(17,"tr")(18,"th",14),d(19,"Task Name"),l(),c(20,"th",14),d(21,"Project"),l(),c(22,"th",14),d(23,"Status"),l(),c(24,"th",14),d(25,"Due Date"),l(),c(26,"th",14),d(27,"Priority"),l()()(),c(28,"tbody"),g(29,kv,14,17,"tr",15),l()()()()(),g(30,Av,2,1,"div",16)(31,Gv,75,44,"ng-template",null,0,gn),l()}n&2&&(u(6),p("ngForOf",r.stats),u(23),p("ngForOf",r.recentTasks),u(),p("ngIf",r.quickActions.length>0))},dependencies:[ne,rt,Le,oe,Bn,Tt,we,je,ge,kt,Pt,he,Fl,Mt,ue,fe,be,_e,xe,Vl],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:.5rem;transition:transform .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fc;border-bottom:1px solid #e3e6f0;font-weight:600}.border-bottom-3[_ngcontent-%COMP%]{border-bottom-width:3px!important}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.avatar-initial[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:600}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;font-weight:600;font-size:.8rem;text-transform:uppercase;color:#6e707e}.progress[_ngcontent-%COMP%]{border-radius:1rem;background-color:#eaecf4}.progress-bar[_ngcontent-%COMP%]{border-radius:1rem}.badge[_ngcontent-%COMP%]{padding:.35em .65em;font-weight:500}.badge-primary[_ngcontent-%COMP%]{background-color:#4e73df}.badge-success[_ngcontent-%COMP%]{background-color:#1cc88a}.badge-warning[_ngcontent-%COMP%]{background-color:#f6c23e}.badge-danger[_ngcontent-%COMP%]{background-color:#e74a3b}.badge-info[_ngcontent-%COMP%]{background-color:#36b9cc}.dashboard-container[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);min-height:100vh}.dashboard-header[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:1rem;box-shadow:0 .5rem 1rem #0000001a;margin-bottom:2rem}.dashboard-title[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.8rem}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem;box-shadow:0 .25rem .75rem #0000000d;transition:transform .3s ease;height:100%}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-card-body[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#6366f11a;display:flex;align-items:center;justify-content:center}.stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#6366f1}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#1a1a1a;margin:0}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:.25rem 0}.stat-trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem}.stat-trend[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#16a34a}.stat-trend[_ngcontent-%COMP%]   i.fa-arrow-down[_ngcontent-%COMP%]{color:#dc2626}.card[_ngcontent-%COMP%]{border:none;border-radius:1rem;box-shadow:0 .25rem .75rem #0000000d}.card-header[_ngcontent-%COMP%]{background:#fff;padding:1rem 1.5rem;border-bottom:1px solid #e2e8f0}.table[_ngcontent-%COMP%]{color:#1a1a1a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#475569;border-color:#e2e8f0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;border-radius:.5rem}.action-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;text-align:center;box-shadow:0 .25rem .75rem #0000000d;transition:transform .3s ease;height:100%}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.action-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#6366f11a;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem}.action-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.8rem;color:#6366f1}.action-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1a1a1a;margin-bottom:.75rem}.action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin-bottom:1.5rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:.5rem;font-weight:500;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background:#6366f1;border-color:#6366f1}.btn-primary[_ngcontent-%COMP%]:hover{background:#5b55e0;border-color:#5b55e0}.btn-outline-primary[_ngcontent-%COMP%]{color:#6366f1;border-color:#6366f1}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#6366f1;color:#fff}.modal-content[_ngcontent-%COMP%]{border-radius:1rem;border:none}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0}.modal-body[_ngcontent-%COMP%]{padding:2rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid #e2e8f0;padding:.75rem}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#6366f1;box-shadow:0 0 0 .2rem #6366f140}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#475569;margin-bottom:.5rem}.textarea[_ngcontent-%COMP%]{min-height:100px}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.stat-card[_ngcontent-%COMP%]{margin-bottom:1rem}.dashboard-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.btn[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:.875rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;font-size:.8rem}}@media (max-width: 576px){.d-flex.gap-2[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem!important;width:100%}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.stat-card[_ngcontent-%COMP%]{padding:1rem}.stat-value[_ngcontent-%COMP%]{font-size:1.25rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem}}.btn[_ngcontent-%COMP%]{min-height:38px}.table-responsive[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;margin:0 -1rem;padding:0 1rem;width:calc(100% + 2rem)}@media (max-width: 768px){.card[_ngcontent-%COMP%]{margin-bottom:1rem}.card-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.card-body[_ngcontent-%COMP%]{padding:1rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.stat-card[_ngcontent-%COMP%], .action-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.file-upload-container[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;padding:1.5rem;transition:all .3s ease;background-color:#f8f9fa}.file-upload-container[_ngcontent-%COMP%]:hover{border-color:#0d6efd;background-color:#f1f8ff}.selected-files[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:.5rem .75rem;margin-bottom:.5rem;border-radius:4px}.progress[_ngcontent-%COMP%]{height:.5rem;border-radius:.25rem;overflow:hidden}@media (max-width: 576px){.file-upload-container[_ngcontent-%COMP%]{padding:1rem}}"]})}}return i})();var Qv=["addTaskModal"],Yv=["fileInput"],Xv=(i,t,e)=>({"bg-success":i,"bg-warning":t,"bg-info":e}),Bu=(i,t,e)=>({"bg-danger":i,"bg-warning":t,"bg-success":e});function Zv(i,t){if(i&1){let e=Q();c(0,"button",33),w("click",function(){k(e);let r=y();return P(r.openAddTaskModal())}),b(1,"i",34),d(2,"Add Task "),l()}}function Jv(i,t){if(i&1&&(c(0,"option",35),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),R(" ",e.name," ")}}function eb(i,t){if(i&1&&(c(0,"option",35),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),R(" ",e.username," ")}}function tb(i,t){if(i&1){let e=Q();c(0,"div",15)(1,"select",16),Se("ngModelChange",function(r){k(e);let s=y();return Ce(s.selectedAssignee,r)||(s.selectedAssignee=r),P(r)}),w("change",function(){k(e);let r=y();return P(r.filterTasks())}),c(2,"option",17),d(3,"All Assignees"),l(),g(4,eb,2,2,"option",24),l()()}if(i&2){let e=y();u(),ye("ngModel",e.selectedAssignee),u(3),p("ngForOf",e.users)}}function nb(i,t){i&1&&(c(0,"span",53),d(1,"0%"),l())}function ib(i,t){if(i&1){let e=Q();c(0,"button",54),w("click",function(){k(e);let r=y().$implicit,s=y();return P(s.updateStatus(r,"completed"))}),b(1,"i",55),l()}}function rb(i,t){if(i&1){let e=Q();c(0,"button",56),w("click",function(){k(e);let r=y().$implicit,s=y();return P(s.deleteTask(r))}),b(1,"i",57),l()}}function sb(i,t){if(i&1){let e=Q();c(0,"tr")(1,"td")(2,"div",36)(3,"div",37),b(4,"i",38),l(),c(5,"div",39)(6,"h6",5),d(7),l(),c(8,"small",40),d(9),l()()()(),c(10,"td"),d(11),l(),c(12,"td")(13,"div",36)(14,"div",41),b(15,"img",42),l(),c(16,"span"),d(17),l()()(),c(18,"td")(19,"span",43),d(20),se(21,"titlecase"),l()(),c(22,"td")(23,"span",43),d(24),se(25,"titlecase"),l()(),c(26,"td"),d(27),se(28,"date"),l(),c(29,"td")(30,"div",44)(31,"div",45)(32,"span",46),d(33),se(34,"number"),l()(),g(35,nb,2,0,"span",47),l()(),c(36,"td")(37,"div",48)(38,"button",49),w("click",function(){let r=k(e).$implicit,s=y();return P(s.editTask(r))}),b(39,"i",50),l(),g(40,ib,2,0,"button",51)(41,rb,2,0,"button",52),l()()()}if(i&2){let e=t.$implicit,n=y();u(7),D(e.title),u(2),D(e.description),u(2),D((e.project==null?null:e.project.name)||"No project"),u(4),p("src",e.assignee==null?null:e.assignee.avatar,fr),u(2),D(n.getUsername(e.assigned_to)),u(2),p("ngClass",Ut(26,Xv,e.status==="completed",e.status==="in_progress",e.status==="pending")),u(),R(" ",Me(21,17,e.status),`
`),u(3),p("ngClass",Ut(30,Bu,e.priority==="high",e.priority==="medium",e.priority==="low")),u(),R(" ",Me(25,19,e.priority)," "),u(3),D(e.due_date?Me(28,21,e.due_date):"No due date"),u(4),vr("width",e.progress||0,"%"),p("ngClass",Ut(34,Bu,(e.progress||0)<30,(e.progress||0)>=30&&(e.progress||0)<70,(e.progress||0)>=70)),u(2),R("",gt(34,23,e.progress||0,"1.0-0"),"%"),u(2),p("ngIf",!e.progress),u(5),p("ngIf",e.status!=="completed"),u(),p("ngIf",n.isAdmin)}}function ob(i,t){i&1&&(c(0,"div",95),d(1," Please fill in all required fields correctly. "),l())}function ab(i,t){i&1&&(c(0,"div",96),d(1," Title is required "),l())}function lb(i,t){i&1&&(c(0,"div",96),d(1," Description is required "),l())}function cb(i,t){if(i&1&&(c(0,"option",35),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),R(" ",e.name," ")}}function db(i,t){i&1&&(c(0,"div",96),d(1," Please select a project "),l())}function ub(i,t){if(i&1&&(c(0,"p"),d(1),l()),i&2){let e=y(2);u(),R("Users Loaded: ",e.users.length,"")}}function mb(i,t){if(i&1&&(c(0,"option",35),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),R(" ",e.username," ")}}function pb(i,t){i&1&&(c(0,"div",96),d(1," Please select an assignee "),l())}function hb(i,t){i&1&&(c(0,"div",96),d(1," Please select a due date "),l())}function fb(i,t){i&1&&(c(0,"div",96),d(1," Please enter a valid progress value (0-100) "),l())}function gb(i,t){i&1&&b(0,"span",97)}function _b(i,t){if(i&1){let e=Q();c(0,"div",58)(1,"h5",59),d(2),l(),c(3,"button",60),w("click",function(){let r=k(e).$implicit;return P(r.dismiss("Cross click"))}),l()(),c(4,"div",61)(5,"form",62),w("ngSubmit",function(){let r=k(e).$implicit,s=y();return P(s.onSubmit(r))}),g(6,ob,2,0,"div",63),c(7,"div",64)(8,"label",65),d(9,"Title"),l(),b(10,"input",66),g(11,ab,2,0,"div",67),l(),c(12,"div",64)(13,"label",68),d(14,"Description"),l(),b(15,"textarea",69),g(16,lb,2,0,"div",67),l(),c(17,"div",70)(18,"div",71)(19,"label",72),d(20,"Project"),l(),c(21,"select",73)(22,"option",74),d(23,"Select Project"),l(),g(24,cb,2,2,"option",24),l(),g(25,db,2,0,"div",67),l(),c(26,"div",71)(27,"label",75),d(28,"Assign To"),l(),c(29,"select",76),g(30,ub,2,1,"p",77),c(31,"option",74),d(32,"Select Assignee"),l(),g(33,mb,2,2,"option",24),l(),g(34,pb,2,0,"div",67),l()(),c(35,"div",70)(36,"div",71)(37,"label",78),d(38,"Priority"),l(),c(39,"select",79)(40,"option",21),d(41,"High"),l(),c(42,"option",80),d(43,"Medium"),l(),c(44,"option",23),d(45,"Low"),l()()(),c(46,"div",71)(47,"label",81),d(48,"Status"),l(),c(49,"select",82)(50,"option",18),d(51,"Pending"),l(),c(52,"option",83),d(53,"In_Progress"),l(),c(54,"option",20),d(55,"Completed"),l()()()(),c(56,"div",64)(57,"label",84),d(58,"Comments"),l(),c(59,"textarea",85),d(60,"          "),l()(),c(61,"div",64)(62,"label",86),d(63,"Due Date"),l(),b(64,"input",87),g(65,hb,2,0,"div",67),l(),c(66,"div",64)(67,"label",88),d(68,"Progress"),l(),c(69,"input",89),w("input",function(r){k(e);let s=y();return P(s.onProgressInput(r))}),l(),g(70,fb,2,0,"div",67),c(71,"div",90),d(72),l()(),c(73,"div",91)(74,"button",92),w("click",function(){let r=k(e).$implicit;return P(r.dismiss("Cancel click"))}),d(75," Cancel "),l(),c(76,"button",93),g(77,gb,1,0,"span",94),d(78),l()()()()}if(i&2){let e,n,r,s,o,a,m,h,f=y();u(2),D(f.editMode?"Edit Task":"Add New Task"),u(3),p("formGroup",f.taskForm),u(),p("ngIf",!f.taskForm.valid),u(4),p("readonly",!f.isAdmin&&f.editMode),u(),p("ngIf",((e=f.taskForm.get("title"))==null?null:e.invalid)&&((e=f.taskForm.get("title"))==null?null:e.touched)),u(4),p("readonly",!f.isAdmin&&f.editMode),u(),p("ngIf",((n=f.taskForm.get("description"))==null?null:n.invalid)&&((n=f.taskForm.get("description"))==null?null:n.touched)),u(5),re("readonly-field",!f.isAdmin&&f.editMode),u(3),p("ngForOf",f.projects),u(),p("ngIf",((r=f.taskForm.get("project_id"))==null?null:r.invalid)&&((r=f.taskForm.get("project_id"))==null?null:r.touched)),u(4),re("readonly-field",!f.isAdmin&&f.editMode),u(),p("ngIf",f.users&&f.users.length>0),u(3),p("ngForOf",f.users),u(),p("ngIf",((s=f.taskForm.get("assigned_to"))==null?null:s.invalid)&&((s=f.taskForm.get("assigned_to"))==null?null:s.touched)),u(30),p("readonly",!f.isAdmin&&f.editMode),u(),p("ngIf",((o=f.taskForm.get("dueDate"))==null?null:o.invalid)&&((o=f.taskForm.get("dueDate"))==null?null:o.touched)),u(4),p("value",(a=f.taskForm.get("progress"))==null?null:a.value),u(),p("ngIf",((m=f.taskForm.get("progress"))==null?null:m.invalid)&&((m=f.taskForm.get("progress"))==null?null:m.touched)),u(2),R("Current Progress: ",((h=f.taskForm.get("progress"))==null?null:h.value)||0,"%"),u(2),p("disabled",f.taskForm.disabled),u(2),p("disabled",f.taskForm.invalid||f.taskForm.disabled),u(),p("ngIf",f.taskForm.disabled),u(),R(" ",f.editMode?"Update":"Create"," Task ")}}var Hu=(()=>{class i{constructor(e,n,r,s,o,a,m){this.fb=e,this.modalService=n,this.taskService=r,this.projectService=s,this.userService=o,this.authService=a,this.router=m,this.editMode=!1,this.selectedTask=null,this.tasks=[],this.projects=[],this.users=[],this.filteredTasks=[],this.isAdmin=!1,this.taskCounts={pending:0,in_progress:0,completed:0},this.searchQuery="",this.selectedStatus="",this.selectedPriority="",this.selectedProject="",this.selectedAssignee="",this.showComments={},this.taskComments={},this.newComment={},this.editingComment={},this.selectedFiles=[],this.isUploading=!1,this.uploadProgress=0,this.isDragging=!1,this.uploadMessage="",this.uploadMessageType="info",this.maxFileSize=10*1024*1024,this.allowedFileTypes=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif","text/plain"],this.isAdmin=this.authService.isAdmin,this.taskService.authService=this.authService}ngOnInit(){this.initializeForm(),this.loadInitialData()}initializeForm(){this.taskForm=this.fb.group({title:["",O.required],description:["",O.required],project_id:[null,O.required],assigned_to:[null,O.required],priority:["medium",O.required],status:["pending",O.required],dueDate:["",O.required],comments:[""],progress:[0,[O.required,O.min(0),O.max(100),O.pattern("^[0-9]*$")]]})}loadInitialData(){Qa([this.taskService.getTasks(),this.projectService.getProjects(),this.userService.getUsers(),this.taskService.getTaskCounts()]).pipe(Z(([e,n,r,s])=>{this.tasks=e.sort((o,a)=>(a.id||0)-(o.id||0)),this.filteredTasks=[...this.tasks],this.projects=n,this.users=r,this.taskCounts=s}),U(e=>(console.error("Error loading initial data:",e),N(null)))).subscribe()}getUsername(e){if(!e)return"Unassigned";let n=e.toString(),r=this.users.find(s=>s.id.toString()===n);return r?r.username:"Unknown User"}filterTasks(){this.filteredTasks=this.tasks.filter(e=>{let n=e.title.toLowerCase().includes(this.searchQuery.toLowerCase())||e.description.toLowerCase().includes(this.searchQuery.toLowerCase()),r=!this.selectedStatus||e.status===this.selectedStatus,s=!this.selectedPriority||e.priority===this.selectedPriority,o=!this.selectedProject||e.project_id===parseInt(this.selectedProject),a=!this.selectedAssignee||e.assigned_to===parseInt(this.selectedAssignee);return n&&r&&s&&o&&a})}openAddTaskModal(){this.editMode=!1,this.selectedTask=null,this.taskForm.reset({priority:"medium",status:"pending",progress:0,project_id:null,assigned_to:null,dueDate:""}),this.modalService.open(this.addTaskModal,{ariaLabelledBy:"modal-basic-title",backdrop:"static",keyboard:!1})}editTask(e){console.log("Editing task:",e),this.editMode=!0,this.selectedTask=e;let n="";if(e.due_date||e.dueDate){let s=e.due_date||e.dueDate;s&&!isNaN(new Date(s).getTime())&&(n=new Date(s).toISOString().split("T")[0])}let r=0;e.progress!==void 0&&e.progress!==null&&(r=Math.min(100,Math.max(0,Number(e.progress)))),e.id&&this.loadTaskComments(e.id),this.taskForm.patchValue({title:e.title||"",description:e.description||"",project_id:e.project_id||null,assigned_to:e.assigned_to||null,priority:e.priority||"medium",status:e.status||"pending",dueDate:n,progress:r,comments:e.comments}),this.modalService.open(this.addTaskModal,{ariaLabelledBy:"modal-basic-title",backdrop:"static",keyboard:!1})}onProgressInput(e){let n=e.target,r=Number(n.value);if(!isNaN(r)){let s=Math.min(100,Math.max(0,r));this.taskForm.patchValue({progress:s},{emitEvent:!0})}}onDateInput(e){let n=e.target;this.taskForm.patchValue({dueDate:n.value},{emitEvent:!0})}onSubmit(e){return le(this,null,function*(){if(this.taskForm.invalid){this.taskForm.markAllAsTouched();return}try{this.taskForm.disable();let n=this.taskForm.value,r=Math.min(100,Math.max(0,Number(n.progress)||0)),s=n.dueDate;s&&(s instanceof Date?s=s.toISOString().split("T")[0]:typeof s=="string"&&(s=new Date(s).toISOString().split("T")[0]));let o={title:n.title,description:n.description,project_id:n.project_id?Number(n.project_id):null,assigned_to:n.assigned_to?Number(n.assigned_to):null,priority:n.priority,status:n.status,due_date:s,progress:r,comments:n.comments||""};console.log("Submitting task data:",o);let a;if(this.editMode&&this.selectedTask?a=yield Ke(this.taskService.updateTask(this.selectedTask.id,o)):a=yield Ke(this.taskService.createTask(o)),this.selectedFiles.length>0)try{yield this.uploadFiles(a.id)}catch(m){console.error("Error uploading files:",m)}this.loadInitialData(),this.resetForm(),this.selectedFiles=[],setTimeout(()=>{e&&typeof e.close=="function"?e.close("Task saved successfully"):this.modalService.dismissAll()},1e3)}catch(n){console.error("Error saving task:",n),this.uploadMessage=n?.error?.message||n?.message||"Failed to save task. Please try again.",this.uploadMessageType="error"}finally{this.taskForm.enable()}})}resetForm(){this.taskForm.reset({title:"",description:"",status:"pending",priority:"medium",projectId:null,assignedTo:null,dueDate:null,progress:0,comments:""}),this.selectedTask=null,this.editMode=!1,this.uploadMessage="",this.uploadMessageType="info",this.uploadProgress=0}updateStatus(e,n){return le(this,null,function*(){if(!e||!e.id)return console.error("Invalid task or task ID"),!1;try{let r=e.progress||0;n==="completed"?r=100:n==="in_progress"&&r<50&&(r=50);let s={status:n,progress:r};console.log("Sending update request:",{taskId:e.id,updateData:s,currentTask:e});let o=yield Ke(this.taskService.updateTask(e.id,s));console.log("Update response:",o);let a=this.tasks.findIndex(m=>m.id===e.id);return a!==-1?(this.tasks[a]=W(C(C({},this.tasks[a]),o),{status:n,progress:r,updated_at:new Date().toISOString()}),this.filteredTasks=[...this.tasks],!0):!1}catch(r){console.error("Detailed error:",{name:r.name,message:r.message,status:r.status,statusText:r.statusText,url:r.url,error:r.error,headers:r.headers,fullError:r});let s="Failed to update task. Please try again.";return r.status===401?s="Session expired. Please log in again.":r.status===404?s="Task not found. It may have been deleted.":r.error&&r.error.message?s=r.error.message:r.message&&(s=r.message),console.error("Error updating task:",s),alert(s),!1}})}deleteTask(e){return le(this,null,function*(){if(console.log("Delete task clicked"),confirm("Are you sure you want to delete this task?"))try{let n=typeof e=="number"?e:e.id;console.log("Attempting to delete task ID:",n);let r=yield Ke(this.taskService.deleteTask(n));console.log("Delete API response:",r),this.tasks=this.tasks.filter(s=>s.id!==n),this.filteredTasks=this.filteredTasks.filter(s=>s.id!==n),console.log("Task removed from local state"),alert("Task deleted successfully")}catch(n){console.error("Error deleting task:",n),alert("Failed to delete task. ")}})}dismissModal(){this.modalService.dismissAll()}toggleComments(e){this.showComments[e]=!this.showComments[e],this.showComments[e]&&!this.taskComments[e]&&this.loadTaskComments(e)}loadTaskComments(e){this.taskService.getTaskComments(e).subscribe({next:n=>{if(this.taskComments[e]=n,n&&n.length>0){let r=n.map(s=>s.comment).join(`

`);this.taskForm.patchValue({comments:r})}},error:n=>{console.error("Error loading comments:",n)}})}addComment(e){try{if(!this.newComment[e]?.trim())return;console.log("Adding comment:",{taskId:e,comment:this.newComment[e].trim()}),this.taskService.addTaskComment(e,this.newComment[e].trim()).subscribe({next:n=>{console.log("Comment added:",n),n&&n.success&&(this.taskComments[e]||(this.taskComments[e]=[]),this.taskComments[e].unshift(n.data||n),this.newComment[e]="")},error:n=>{console.error("Error adding comment:",n),console.error("Error details:",n.error)}})}catch(n){console.error("Unexpected error in addComment:",n)}}startEditingComment(e,n){this.editingComment[e]={id:n.id,content:n.comment}}cancelEditingComment(e){this.editingComment[e]={id:null,content:""}}updateComment(e,n){let r=this.editingComment[e]?.content;r?.trim()&&this.taskService.updateComment(n,r.trim()).subscribe({next:s=>{let o=this.taskComments[e]||[],a=o.findIndex(m=>m.id===n);a!==-1&&(o[a]=s),this.cancelEditingComment(e)},error:s=>{console.error("Error updating comment:",s)}})}deleteComment(e,n){confirm("Are you sure you want to delete this comment?")&&this.taskService.deleteComment(n).subscribe({next:r=>{r&&(this.taskComments[e]=(this.taskComments[e]||[]).filter(s=>s.id!==n))},error:r=>{console.error("Error deleting comment:",r)}})}isCommentOwner(e){return e.user_id===this.authService.getUserId()}onFileSelected(e,n){let r=e.target.files;!r||r.length===0||(this.selectedFiles=Array.from(r),this.uploadMessage="",this.uploadMessageType="info")}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!1}onFileDropped(e,n){e.preventDefault(),e.stopPropagation(),this.isDragging=!1;let r=e.dataTransfer?.files;r&&r.length>0&&this.handleFiles(r,n)}handleFiles(e,n){this.uploadMessage="";for(let r=0;r<e.length;r++){let s=e[r];if(s.size>this.maxFileSize){this.uploadMessage=`File ${s.name} exceeds maximum size of 10MB`,this.uploadMessageType="error";continue}if(!this.allowedFileTypes.includes(s.type)){this.uploadMessage=`File type not supported: ${s.name}`,this.uploadMessageType="error";continue}this.selectedFiles.some(o=>o.name===s.name&&o.size===s.size)||this.selectedFiles.push(s)}}removeSelectedFile(e){this.selectedFiles.splice(e,1)}getFileIcon(e){switch(e.type.split("/")[0]){case"image":return"bi-file-image";case"application":return e.type.includes("pdf")?"bi-file-pdf":e.type.includes("word")||e.type.includes("document")?"bi-file-word":e.type.includes("excel")||e.type.includes("sheet")?"bi-file-excel":"bi-file-text";case"text":return"bi-file-text";default:return"bi-file"}}uploadFiles(e){return le(this,null,function*(){if(this.selectedFiles.length!==0){this.isUploading=!0,this.uploadProgress=0;try{let n=new FormData;this.selectedFiles.forEach(s=>{n.append("files",s)});let r=setInterval(()=>{this.uploadProgress<90&&(this.uploadProgress+=10)},300);yield Ke(this.taskService.uploadTaskAttachments(e,n)),yield new Promise(s=>setTimeout(s,300)),clearInterval(r),this.uploadProgress=100,this.showUploadMessage("Files uploaded successfully","success"),this.selectedFiles=[]}catch(n){throw console.error("Error uploading files:",n),this.showUploadMessage("Failed to upload files. Please try again.","error"),n}finally{this.isUploading=!1}}})}showUploadMessage(e,n){throw new Error("Method not implemented.")}ngOnDestroy(){this.modalService.dismissAll()}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(At),E(_i),E(cn),E(He),E(ae),E(Y))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-tasks"]],viewQuery:function(n,r){if(n&1&&(ft(Qv,5),ft(Yv,5)),n&2){let s;Ge(s=Qe())&&(r.addTaskModal=s.first),Ge(s=Qe())&&(r.fileInput=s.first)}},decls:69,vars:8,consts:[["addTaskModal",""],[1,"container-fluid","tasks-container"],[1,"tasks-header","mb-4"],[1,"row","g-3"],[1,"col-12","col-md-4","mb-2","mb-md-0"],[1,"mb-0"],[1,"col-12","col-md-8"],[1,"d-flex","flex-column","flex-md-row","gap-2"],[1,"position-relative","flex-grow-1"],[1,"position-absolute",2,"left","12px","top","50%","transform","translateY(-50%)","color","#6c757d"],[1,"fas","fa-search"],["type","text","placeholder","Search tasks...",1,"form-control","ps-5","w-100",2,"border-radius","20px",3,"ngModelChange","input","ngModel"],["class","btn btn-primary flex-shrink-0 d-inline-flex align-items-center justify-content-center",3,"click",4,"ngIf"],[1,"task-filters","mb-4"],[1,"row","g-2"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","pending"],["value","in-progress"],["value","completed"],["value","high"],["value","medium"],["value","low"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-3",4,"ngIf"],[1,"row","g-4"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","flex-shrink-0","d-inline-flex","align-items-center","justify-content-center",3,"click"],[1,"fas","fa-plus","me-2"],[3,"value"],[1,"d-flex","align-items-center"],[1,"task-icon"],[1,"fas","fa-tasks"],[1,"ms-3"],[1,"text-muted"],[1,"avatar","me-2"],["alt","",1,"rounded-circle",3,"src"],[1,"badge",3,"ngClass"],[1,"progress",2,"height","24px","border-radius","12px","background-color","#f0f0f0","box-shadow","inset 0 1px 3px rgba(0,0,0,0.1)"],["role","progressbar",1,"progress-bar","d-flex","align-items-center","justify-content-end","pe-2","fw-medium",3,"ngClass"],[1,"progress-text"],["class","position-absolute start-0 ps-2 text-muted small",4,"ngIf"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"fas","fa-edit"],["class","btn btn-sm btn-outline-success",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"position-absolute","start-0","ps-2","text-muted","small"],[1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fas","fa-check"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","required","",1,"form-control",3,"readonly"],["class","text-danger",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","required","",1,"form-control",3,"readonly"],[1,"row"],[1,"col-md-6","mb-3"],["for","project_id",1,"form-label"],["id","project_id","formControlName","project_id","required","",1,"form-select"],["value","","disabled",""],["for","assigned_to",1,"form-label"],["id","assigned_to","formControlName","assigned_to","required","",1,"form-select"],[4,"ngIf"],["for","priority",1,"form-label"],["id","priority","formControlName","priority","required","",1,"form-select"],["value","medium","selected",""],["for","status",1,"form-label"],["id","status","formControlName","status","required","",1,"form-select"],["value","in_progress"],["for","comments",1,"form-label"],["id","comments","formControlName","comments","rows","3",1,"form-control"],["for","dueDate",1,"form-label"],["type","date","id","dueDate","formControlName","dueDate","required","",1,"form-control",3,"readonly"],["for","progress",1,"form-label"],["type","number","id","progress","formControlName","progress","min","0","max","100","step","1","required","",1,"form-control",3,"input","value"],[1,"form-text"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary","bg-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"alert","alert-danger"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,r){if(n&1){let s=Q();c(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),d(5,"Tasks Management"),l()(),c(6,"div",6)(7,"div",7)(8,"div",8)(9,"span",9),b(10,"i",10),l(),c(11,"input",11),Se("ngModelChange",function(a){return k(s),Ce(r.searchQuery,a)||(r.searchQuery=a),P(a)}),w("input",function(){return k(s),P(r.filterTasks())}),l()(),g(12,Zv,3,0,"button",12),l()()()(),c(13,"div",13)(14,"div",14)(15,"div",15)(16,"select",16),Se("ngModelChange",function(a){return k(s),Ce(r.selectedStatus,a)||(r.selectedStatus=a),P(a)}),w("change",function(){return k(s),P(r.filterTasks())}),c(17,"option",17),d(18,"All Statuses"),l(),c(19,"option",18),d(20,"Pending"),l(),c(21,"option",19),d(22,"In Progress"),l(),c(23,"option",20),d(24,"Completed"),l()()(),c(25,"div",15)(26,"select",16),Se("ngModelChange",function(a){return k(s),Ce(r.selectedPriority,a)||(r.selectedPriority=a),P(a)}),w("change",function(){return k(s),P(r.filterTasks())}),c(27,"option",17),d(28,"All Priorities"),l(),c(29,"option",21),d(30,"High"),l(),c(31,"option",22),d(32,"Medium"),l(),c(33,"option",23),d(34,"Low"),l()()(),c(35,"div",15)(36,"select",16),Se("ngModelChange",function(a){return k(s),Ce(r.selectedProject,a)||(r.selectedProject=a),P(a)}),w("change",function(){return k(s),P(r.filterTasks())}),c(37,"option",17),d(38,"All Projects"),l(),g(39,Jv,2,2,"option",24),l()(),g(40,tb,5,2,"div",25),l()(),c(41,"div",26)(42,"div",27)(43,"div",28)(44,"div",29)(45,"div",30)(46,"table",31)(47,"thead")(48,"tr")(49,"th"),d(50,"Task"),l(),c(51,"th"),d(52,"Project"),l(),c(53,"th"),d(54,"Assignee"),l(),c(55,"th"),d(56,"Status"),l(),c(57,"th"),d(58,"Priority"),l(),c(59,"th"),d(60,"Due Date"),l(),c(61,"th"),d(62,"Progress"),l(),c(63,"th"),d(64,"Actions"),l()()(),c(65,"tbody"),g(66,sb,42,38,"tr",32),l()()()()()()(),g(67,_b,79,25,"ng-template",null,0,gn),l()}n&2&&(u(11),ye("ngModel",r.searchQuery),u(),p("ngIf",r.isAdmin),u(4),ye("ngModel",r.selectedStatus),u(10),ye("ngModel",r.selectedPriority),u(10),ye("ngModel",r.selectedProject),u(3),p("ngForOf",r.projects),u(),p("ngIf",r.isAdmin),u(26),p("ngForOf",r.filteredTasks))},dependencies:[ne,rt,Le,oe,Tr,Bn,Tt,je,ge,kt,Pt,he,Rl,Mt,ue,fe,jl,$l,Ul,Qt,be,_e,xe,we],styles:[".tasks-container[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);min-height:100vh}.tasks-header[_ngcontent-%COMP%]{background:#fff;padding:1.5rem 2rem;border-radius:1rem;box-shadow:0 .5rem 1rem #0000001a;margin-bottom:2rem}.tasks-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.8rem}.readonly-field[_ngcontent-%COMP%]{background-color:#f8f9fa!important;opacity:1!important;cursor:not-allowed!important;pointer-events:none!important;-webkit-user-select:none!important;user-select:none!important}.task-filters[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:1rem;box-shadow:0 .25rem .75rem #0000000d}.form-select[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid #e2e8f0;padding:.75rem;font-weight:500}.form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #6366f140}.task-list[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;box-shadow:0 .25rem .75rem #0000000d;margin-top:2rem}.task-item[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e2e8f0;transition:all .3s ease}.task-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.task-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background:#6366f11a;display:flex;align-items:center;justify-content:center;margin-right:1rem}.task-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--primary-color)}.task-info[_ngcontent-%COMP%]{flex:1}.task-name[_ngcontent-%COMP%]{font-weight:600;color:#1a1a1a;margin-bottom:.25rem}.task-description[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.task-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.task-meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.task-meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#64748b}.progress[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:12px;overflow:hidden;height:24px;min-width:120px;box-shadow:inset 0 1px 3px #0000001a;position:relative}.progress-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding-right:.75rem;font-size:.8rem;font-weight:500;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.2);transition:width .4s ease-in-out,background-color .3s ease;height:100%;border-radius:12px}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important;background-image:linear-gradient(135deg,#dc3545,#c82333)!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;background-image:linear-gradient(135deg,#ffc107,#e0a800)!important;color:#000!important;text-shadow:0 1px 0 rgba(255,255,255,.5)!important}.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important;background-image:linear-gradient(135deg,#28a745,#1e7e34)!important}.progress-text[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.5px;padding:0 4px;border-radius:4px;background-color:#0000001a}.progress-bar[_ngcontent-%COMP%]:hover{opacity:.9}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:.75rem .5rem!important}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;border-radius:.5rem}.badge-pending[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.badge-in-progress[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.badge-completed[_ngcontent-%COMP%]{background-color:#16a34a;color:#fff}.priority-high[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff}.priority-medium[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.priority-low[_ngcontent-%COMP%]{background-color:#16a34a;color:#fff}.modal-content[_ngcontent-%COMP%]{border-radius:1rem;border:none}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0}.modal-body[_ngcontent-%COMP%]{padding:2rem}.btn-group[_ngcontent-%COMP%]{display:flex;gap:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.35rem .5rem;border-radius:.25rem;font-size:.8rem;display:inline-flex;align-items:center;justify-content:center;transition:all .2s}.btn-outline-primary[_ngcontent-%COMP%]{color:#0d6efd;border:1px solid #0d6efd}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#0d6efd;color:#fff}.btn-outline-success[_ngcontent-%COMP%]{color:#198754;border:1px solid #198754}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#198754;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{color:#dc3545;border:1px solid #dc3545}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;width:1rem;height:1rem;display:flex;align-items:center;justify-content:center}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{white-space:nowrap;width:140px}@media (max-width: 768px){.tasks-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.task-filters[_ngcontent-%COMP%]{padding:1rem}.task-list[_ngcontent-%COMP%]{margin-top:1rem}.task-item[_ngcontent-%COMP%]{padding:1rem}.task-meta[_ngcontent-%COMP%]{flex-wrap:wrap}.btn-group[_ngcontent-%COMP%]{flex-wrap:nowrap}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.3rem .4rem;font-size:.75rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:auto}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}}.file-upload-container[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;padding:1.5rem;transition:all .3s ease;background-color:#f8f9fa}.file-upload-container[_ngcontent-%COMP%]:hover{border-color:#0d6efd;background-color:#f1f8ff}.drop-zone[_ngcontent-%COMP%]{min-height:120px;display:flex;align-items:center;justify-content:center;border:2px dashed #dee2e6;border-radius:.5rem;padding:1.5rem;text-align:center;cursor:pointer;transition:all .3s ease}.drop-zone[_ngcontent-%COMP%]:hover, .drop-zone.dragover[_ngcontent-%COMP%]{border-color:#0d6efd;background-color:#f0f7ff}.drop-zone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem;color:#6c757d}.drop-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.25rem;color:#495057}.drop-zone[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d}.drop-zone[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0d6efd;text-decoration:none;font-weight:500}.drop-zone[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.selected-files[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{border-left:3px solid #0d6efd}.file-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;border:1px solid #dee2e6;border-radius:.375rem;margin-bottom:.5rem;background-color:#fff;transition:all .2s ease}.file-preview[_ngcontent-%COMP%]:hover{border-color:#cbd5e0;box-shadow:0 1px 3px #0000000d}.file-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;min-width:0}.file-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;margin-right:.75rem;color:#6c757d;flex-shrink:0}.file-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#212529;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:.5rem}.file-size[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;white-space:nowrap}.bi-file-pdf[_ngcontent-%COMP%]{color:#dc3545}.bi-file-word[_ngcontent-%COMP%]{color:#0d6efd}.bi-file-excel[_ngcontent-%COMP%]{color:#198754}.bi-file-image[_ngcontent-%COMP%]{color:#6f42c1}.bi-file-text[_ngcontent-%COMP%]{color:#6c757d}.progress[_ngcontent-%COMP%]{height:.5rem;background-color:#e9ecef;border-radius:.25rem;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{transition:width .3s ease}@media (max-width: 576px){.drop-zone[_ngcontent-%COMP%]{padding:1rem .5rem}.drop-zone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.file-preview[_ngcontent-%COMP%]{padding:.5rem}.file-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;margin-right:.5rem}.file-name[_ngcontent-%COMP%]{font-size:.85rem}.file-size[_ngcontent-%COMP%]{font-size:.75rem}}[data-bs-theme=dark][_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{background-color:#2b3035;border-color:#495057}[data-bs-theme=dark][_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover, [data-bs-theme=dark][_ngcontent-%COMP%]   .drop-zone.dragover[_ngcontent-%COMP%]{border-color:#0d6efd;background-color:#1a1e21}[data-bs-theme=dark][_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{background-color:#2b3035;border-color:#495057}[data-bs-theme=dark][_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]:hover{border-color:#6c757d;background-color:#2c3034}[data-bs-theme=dark][_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:#f8f9fa}[data-bs-theme=dark][_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%], [data-bs-theme=dark][_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#adb5bd}.modal-content[_ngcontent-%COMP%]{border-radius:.5rem}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding:1rem 1.5rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem;max-height:70vh;overflow-y:auto}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;padding:1rem 1.5rem}.img-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:60vh;object-fit:contain}.pdf-preview[_ngcontent-%COMP%]{width:100%;height:600px;border:1px solid #dee2e6;border-radius:4px;overflow:hidden}.pdf-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.file-preview[_ngcontent-%COMP%]{text-align:center;padding:2rem 0}.file-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#6c757d;margin-bottom:1rem}textarea[_ngcontent-%COMP%]::placeholder{color:#6c757d;opacity:1}textarea[_ngcontent-%COMP%]:placeholder-shown{background-color:#f8f9fa}@media (max-width: 768px){.file-name[_ngcontent-%COMP%]{max-width:200px}.modal-dialog[_ngcontent-%COMP%]{margin:.5rem}.pdf-preview[_ngcontent-%COMP%]{height:400px}}"]})}}return i})();var vb=["addUserModal"],bb=(i,t,e)=>({"bg-success":i,"bg-warning":t,"bg-info":e}),yb=(i,t)=>({"bg-success":i,"bg-danger":t}),cr=i=>({"is-invalid":i});function Cb(i,t){if(i&1&&(c(0,"option",34),d(1),l()),i&2){let e=t.$implicit;p("ngValue",e.name),u(),R(" ",e.name," ")}}function Sb(i,t){if(i&1&&(yr(0),c(1,"span",46),d(2),se(3,"uppercase"),l(),Cr()),i&2){let e=y().$implicit;u(2),D(Me(3,1,(e.username||"U")[0]))}}function Eb(i,t){if(i&1){let e=Q();c(0,"img",47),w("error",function(){k(e);let r=y().$implicit,s=y();return P(s.handleImageError(r))}),l()}if(i&2){let e=y().$implicit;p("src",e.avatar||"",fr)("alt",e.username)}}function wb(i,t){if(i&1){let e=Q();c(0,"button",48),w("click",function(){k(e);let r=y().$implicit,s=y();return P(s.toggleStatus(r))}),b(1,"i",49),l()}}function Tb(i,t){if(i&1){let e=Q();c(0,"tr")(1,"td")(2,"div",35)(3,"div",36),g(4,Sb,4,3,"ng-container",37)(5,Eb,1,2,"ng-template",null,1,gn),l(),c(7,"div")(8,"h6",6),d(9),l(),c(10,"small",38),d(11),l()()()(),c(12,"td"),d(13),l(),c(14,"td")(15,"span",39),d(16),se(17,"titlecase"),l()(),c(18,"td"),d(19),l(),c(20,"td")(21,"span",39),d(22),se(23,"titlecase"),l()(),c(24,"td")(25,"div",40)(26,"button",41),w("click",function(){let r=k(e).$implicit,s=y();return P(s.editUser(r))}),b(27,"i",42),l(),g(28,wb,2,0,"button",43),c(29,"button",44),w("click",function(){let r=k(e).$implicit,s=y();return P(s.deleteUser(r))}),b(30,"i",45),l()()()()}if(i&2){let e=t.$implicit,n=_l(6);u(4),p("ngIf",!e.avatar)("ngIfElse",n),u(5),D(e.username),u(2),D(e.position),u(2),D(e.email),u(2),p("ngClass",Ut(15,bb,e.role==="admin",e.role==="manager",e.role==="user")),u(),R(" ",Me(17,11,e.role)," "),u(3),D(e.department),u(2),p("ngClass",Sr(19,yb,e.status==="active",e.status==="inactive")),u(),R(" ",Me(23,13,e.status)," "),u(6),p("ngIf",e.status==="inactive")}}function Mb(i,t){i&1&&(c(0,"div",72),d(1," Username is required "),l())}function kb(i,t){i&1&&(c(0,"div",72),d(1," Email is required "),l())}function Pb(i,t){i&1&&(c(0,"div",72),d(1," Please enter a valid email "),l())}function Ab(i,t){i&1&&(c(0,"div",72),d(1," Role is required "),l())}function xb(i,t){if(i&1&&(c(0,"option",34),d(1),l()),i&2){let e=t.$implicit;p("ngValue",e.id),u(),R(" ",e.name," ")}}function Ob(i,t){i&1&&(c(0,"div",72),d(1," Department is required "),l())}function Ib(i,t){i&1&&(c(0,"div",72),d(1," Status is required "),l())}function Db(i,t){if(i&1&&(c(0,"span"),b(1,"i",73),d(2),l()),i&2){let e=y(2);u(2),R("",e.editMode?" Update":" Create"," User ")}}function Nb(i,t){i&1&&(c(0,"span"),b(1,"span",74),d(2," Saving... "),l())}function Rb(i,t){if(i&1){let e=Q();c(0,"div",50)(1,"h5",51),d(2),l(),c(3,"button",52),w("click",function(){let r=k(e).$implicit;return P(r.dismiss())}),l()(),c(4,"div",53)(5,"form",54),w("ngSubmit",function(){k(e);let r=y();return P(r.onSubmit())}),c(6,"div",55)(7,"label",56),d(8,"Username"),l(),b(9,"input",57),g(10,Mb,2,0,"div",58),l(),c(11,"div",55)(12,"label",59),d(13,"Email"),l(),b(14,"input",60),g(15,kb,2,0,"div",58)(16,Pb,2,0,"div",58),l(),c(17,"div",55)(18,"label",61),d(19,"Role"),l(),c(20,"select",62)(21,"option",19),d(22,"Select role"),l(),c(23,"option",20),d(24,"Admin"),l(),c(25,"option",21),d(26,"Manager"),l(),c(27,"option",22),d(28,"User"),l()(),g(29,Ab,2,0,"div",58),l(),c(30,"div",55)(31,"label",63),d(32,"Department"),l(),c(33,"select",64)(34,"option",34),d(35,"Select department"),l(),g(36,xb,2,2,"option",23),l(),g(37,Ob,2,0,"div",58),l(),c(38,"div",55)(39,"label",65),d(40,"Status"),l(),c(41,"select",66)(42,"option",19),d(43,"Select status"),l(),c(44,"option",24),d(45,"Active"),l(),c(46,"option",25),d(47,"Inactive"),l()(),g(48,Ib,2,0,"div",58),l(),c(49,"div",67)(50,"button",68),w("click",function(){let r=k(e).$implicit;return P(r.dismiss("cancel"))}),b(51,"i",69),d(52," Cancel "),l(),c(53,"button",70),g(54,Db,3,1,"span",71)(55,Nb,3,0,"span",71),l()()()()}if(i&2){let e,n,r,s,o,a,m,h,f,_,M,S=y();u(2),R("",S.editMode?"Edit":"Add"," User"),u(3),p("formGroup",S.userForm),u(4),p("ngClass",pe(20,cr,((e=S.userForm.get("username"))==null?null:e.invalid)&&((e=S.userForm.get("username"))==null?null:e.touched))),u(),p("ngIf",(n=S.userForm.get("username"))==null||n.errors==null?null:n.errors.required),u(4),p("ngClass",pe(22,cr,((r=S.userForm.get("email"))==null?null:r.invalid)&&((r=S.userForm.get("email"))==null?null:r.touched))),u(),p("ngIf",(s=S.userForm.get("email"))==null||s.errors==null?null:s.errors.required),u(),p("ngIf",(o=S.userForm.get("email"))==null||o.errors==null?null:o.errors.email),u(4),p("ngClass",pe(24,cr,((a=S.userForm.get("role"))==null?null:a.invalid)&&((a=S.userForm.get("role"))==null?null:a.touched))),u(9),p("ngIf",(m=S.userForm.get("role"))==null||m.errors==null?null:m.errors.required),u(4),p("ngClass",pe(26,cr,((h=S.userForm.get("department"))==null?null:h.invalid)&&((h=S.userForm.get("department"))==null?null:h.touched))),u(),p("ngValue",null),u(2),p("ngForOf",S.departments),u(),p("ngIf",(f=S.userForm.get("department"))==null||f.errors==null?null:f.errors.required),u(4),p("ngClass",pe(28,cr,((_=S.userForm.get("status"))==null?null:_.invalid)&&((_=S.userForm.get("status"))==null?null:_.touched))),u(7),p("ngIf",(M=S.userForm.get("status"))==null||M.errors==null?null:M.errors.required),u(5),re("btn-disabled",S.userForm.invalid||S.isSubmitting),p("disabled",S.userForm.invalid||S.isSubmitting),u(),p("ngIf",!S.isSubmitting),u(),p("ngIf",S.isSubmitting)}}var Wu=(()=>{class i{constructor(e,n,r,s,o){this.fb=e,this.userService=n,this.departmentService=r,this.modalService=s,this.router=o,this.departments=[],this.isLoadingDepartments=!1,this.editMode=!1,this.selectedUser=null,this.isSubmitting=!1,this.users=[],this.filteredUsers=[],this.searchQuery="",this.selectedRole="",this.selectedDepartment="",this.selectedStatus="",this.initForm()}ngOnInit(){this.loadUsers(),this.loadDepartments()}loadDepartments(){this.isLoadingDepartments=!0,this.departmentService.getDepartments().subscribe({next:e=>{this.departments=e.data,console.log("Departments API Response:",e),Array.isArray(e)?this.departments=e:e&&e.success&&Array.isArray(e.data)?this.departments=e.data:(console.warn("Unexpected departments response format:",e),this.departments=[]),console.log("Departments loaded:",this.departments),this.isLoadingDepartments=!1},error:e=>{console.error("Error loading departments:",e),this.isLoadingDepartments=!1,this.departments=[]}})}initForm(){this.userForm=this.fb.group({username:["",[O.required,O.minLength(3)]],email:["",[O.required,O.email]],role:["",O.required],department:["",O.required],status:["active",O.required]})}loadUsers(){this.userService.getUsers().subscribe({next:e=>{this.users=e.map(n=>{let r=this.departments.find(o=>o.id===n.department||o.id===Number(n.department)||typeof n.department=="string"&&o.name===n.department);return W(C({},n),{department:r?r.name:n.department||"No Department",department_name:r?r.name:void 0})}),this.filteredUsers=[...this.users]},error:e=>{console.error("Error loading users:",e)}})}filterUsers(){this.filteredUsers=this.users.filter(e=>{let n=e.username.toLowerCase().includes(this.searchQuery.toLowerCase())||e.email.toLowerCase().includes(this.searchQuery.toLowerCase()),r=!this.selectedRole||e.role===this.selectedRole,s=!this.selectedDepartment||e.department===this.selectedDepartment,o=!this.selectedStatus||e.status===this.selectedStatus;return n&&r&&s&&o})}openAddUserModal(){console.log("Opening modal..."),console.log("Modal reference:",this.addUserModal),this.editMode=!1,this.selectedUser=null,this.userForm.reset({status:"active"});let e=this.modalService.open(this.addUserModal,{size:"lg",backdrop:"static",keyboard:!1});console.log("Modal opened:",e)}editUser(e){console.log("Editing user:",e),this.editMode=!0,this.selectedUser=e;let n=this.modalService.open(this.addUserModal,{size:"lg",backdrop:"static",keyboard:!1});if(this.departments.length>0){this.patchUserForm(e);return}this.isLoadingDepartments=!0,this.departmentService.getDepartments().subscribe({next:r=>{Array.isArray(r)?this.departments=r:r?.success&&Array.isArray(r.data)&&(this.departments=r.data),this.patchUserForm(e),this.isLoadingDepartments=!1},error:r=>{console.error("Error loading departments:",r),this.isLoadingDepartments=!1,this.patchUserForm(e)}})}patchUserForm(e){if(!e)return;console.log("Patching form with user:",e),console.log("Available departments:",this.departments);let n=e.department;if(typeof e.department=="string"&&e.department!=="No Department"){let r=this.departments.find(s=>s.name===e.department);r&&(n=r.id)}console.log("Setting department ID:",n),this.userForm.patchValue({username:e.username,email:e.email,role:e.role||"",department:n||"",status:e.status||"active"},{emitEvent:!1}),console.log("Form after patch:",this.userForm.value)}onSubmit(){if(this.userForm.invalid){console.error("Form is invalid:",this.userForm.errors);return}this.isSubmitting=!0;let e={username:this.userForm.value.username,email:this.userForm.value.email,role:this.userForm.value.role,department:this.userForm.value.department,status:this.userForm.value.status};console.log("Submitting form with values:",e),(this.selectedUser?.id?this.userService.updateUser(this.selectedUser.id,e):this.userService.createUser(e)).subscribe({next:r=>{console.log("Operation successful:",r),this.loadUsers(),this.modalService.dismissAll(),this.isSubmitting=!1},error:r=>{console.error("Operation failed:",r),this.isSubmitting=!1,alert(`Failed to ${this.selectedUser?"update":"create"} user. Please try again.`)}})}toggleStatus(e){return le(this,null,function*(){try{let n=e.role==="user"?"admin":"user";yield this.userService.updateUser(e.id,{role:n}),yield this.loadUsers()}catch(n){console.error("Error updating role:",n)}})}deleteUser(e){return le(this,null,function*(){if(confirm("Are you sure you want to delete this user?"))try{yield this.userService.deleteUser(e.id),yield this.loadUsers()}catch(n){console.error("Error deleting user:",n)}})}onFileSelected(e){let n=e.target.files[0];if(n){let r=new FileReader;r.onload=()=>{this.userForm.patchValue({avatar:r.result})},r.readAsDataURL(n)}}handleImageError(e){e.avatar=void 0}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(He),E(Yt),E(At),E(Y))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-users"]],viewQuery:function(n,r){if(n&1&&ft(vb,5),n&2){let s;Ge(s=Qe())&&(r.addUserModal=s.first)}},decls:64,vars:6,consts:[["addUserModal",""],["avatarImage",""],[1,"container-fluid","users-container"],[1,"users-header","mb-4"],[1,"row","g-3"],[1,"col-12","col-md-4","mb-2","mb-md-0"],[1,"mb-0"],[1,"col-12","col-md-8"],[1,"d-flex","flex-column","flex-md-row","gap-2"],[1,"position-relative","flex-grow-1"],[1,"position-absolute",2,"left","12px","top","50%","transform","translateY(-50%)","color","#6c757d"],[1,"fas","fa-search"],["type","text","placeholder","Search users...",1,"form-control","ps-5","w-100",2,"border-radius","20px",3,"ngModelChange","input","ngModel"],[1,"btn","btn-primary","flex-shrink-0",3,"click"],[1,"fas","fa-plus","me-1"],[1,"user-filters","mb-4","gap-2"],[1,"row","g-2"],[1,"col-md-4","gap-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","admin"],["value","manager"],["value","user"],[3,"ngValue",4,"ngFor","ngForOf"],["value","active"],["value","inactive"],[1,"row","g-4"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"bg-primary"],[3,"ngValue"],[1,"d-flex","align-items-center"],[1,"avatar","me-2","d-flex","align-items-center","justify-content-center","bg-light","rounded-circle",2,"width","40px","height","40px"],[4,"ngIf","ngIfElse"],[1,"text-muted"],[1,"badge",3,"ngClass"],[1,"btn-group"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-edit"],["class","btn btn-sm btn-outline-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"text-muted","fw-bold"],["width","40","height","40",1,"rounded-circle",3,"error","src","alt"],[1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fas","fa-check"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","role",1,"form-label"],["id","role","formControlName","role",1,"form-select",3,"ngClass"],["for","department",1,"form-label"],["id","department","formControlName","department",1,"form-select",3,"ngClass"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select",3,"ngClass"],[1,"p-3"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click"],[1,"fas","fa-times","me-1"],["type","submit",1,"btn","btn-primary","px-4",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback"],[1,"fas","fa-save","me-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,r){if(n&1){let s=Q();c(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2",6),d(5,"Users Management"),l()(),c(6,"div",7)(7,"div",8)(8,"div",9)(9,"span",10),b(10,"i",11),l(),c(11,"input",12),Se("ngModelChange",function(a){return k(s),Ce(r.searchQuery,a)||(r.searchQuery=a),P(a)}),w("input",function(){return k(s),P(r.filterUsers())}),l()(),c(12,"button",13),w("click",function(){return k(s),P(r.openAddUserModal())}),b(13,"i",14),d(14,"Add User "),l()()()()(),c(15,"div",15)(16,"div",16)(17,"div",17)(18,"select",18),Se("ngModelChange",function(a){return k(s),Ce(r.selectedRole,a)||(r.selectedRole=a),P(a)}),w("change",function(){return k(s),P(r.filterUsers())}),c(19,"option",19),d(20,"All Roles"),l(),c(21,"option",20),d(22,"Admin"),l(),c(23,"option",21),d(24,"Manager"),l(),c(25,"option",22),d(26,"User"),l()()(),c(27,"div",17)(28,"select",18),Se("ngModelChange",function(a){return k(s),Ce(r.selectedDepartment,a)||(r.selectedDepartment=a),P(a)}),w("change",function(){return k(s),P(r.filterUsers())}),c(29,"option",19),d(30,"All Departments"),l(),g(31,Cb,2,2,"option",23),l()(),c(32,"div",17)(33,"select",18),Se("ngModelChange",function(a){return k(s),Ce(r.selectedStatus,a)||(r.selectedStatus=a),P(a)}),w("change",function(){return k(s),P(r.filterUsers())}),c(34,"option",19),d(35,"All Statuses"),l(),c(36,"option",24),d(37,"Active"),l(),c(38,"option",25),d(39,"Inactive"),l()()()()(),c(40,"div",26)(41,"div",27)(42,"div",28)(43,"div",29)(44,"div",30)(45,"table",31)(46,"thead")(47,"tr")(48,"th"),d(49,"Name"),l(),c(50,"th"),d(51,"Email"),l(),c(52,"th"),d(53,"Role"),l(),c(54,"th"),d(55,"Department"),l(),c(56,"th"),d(57,"Status"),l(),c(58,"th"),d(59,"Actions"),l()()(),c(60,"tbody"),g(61,Tb,31,22,"tr",32),l()()()()()()(),g(62,Rb,56,30,"ng-template",33,0,gn),l()}n&2&&(u(11),ye("ngModel",r.searchQuery),u(7),ye("ngModel",r.selectedRole),u(10),ye("ngModel",r.selectedDepartment),u(3),p("ngForOf",r.departments),u(2),ye("ngModel",r.selectedStatus),u(28),p("ngForOf",r.filteredUsers))},dependencies:[ne,rt,Le,oe,El,Bn,je,ge,kt,Pt,he,Mt,ue,fe,Qt,be,_e,xe,we],styles:[".users-container[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);min-height:100vh}.users-header[_ngcontent-%COMP%]{background:#fff;padding:1.5rem 2rem;border-radius:1rem;box-shadow:0 .5rem 1rem #0000001a;margin-bottom:2rem}.users-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;font-size:1.8rem}.user-filters[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:1rem;box-shadow:0 .25rem .75rem #0000000d}.form-select[_ngcontent-%COMP%]{border-radius:.5rem;border:1px solid #e2e8f0;padding:.75rem;font-weight:500}.form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #6366f140}.user-list[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;box-shadow:0 .25rem .75rem #0000000d;margin-top:2rem}.user-item[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e2e8f0;transition:all .3s ease}.user-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;overflow:hidden;margin-right:1rem}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-info[_ngcontent-%COMP%]{flex:1}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#1a1a1a;margin-bottom:.25rem}.user-position[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.user-email[_ngcontent-%COMP%]{color:#475569;font-size:.875rem}.user-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;display:inline-block}.status-active[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#16a34a}.status-inactive[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background-color:#dc2626}.user-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.user-role[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:.5rem;font-size:.75rem;font-weight:500}.role-admin[_ngcontent-%COMP%]{background-color:#16a34a;color:#fff}.role-manager[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.role-user[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.user-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:1rem}.stat-icon[_ngcontent-%COMP%]{color:#64748b}.modal-content[_ngcontent-%COMP%]{border-radius:1rem;border:none}.modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0}.modal-body[_ngcontent-%COMP%]{padding:2rem}.user-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;max-width:600px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#475569}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:.5rem;border:1px solid #e2e8f0;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 .2rem #6366f140}.btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:.5rem;font-weight:500;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{opacity:1!important;visibility:visible!important;transition:all .3s ease;background-color:#0d6efd;border-color:#0d6efd}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-primary.btn-disabled[_ngcontent-%COMP%]{opacity:.7!important;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b5ed7;border-color:#0a58ca}.btn-primary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center}.spinner-border[_ngcontent-%COMP%]{vertical-align:middle}.btn-outline-primary[_ngcontent-%COMP%]{color:var(--primary-color);border-color:var(--primary-color)}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:#fff}@media (max-width: 768px){.users-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.user-filters[_ngcontent-%COMP%]{padding:1rem}.user-list[_ngcontent-%COMP%]{margin-top:1rem}.user-item[_ngcontent-%COMP%]{padding:1rem}.user-form[_ngcontent-%COMP%]{grid-template-columns:1fr}.user-stats[_ngcontent-%COMP%]{flex-wrap:wrap}}"]})}}return i})();var ut=(()=>{class i{constructor(e,n){this.authService=e,this.router=n}canActivate(e,n){if(e.data.noAuth)return!0;let r=this.authService.currentUserValue;return r&&r.token?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:n.url}}),!1)}static{this.\u0275fac=function(n){return new(n||i)(K(ae),K(Y))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var dr=(()=>{class i{constructor(e,n){this.authService=e,this.router=n}canActivate(){let e=this.authService.currentUserValue;if(console.log("Current user in AdminGuard:",e),!e)return this.router.navigate(["/login"]),!1;let n=e.user?.role==="admin"||e.role==="admin";return console.log("Is admin:",n),n?!0:(this.router.navigate(["/dashboard"]),!1)}static{this.\u0275fac=function(n){return new(n||i)(K(ae),K(Y))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Fb(i,t){i&1&&(c(0,"div",27),d(1," Project name is required "),l())}function Lb(i,t){i&1&&(c(0,"div",27),d(1," Project name must be at least 3 characters "),l())}function Ub(i,t){i&1&&(c(0,"span"),d(1,"Create Project"),l())}function $b(i,t){i&1&&b(0,"span",28)}function jb(i,t){i&1&&(c(0,"span",29),d(1,"Creating..."),l())}function Vb(i,t){if(i&1&&(c(0,"div",30),d(1),l()),i&2){let e=y();u(),D(e.error)}}var Ua=(()=>{class i{get name(){return this.projectForm.get("name")}get description(){return this.projectForm.get("description")}constructor(e,n,r,s){this.fb=e,this.projectService=n,this.authService=r,this.router=s,this.projectAdded=new ht,this.isSubmitting=!1,this.error=null,this.currentDate=new Date,this.currentUser=null,this.projectForm=this.fb.group({name:["",[O.required,O.minLength(3)]],description:[""],created_by:[""],created_at:[this.currentDate]})}ngOnInit(){this.authService.currentUser.subscribe(e=>{this.currentUser=e,console.log("Current User:",this.currentUser),this.currentUser&&this.projectForm.patchValue({created_by:this.currentUser.user?.username||"Unknown User"})})}onSubmit(){if(this.projectForm.invalid)return;this.isSubmitting=!0,this.error=null;let e=W(C({},this.projectForm.value),{created_by:this.currentUser?.user?.id||null,created_by_name:this.currentUser?.user?.username||"Unknown User",status:"active",startDate:new Date().toISOString(),endDate:null});console.log("Submitting project data:",e),this.projectService.createProject(e).subscribe({next:n=>{this.isSubmitting=!1,this.projectAdded.emit(),this.router.navigate(["/dashboard"])},error:n=>{console.error("Error creating project:",n),this.error=n.error?.message||"Failed to create project",this.isSubmitting=!1}})}onCancel(){this.router.navigate(["/dashboard"])}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(cn),E(ae),E(Y))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-project-form"]],outputs:{projectAdded:"projectAdded"},decls:45,vars:16,consts:[[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","rows","3","formControlName","description",1,"form-control"],[1,"card","bg-light","mb-3"],[1,"card-header"],[1,"row"],[1,"col-md-6"],[1,"mb-1"],[1,"text-muted"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary","mx-2",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","ms-2",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"ms-2"],[1,"alert","alert-danger","mt-3","mb-0"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),d(6,"Create New Project"),l()(),c(7,"div",6)(8,"form",7),w("ngSubmit",function(){return r.onSubmit()}),c(9,"div",8)(10,"label",9),d(11,"Project Name *"),l(),b(12,"input",10),g(13,Fb,2,0,"div",11)(14,Lb,2,0,"div",11),l(),c(15,"div",8)(16,"label",12),d(17,"Description"),l(),b(18,"textarea",13),l(),c(19,"div",14)(20,"div",15),d(21,"System Information"),l(),c(22,"div",6)(23,"div",16)(24,"div",17)(25,"p",18)(26,"small",19),d(27,"Created By"),l()(),c(28,"p"),d(29),l()(),c(30,"div",17)(31,"p",18)(32,"small",19),d(33,"Created At"),l()(),c(34,"p"),d(35),se(36,"date"),l()()()()(),c(37,"div",20)(38,"button",21),w("click",function(){return r.onCancel()}),d(39,"Cancel"),l(),c(40,"button",22),g(41,Ub,2,0,"span",23)(42,$b,1,0,"span",24)(43,jb,2,0,"span",25),l()(),g(44,Vb,2,1,"div",26),l()()()()()()),n&2&&(u(8),p("formGroup",r.projectForm),u(4),re("is-invalid",(r.name==null?null:r.name.invalid)&&((r.name==null?null:r.name.dirty)||(r.name==null?null:r.name.touched))),u(),p("ngIf",r.name==null||r.name.errors==null?null:r.name.errors.required),u(),p("ngIf",r.name==null||r.name.errors==null?null:r.name.errors.minlength),u(15),D((r.currentUser==null?null:r.currentUser.username)||"Loading user..."),u(6),D(gt(36,13,r.currentDate,"medium")),u(3),p("disabled",r.isSubmitting),u(2),p("disabled",r.projectForm.invalid||r.isSubmitting),u(),p("ngIf",!r.isSubmitting),u(),p("ngIf",r.isSubmitting),u(),p("ngIf",r.isSubmitting),u(),p("ngIf",r.error))},dependencies:[ne,oe,Tt,be,ge,he,ue,fe,_e,xe],styles:[".card[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;box-shadow:0 .5rem 1rem #0000001a;border:none;border-radius:.5rem;overflow:hidden}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1.25rem 1.5rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5rem;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem;color:#495057}.form-control[_ngcontent-%COMP%]{border-radius:.375rem;padding:.5rem .75rem;border:1px solid #ced4da;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#86b7fe;box-shadow:0 0 0 .25rem #0d6efd40;outline:0}.btn[_ngcontent-%COMP%]{padding:.5rem 1.25rem;border-radius:.375rem;font-weight:500;transition:all .2s ease-in-out}.btn-primary[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0b5ed7;border-color:#0a58ca}.btn-outline-secondary[_ngcontent-%COMP%]{color:#6c757d;border-color:#6c757d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#6c757d;color:#fff}.spinner-border[_ngcontent-%COMP%]{vertical-align:middle}.alert[_ngcontent-%COMP%]{border-radius:.375rem;padding:.75rem 1.25rem;margin-bottom:1.5rem}.bg-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important;border:1px solid #e9ecef}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}@media (max-width: 768px){.card[_ngcontent-%COMP%]{margin:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}}"]})}}return i})();function zb(i,t){i&1&&(c(0,"div",39),d(1," Username is required "),l())}function qb(i,t){i&1&&(c(0,"div",39),d(1," Username must be at least 3 characters "),l())}function Bb(i,t){i&1&&(c(0,"div",39),d(1," Email is required "),l())}function Hb(i,t){i&1&&(c(0,"div",39),d(1," Please enter a valid email "),l())}function Wb(i,t){i&1&&(c(0,"div",39),d(1," Password is required "),l())}function Kb(i,t){i&1&&(c(0,"div",39),d(1," Password must be at least 6 characters "),l())}function Gb(i,t){i&1&&(c(0,"div",39),d(1," Role is required "),l())}function Qb(i,t){if(i&1&&(yr(0),c(1,"option",40),d(2),l(),Cr()),i&2){let e=t.$implicit;u(),p("ngValue",e.id),u(),R(" ",e.name," ")}}function Yb(i,t){i&1&&(c(0,"option",41),d(1,"No departments available"),l())}function Xb(i,t){i&1&&(c(0,"div"),d(1," Department is required "),l())}function Zb(i,t){if(i&1&&(c(0,"div",39),g(1,Xb,2,0,"div",36),l()),i&2){let e=y();u(),p("ngIf",e.department==null||e.department.errors==null?null:e.department.errors.required)}}function Jb(i,t){i&1&&(c(0,"div",42),b(1,"i",43),d(2," Loading departments... "),l())}function ey(i,t){i&1&&(c(0,"div",39),d(1," Status is required "),l())}function ty(i,t){i&1&&(c(0,"span"),d(1,"Create User"),l())}function ny(i,t){i&1&&b(0,"span",44)}function iy(i,t){i&1&&(c(0,"span"),d(1,"Creating..."),l())}function ry(i,t){if(i&1&&(c(0,"div",45),d(1),l()),i&2){let e=y();u(),R(" ",e.error," ")}}var zs=(()=>{class i{constructor(e,n,r,s){this.fb=e,this.userService=n,this.departmentService=r,this.router=s,this.isSubmitting=!1,this.error=null,this.departments=[]}ngOnInit(){this.userForm=this.fb.group({username:["",[O.required,O.minLength(3)]],email:["",[O.required,O.email]],password:["",[O.required,O.minLength(6)]],role:["user",[O.required]],department:[null,[O.required]],status:["active",[O.required]]}),this.loadDepartments(),this.user&&(console.log("Initializing form with user data:",this.user),this.userForm.patchValue({username:this.user.username,email:this.user.email,role:this.user.role||"user",status:this.user.status||"active"}),this.password?.clearValidators(),this.password?.updateValueAndValidity())}loadDepartments(){this.isLoading=!0,console.log("Loading departments..."),this.departmentService.getDepartments().subscribe({next:e=>{console.log("Departments API Response:",e),e?.success&&Array.isArray(e.data)?(this.departments=e.data,console.log("Departments loaded:",this.departments),this.user&&(console.log("Setting department for user:",this.user),this.setDepartmentForUser())):(console.warn("Invalid departments response or empty data"),this.departments=[]),this.isLoading=!1},error:e=>{console.error("Error loading departments:",e),this.departments=[],this.isLoading=!1}})}setDepartmentForUser(){if(!this.user?.department){console.warn("No department found for user");return}let e=this.user.department;console.log("Processing department value:",e);let n=this.departments.find(r=>typeof e=="string"?r.name===e||String(r.id)===e:typeof e=="number"?r.id===e:e&&typeof e=="object"&&"id"in e?r.id===e.id:!1);n?(console.log("Found matching department:",n),this.userForm.patchValue({department:n.id},{emitEvent:!1}),console.log("Form after setting department:",this.userForm.value)):(console.warn("No matching department found for:",e),console.log("Available departments:",this.departments))}onSubmit(){if(this.userForm.invalid){console.log("Form is invalid",this.userForm.errors),Object.keys(this.userForm.controls).forEach(r=>{let s=this.userForm.get(r);s?.errors&&console.log("Validation error in field",r,s.errors)});return}this.isSubmitting=!0,this.error=null;let e={username:String(this.userForm.value.username||"").trim(),email:String(this.userForm.value.email||"").trim().toLowerCase(),password:this.userForm.value.password,role:String(this.userForm.value.role||"user"),department:this.userForm.value.department?Number(this.userForm.value.department):null,status:String(this.userForm.value.status||"active")};console.log("Submitting user data:",e),this.user&&!e.password&&delete e.password,(this.user?this.userService.updateUser(this.user.id,e):this.userService.createUser(e)).pipe(Kt(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.router.navigate(["/users"])},error:r=>{console.error("Error in user operation:",{status:r.status,statusText:r.statusText,error:r.error,message:r.message}),this.error=r.error?.message||r.message||"An error occurred while processing your request"}})}onCancel(){this.router.navigate(["/users"])}trackDepartmentById(e,n){return n.id}get username(){return this.userForm.get("username")}get email(){return this.userForm.get("email")}get password(){return this.userForm.get("password")}get role(){return this.userForm.get("role")}get department(){return this.userForm.get("department")}get status(){return this.userForm.get("status")}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(He),E(Yt),E(Y))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-user-form"]],inputs:{user:"user"},decls:64,vars:36,consts:[[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["for","role",1,"form-label"],["id","role","formControlName","role",1,"form-select"],["value","user"],["value","admin"],[1,"mb-4"],["for","department",1,"form-label"],["id","department","formControlName","department",1,"form-select",3,"disabled"],["disabled","",3,"ngValue"],[4,"ngFor","ngForOf","ngForTrackBy"],["disabled","",4,"ngIf"],["class","text-muted small mt-1",4,"ngIf"],[1,"row","mb-3"],[1,"col-md-6"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-select"],["value","active"],["value","inactive"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"invalid-feedback"],[3,"ngValue"],["disabled",""],[1,"text-muted","small","mt-1"],[1,"fas","fa-spinner","fa-spin","me-1"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"alert","alert-danger","mt-3","mb-0"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),d(6,"Add New User"),l()(),c(7,"div",6)(8,"form",7),w("ngSubmit",function(){return r.onSubmit()}),c(9,"div",8)(10,"label",9),d(11,"Username *"),l(),b(12,"input",10),g(13,zb,2,0,"div",11)(14,qb,2,0,"div",11),l(),c(15,"div",8)(16,"label",12),d(17,"Email *"),l(),b(18,"input",13),g(19,Bb,2,0,"div",11)(20,Hb,2,0,"div",11),l(),c(21,"div",8)(22,"label",14),d(23,"Password *"),l(),b(24,"input",15),g(25,Wb,2,0,"div",11)(26,Kb,2,0,"div",11),l(),c(27,"div",8)(28,"label",16),d(29,"Role *"),l(),c(30,"select",17)(31,"option",18),d(32,"User"),l(),c(33,"option",19),d(34,"Admin"),l()(),g(35,Gb,2,0,"div",11),l(),c(36,"div",20)(37,"label",21),d(38,"Department *"),l(),c(39,"select",22)(40,"option",23),d(41,"Select Department"),l(),g(42,Qb,3,2,"ng-container",24)(43,Yb,2,0,"option",25),l(),g(44,Zb,2,1,"div",11)(45,Jb,3,0,"div",26),l(),c(46,"div",27)(47,"div",28)(48,"label",29),d(49,"Status"),l(),c(50,"select",30)(51,"option",31),d(52,"Active"),l(),c(53,"option",32),d(54,"Inactive"),l()(),g(55,ey,2,0,"div",11),l()(),c(56,"div",33)(57,"button",34),w("click",function(){return r.onCancel()}),d(58," Cancel "),l(),c(59,"button",35),g(60,ty,2,0,"span",36)(61,ny,1,0,"span",37)(62,iy,2,0,"span",36),l()(),g(63,ry,2,1,"div",38),l()()()()()()),n&2&&(u(8),p("formGroup",r.userForm),u(4),re("is-invalid",(r.username==null?null:r.username.invalid)&&((r.username==null?null:r.username.dirty)||(r.username==null?null:r.username.touched))),u(),p("ngIf",r.username==null||r.username.errors==null?null:r.username.errors.required),u(),p("ngIf",r.username==null||r.username.errors==null?null:r.username.errors.minlength),u(4),re("is-invalid",(r.email==null?null:r.email.invalid)&&((r.email==null?null:r.email.dirty)||(r.email==null?null:r.email.touched))),u(),p("ngIf",r.email==null||r.email.errors==null?null:r.email.errors.required),u(),p("ngIf",r.email==null||r.email.errors==null?null:r.email.errors.email),u(4),re("is-invalid",(r.password==null?null:r.password.invalid)&&((r.password==null?null:r.password.dirty)||(r.password==null?null:r.password.touched))),u(),p("ngIf",r.password==null||r.password.errors==null?null:r.password.errors.required),u(),p("ngIf",r.password==null||r.password.errors==null?null:r.password.errors.minlength),u(4),re("is-invalid",(r.role==null?null:r.role.invalid)&&((r.role==null?null:r.role.dirty)||(r.role==null?null:r.role.touched))),u(5),p("ngIf",r.role==null||r.role.errors==null?null:r.role.errors.required),u(4),re("is-invalid",(r.department==null?null:r.department.invalid)&&((r.department==null?null:r.department.dirty)||(r.department==null?null:r.department.touched)))("is-loading",r.isLoading),p("disabled",r.isLoading),u(),p("ngValue",null),u(2),p("ngForOf",r.departments)("ngForTrackBy",r.trackDepartmentById),u(),p("ngIf",r.departments.length===0&&!r.isLoading),u(),p("ngIf",(r.department==null?null:r.department.invalid)&&((r.department==null?null:r.department.dirty)||(r.department==null?null:r.department.touched))),u(),p("ngIf",r.isLoading),u(5),re("is-invalid",(r.status==null?null:r.status.invalid)&&((r.status==null?null:r.status.dirty)||(r.status==null?null:r.status.touched))),u(5),p("ngIf",r.status==null||r.status.errors==null?null:r.status.errors.required),u(2),p("disabled",r.isSubmitting),u(2),p("disabled",r.userForm.invalid||r.isSubmitting),u(),p("ngIf",!r.isSubmitting),u(),p("ngIf",r.isSubmitting),u(),p("ngIf",r.isSubmitting),u(),p("ngIf",r.error))},dependencies:[ne,Le,oe,be,ge,kt,Pt,he,Mt,ue,fe,_e,xe,we],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.badge[_ngcontent-%COMP%]{font-size:.8em;padding:.35em .65em}.card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.comment-input[_ngcontent-%COMP%]{border-top:1px solid #eee;padding-top:1rem;margin-top:1rem}.status-field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.status-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem;display:block}.status-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ced4da;border-radius:.25rem}"]})}}return i})();var sy=i=>({"is-invalid":i});function oy(i,t){i&1&&(c(0,"div",12),d(1," If an account with that email exists, we've sent a password reset link. Please check your email. "),l())}function ay(i,t){if(i&1&&(c(0,"div",13),d(1),l()),i&2){let e=y();u(),R(" ",e.error," ")}}function ly(i,t){i&1&&(c(0,"div"),d(1,"Email is required"),l())}function cy(i,t){i&1&&(c(0,"div"),d(1,"Please enter a valid email"),l())}function dy(i,t){if(i&1&&(c(0,"div",22),g(1,ly,2,0,"div",23)(2,cy,2,0,"div",23),l()),i&2){let e=y(2);u(),p("ngIf",e.f.email.errors.required),u(),p("ngIf",e.f.email.errors.email)}}function uy(i,t){i&1&&b(0,"span",24)}function my(i,t){if(i&1){let e=Q();c(0,"form",14),w("ngSubmit",function(){k(e);let r=y();return P(r.onSubmit())}),c(1,"div",15)(2,"label",16),d(3,"Email address"),l(),b(4,"input",17),g(5,dy,3,2,"div",18),l(),c(6,"div",19)(7,"button",20),g(8,uy,1,0,"span",21),d(9),l()()()}if(i&2){let e=y();p("formGroup",e.forgotForm),u(4),p("ngClass",pe(6,sy,e.submitted&&e.f.email.errors)),u(),p("ngIf",e.submitted&&e.f.email.errors),u(2),p("disabled",e.loading),u(),p("ngIf",e.loading),u(),R(" ",e.loading?"Sending...":"Send Reset Link"," ")}}var Ku=(()=>{class i{constructor(e,n){this.formBuilder=e,this.authService=n,this.loading=!1,this.submitted=!1,this.success=!1,this.error="",this.forgotForm=this.formBuilder.group({email:["",[O.required,O.email]]})}get f(){return this.forgotForm.controls}onSubmit(){this.submitted=!0,this.error="",!this.forgotForm.invalid&&(this.loading=!0,this.authService.forgotPassword(this.f.email.value).pipe(Kt(()=>this.loading=!1)).subscribe({next:()=>{this.success=!0},error:e=>{this.error=e.error?.message||"An error occurred. Please try again."}}))}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(ae))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-forgot-password"]],decls:15,vars:3,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-4"],[1,"card"],[1,"card-body"],[1,"text-center","mb-4"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","mt-3"],[1,"mb-0"],["routerLink","/login",1,"text-decoration-none"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email address",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6,"Forgot Password"),l(),g(7,oy,2,0,"div",6)(8,ay,2,1,"div",7)(9,my,10,8,"form",8),c(10,"div",9)(11,"p",10),d(12," Remember your password? "),c(13,"a",11),d(14,"Back to Login"),l()()()()()()()()),n&2&&(u(7),p("ngIf",r.success),u(),p("ngIf",r.error),u(),p("ngIf",!r.success))},dependencies:[ne,rt,oe,be,ge,he,ue,fe,_e,xe,we,ot],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 1rem #00000026;border-radius:.5rem}.card-body[_ngcontent-%COMP%]{padding:2rem}h2[_ngcontent-%COMP%]{color:#333;font-weight:600}.btn-primary[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:.375rem}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}a[_ngcontent-%COMP%]{color:#0d6efd;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.alert[_ngcontent-%COMP%]{border-radius:.375rem;margin-bottom:1.5rem}"]})}}return i})();var Gu=(()=>{class i{constructor(e){this.activeModal=e,this.title="Confirm",this.message="Are you sure you want to proceed?",this.confirmText="Confirm",this.confirmClass="btn-primary"}confirm(){this.activeModal.close("confirm")}dismiss(e){this.activeModal.dismiss(e)}static{this.\u0275fac=function(n){return new(n||i)(E(zl))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-confirm-dialog"]],inputs:{title:"title",message:"message",confirmText:"confirmText",confirmClass:"confirmClass"},decls:12,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn",3,"click"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"h4",1),d(2),l(),c(3,"button",2),w("click",function(){return r.dismiss("cancel")}),l()(),c(4,"div",3)(5,"p"),d(6),l()(),c(7,"div",4)(8,"button",5),w("click",function(){return r.dismiss("cancel")}),d(9," Cancel "),l(),c(10,"button",6),w("click",function(){return r.confirm()}),d(11),l()()),n&2&&(u(2),D(r.title),u(4),D(r.message),u(4),br(r.confirmClass),u(),R(" ",r.confirmText||"Confirm"," "))},dependencies:[ne,kr],styles:[".modal-footer[_ngcontent-%COMP%]{justify-content:space-between}"]})}}return i})();function py(i,t){i&1&&(c(0,"div",10)(1,"div",11)(2,"span",12),d(3,"Loading..."),l()(),c(4,"p",13),d(5,"Loading departments..."),l()())}function hy(i,t){if(i&1&&(c(0,"div",14),d(1),l()),i&2){let e=y();u(),R(" ",e.error," ")}}function fy(i,t){i&1&&(c(0,"div",10)(1,"p",15),d(2,"No departments found."),l()())}function gy(i,t){if(i&1&&(c(0,"small",32),d(1),l()),i&2){let e=y().$implicit;u(),D(e.description)}}function _y(i,t){if(i&1&&(c(0,"small",33),d(1),se(2,"date"),l()),i&2){let e=y().$implicit;u(),R(" Created: ",gt(2,1,e.created_at,"medium")," ")}}function vy(i,t){if(i&1&&(c(0,"small",32),d(1),se(2,"date"),l()),i&2){let e=y().$implicit;u(),R(" Last updated: ",gt(2,1,e.updated_at,"medium")," ")}}function by(i,t){if(i&1){let e=Q();c(0,"div",18)(1,"div",19)(2,"div",20)(3,"h6",21),d(4),l(),g(5,gy,2,1,"small",22),c(6,"div",23),g(7,_y,3,4,"small",24)(8,vy,3,4,"small",22),l()(),c(9,"div",25)(10,"div",26)(11,"button",27),w("click",function(){let r=k(e).$implicit,s=y(2);return P(s.editDepartment(r))}),b(12,"i",28),c(13,"span",29),d(14,"Edit"),l()(),c(15,"button",30),w("click",function(){let r=k(e).$implicit,s=y(2);return P(s.deleteDepartment(r))}),b(16,"i",31),c(17,"span",29),d(18,"Delete"),l()()()()()()}if(i&2){let e=t.$implicit;u(4),D(e.name),u(),p("ngIf",e.description),u(2),p("ngIf",e.created_at),u(),p("ngIf",e.updated_at)}}function yy(i,t){if(i&1&&(c(0,"div",16),g(1,by,19,4,"div",17),l()),i&2){let e=y();u(),p("ngForOf",e.departments)}}var Qu=(()=>{class i{constructor(e,n){this.departmentService=e,this.modalService=n,this.departments=[],this.isLoading=!1,this.error=null,this.departmentService.departments$.subscribe(r=>{this.departments=r})}ngOnInit(){this.loadDepartments()}loadDepartments(){this.isLoading=!0,this.error=null,this.departmentService.getDepartments().subscribe({next:e=>{this.isLoading=!1},error:e=>{console.error("Error loading departments:",e),this.error="Failed to load departments. Please try again.",this.isLoading=!1}})}editDepartment(e){import("./chunk-NSRZYGPL.js").then(({DepartmentManagementComponent:n})=>{let r=this.modalService.open(n,{size:"lg"});console.log("Editing department:",e),r.componentInstance.isEditMode=!0,r.componentInstance.editingDepartment=C({},e),r.componentInstance.departmentForm.patchValue({name:e.name,description:e.description||""}),r.result.then(s=>{s==="saved"&&this.loadDepartments()},s=>{console.log("Modal dismissed:",s)})})}deleteDepartment(e){let n=this.modalService.open(Gu,{centered:!0,backdrop:"static"});n.componentInstance.title="Confirm Deletion",n.componentInstance.message=`Are you sure you want to delete the department "${e.name}"? This action cannot be undone.`,n.componentInstance.confirmText="Delete",n.componentInstance.confirmClass="btn-danger",n.result.then(r=>{r==="confirm"&&(this.isLoading=!0,this.departmentService.deleteDepartment(e.id).subscribe({next:()=>{this.isLoading=!1},error:s=>{console.error("Error deleting department:",s),this.error=s.message||"Failed to delete department. It may be in use by other records.",this.isLoading=!1}}))},r=>{})}static{this.\u0275fac=function(n){return new(n||i)(E(Yt),E(At))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-departments"]],decls:12,vars:4,consts:[[1,"container","py-4"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body","p-0"],["class","text-center p-4",4,"ngIf"],["class","alert alert-danger m-3",4,"ngIf"],["class","list-group list-group-flush",4,"ngIf"],[1,"text-center","p-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","mb-0"],[1,"alert","alert-danger","m-3"],[1,"text-muted","mb-0"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-start","align-items-md-center"],[1,"flex-grow-1","me-md-3","mb-2","mb-md-0"],[1,"mb-1","d-inline-block","me-2"],["class","text-muted d-block",4,"ngIf"],[1,"mt-1"],["class","text-muted",4,"ngIf"],[1,"d-flex","align-items-center","mt-2","mt-md-0"],[1,"btn-group"],["type","button","title","Edit Department",1,"btn","btn-outline-primary","btn-action",3,"click"],[1,"bi","bi-pencil"],[1,"d-none","d-md-inline","ms-1"],["type","button","title","Delete Department",1,"btn","btn-outline-danger","btn-action","ms-2",3,"click"],[1,"bi","bi-trash"],[1,"text-muted","d-block"],[1,"text-muted"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),d(6,"Departments"),l()(),c(7,"div",6),g(8,py,6,0,"div",7)(9,hy,2,1,"div",8)(10,fy,3,0,"div",7)(11,yy,2,1,"div",9),l()()()()()),n&2&&(u(8),p("ngIf",r.isLoading),u(),p("ngIf",r.error&&!r.isLoading),u(),p("ngIf",!r.isLoading&&r.departments.length===0),u(),p("ngIf",!r.isLoading&&r.departments.length>0))},dependencies:[ne,Le,oe,Tt],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.125);padding:1rem 1.25rem}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:500}.list-group-item[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid rgba(0,0,0,.05)}.list-group-item[_ngcontent-%COMP%]:last-child{border-bottom:none}h6[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:.5rem}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important;font-size:.875rem}.spinner-border[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;border-width:.2em}.alert[_ngcontent-%COMP%]{margin:1rem;border-radius:.25rem}.btn-action[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:.375rem .75rem;display:inline-flex;align-items:center;justify-content:center;transition:all .2s ease;border-radius:.25rem}.btn-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0;font-size:1rem}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem;line-height:1.5;border-radius:.2rem}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#0d6efd;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}.bi[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.4rem .65rem}@media (max-width: 992px){.btn-action[_ngcontent-%COMP%]{min-width:42px;height:42px;padding:.5rem}.btn-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.btn-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}}@media (max-width: 768px){.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:1rem;min-width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:.5rem}}@media (max-width: 767.98px){.card-header[_ngcontent-%COMP%]{padding:.75rem 1rem}.card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem}.list-group-item[_ngcontent-%COMP%]{padding:1rem}}@media (max-width: 576px){.btn-group[_ngcontent-%COMP%]{margin-top:.5rem;width:100%;justify-content:flex-end}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:.5rem}.btn-group-sm[_ngcontent-%COMP%]{white-space:nowrap}"]})}}return i})();var Yu=(()=>{class i{transform(e){let n=Math.floor(e/3600),r=Math.floor(e%3600/60),s=e%60;return[n,r,s].map(o=>o.toString().padStart(2,"0")).join(":")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275pipe=_r({name:"duration",type:i,pure:!0})}}return i})();var Xu=(()=>{class i{exportReport(e,n){let r=new _t;Object.keys(e).forEach(a=>{e[a]&&(r=r.set(a,e[a]))}),r=r.set("type",n);let s=this.authService.getToken(),o={Accept:"application/json"};return s&&(o.Authorization=`Bearer ${s}`),this.http.get(`${this.baseUrl}/export`,{params:r,headers:o,responseType:"blob",withCredentials:!0})}constructor(e,n){this.http=e,this.authService=n,this.baseUrl="http://localhost:3000/api/reports"}getTimeReport(e){let n=new _t;Object.keys(e).forEach(a=>{e[a]!==null&&e[a]!==void 0&&e[a]!==""&&(n=n.set(a,e[a].toString()))});let r=`${this.baseUrl}/time-report`;console.log("Making request to:",r,"with params:",n.toString());let s=this.authService.getToken(),o={"Content-Type":"application/json",Accept:"application/json"};return s&&(o.Authorization=`Bearer ${s}`),this.http.get(r,{params:n,headers:o,withCredentials:!0}).pipe(U(a=>(console.error("API Error Details:",{status:a.status,statusText:a.statusText,url:a.url,error:a.error,headers:a.headers}),ce(()=>new Error(`Failed to load report data: ${a.status} ${a.statusText}`)))))}getTimeSummary(e){let n=new _t;return Object.keys(e).forEach(r=>{e[r]&&(n=n.set(r,e[r]))}),this.http.get(`${this.baseUrl}/time-summary`,{params:n})}getTaskCompletion(e){let n=new _t;return Object.keys(e).forEach(r=>{e[r]&&(n=n.set(r,e[r]))}),this.http.get(`${this.baseUrl}/task-completion`,{params:n})}static{this.\u0275fac=function(n){return new(n||i)(K($e),K(ae))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Sy(i,t){if(i&1&&(c(0,"option",7),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),D(e.username)}}function Ey(i,t){if(i&1&&(c(0,"option",7),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),D(e.name)}}function wy(i,t){if(i&1&&(c(0,"option",7),d(1),l()),i&2){let e=t.$implicit;p("value",e.id),u(),D(e.name)}}function Ty(i,t){if(i&1&&(c(0,"tr")(1,"td"),d(2),l(),c(3,"td"),d(4),l(),c(5,"td"),d(6),l(),c(7,"td"),d(8),l(),c(9,"td"),d(10),se(11,"duration"),l()()),i&2){let e=t.$implicit;u(2),D(e.taskName),u(2),D(e.userName),u(2),D(e.projectName),u(2),D(e.departmentName),u(2),D(Me(11,5,e.duration))}}function My(i,t){if(i&1&&(c(0,"div")(1,"h3"),d(2,"Time Spent per Task/User/Project/Department"),l(),c(3,"table")(4,"thead")(5,"tr")(6,"th"),d(7,"Task"),l(),c(8,"th"),d(9,"User"),l(),c(10,"th"),d(11,"Project"),l(),c(12,"th"),d(13,"Department"),l(),c(14,"th"),d(15,"Duration"),l()()(),c(16,"tbody"),g(17,Ty,12,7,"tr",8),l()()()),i&2){let e=y();u(17),p("ngForOf",e.timeReport)}}function ky(i,t){if(i&1&&(c(0,"tr")(1,"td"),d(2),l(),c(3,"td"),d(4),l()()),i&2){let e=t.$implicit;u(2),D(e.name),u(2),D(e.tasksCompleted)}}function Py(i,t){if(i&1&&(c(0,"div")(1,"h3"),d(2,"User Productivity"),l(),c(3,"table")(4,"thead")(5,"tr")(6,"th"),d(7,"User Name"),l(),c(8,"th"),d(9,"Tasks Completed"),l()()(),c(10,"tbody"),g(11,ky,5,2,"tr",8),l()()()),i&2){let e=y();u(11),p("ngForOf",e.userProductivity)}}function Ay(i,t){if(i&1&&(c(0,"li"),d(1),l()),i&2){let e=t.$implicit;u(),Si(" ",e.label,": ",e.value," ")}}function xy(i,t){if(i&1&&(c(0,"div")(1,"h3"),d(2,"Task Completion Statistics"),l(),c(3,"p"),d(4),l(),c(5,"ul"),g(6,Ay,2,2,"li",8),l()()),i&2){let e=y();u(4),R("Tasks Completed: ",e.taskCompletion.count,""),u(2),p("ngForOf",e.taskCompletion.stats)}}function Oy(i,t){if(i&1&&(c(0,"tr")(1,"td"),d(2),l(),c(3,"td"),d(4),l()()),i&2){let e=t.$implicit;u(2),D(e.name),u(2),D(e.tasksCompleted)}}function Iy(i,t){if(i&1&&(c(0,"div")(1,"div"),d(2),l(),c(3,"div"),d(4),l(),c(5,"table"),g(6,Oy,5,2,"tr",8),l()()),i&2){let e=y();u(2),R("Total Tasks: ",e.reportData.taskSummary.totalTasks,""),u(2),R("Completed Tasks: ",e.reportData.taskSummary.completedTasks,""),u(2),p("ngForOf",e.reportData.userProductivity)}}function Dy(i,t){i&1&&(c(0,"div"),d(1,"Loading report data..."),l())}function Ny(i,t){if(i&1&&(c(0,"tr")(1,"td"),d(2),l(),c(3,"td"),d(4),l(),c(5,"td"),d(6),l()()),i&2){let e=t.$implicit;u(2),D(e.name),u(2),D(e.tasksCompleted),u(2),D(e.email)}}function Ry(i,t){if(i&1&&(c(0,"div",11)(1,"h3"),d(2,"User Productivity"),l(),c(3,"table")(4,"thead")(5,"tr")(6,"th"),d(7,"User Name"),l(),c(8,"th"),d(9,"Tasks Completed"),l(),c(10,"th"),d(11,"Email"),l()()(),c(12,"tbody"),g(13,Ny,7,3,"tr",8),l()()()),i&2){let e=y(2);u(13),p("ngForOf",e.reportData.userProductivity)}}function Fy(i,t){if(i&1&&(c(0,"div")(1,"div",9)(2,"h3"),d(3,"Task Summary"),l(),c(4,"p"),d(5),l(),c(6,"p"),d(7),l(),c(8,"p"),d(9),se(10,"number"),l()(),g(11,Ry,14,1,"div",10),l()),i&2){let e=y();u(5),R("Total Tasks: ",e.reportData.taskSummary.totalTasks,""),u(2),R("Completed Tasks: ",e.reportData.taskSummary.completedTasks,""),u(2),R("Completion Rate: ",gt(10,4,e.reportData.taskSummary.completionRate,"1.0-2"),"%"),u(2),p("ngIf",e.reportData.userProductivity==null?null:e.reportData.userProductivity.length)}}var Zu=(()=>{class i{constructor(e,n,r,s){this.userService=e,this.projectService=n,this.departmentService=r,this.reportService=s,this.filters={userId:"",projectId:"",departmentId:"",startDate:"",endDate:""},this.users=[],this.projects=[],this.departments=[],this.timeReport=[],this.taskCompletion=null,this.userProductivity=[],this.reportData={taskSummary:{totalTasks:0,completedTasks:0,completionRate:0},userProductivity:[],projectStats:[],departmentStats:[]}}ngOnInit(){this.userService.getUsers().subscribe(e=>this.users=e),this.projectService.getProjects().subscribe(e=>this.projects=e),this.departmentService.getDepartments().subscribe(e=>{this.departments=e.data}),this.loadReports()}loadReports(){this.loading=!0,this.reportService.getTimeReport(this.filters).subscribe({next:e=>{this.reportData=e,console.log("Report data:",this.reportData),this.loading=!1},error:e=>{console.error("Error loading report:",e),this.loading=!1}})}export(e){this.reportService.exportReport(this.filters,e).subscribe(n=>{let r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`report.${e}`,s.click(),window.URL.revokeObjectURL(r)})}static{this.\u0275fac=function(n){return new(n||i)(E(He),E(cn),E(Yt),E(Xu))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-reports"]],decls:36,vars:14,consts:[[1,"report-filters"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],[1,"summary-section"],["class","user-productivity",4,"ngIf"],[1,"user-productivity"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"label"),d(2," User: "),c(3,"select",1),Se("ngModelChange",function(o){return Ce(r.filters.userId,o)||(r.filters.userId=o),o}),c(4,"option",2),d(5,"All"),l(),g(6,Sy,2,2,"option",3),l()(),c(7,"label"),d(8," Project: "),c(9,"select",1),Se("ngModelChange",function(o){return Ce(r.filters.projectId,o)||(r.filters.projectId=o),o}),c(10,"option",2),d(11,"All"),l(),g(12,Ey,2,2,"option",3),l()(),c(13,"label"),d(14," Department: "),c(15,"select",1),Se("ngModelChange",function(o){return Ce(r.filters.departmentId,o)||(r.filters.departmentId=o),o}),c(16,"option",2),d(17,"All"),l(),g(18,wy,2,2,"option",3),l()(),c(19,"label"),d(20," Date Range: "),c(21,"input",4),Se("ngModelChange",function(o){return Ce(r.filters.startDate,o)||(r.filters.startDate=o),o}),l(),d(22," - "),c(23,"input",4),Se("ngModelChange",function(o){return Ce(r.filters.endDate,o)||(r.filters.endDate=o),o}),l()(),c(24,"button",5),w("click",function(){return r.loadReports()}),d(25,"Apply Filters"),l(),c(26,"button",5),w("click",function(){return r.export("csv")}),d(27,"Export CSV"),l(),c(28,"button",5),w("click",function(){return r.export("pdf")}),d(29,"Export PDF"),l()(),g(30,My,18,1,"div",6)(31,Py,12,1,"div",6)(32,xy,7,2,"div",6)(33,Iy,7,3,"div",6)(34,Dy,2,0,"div",6)(35,Fy,12,7,"div",6)),n&2&&(u(3),ye("ngModel",r.filters.userId),u(3),p("ngForOf",r.users),u(3),ye("ngModel",r.filters.projectId),u(3),p("ngForOf",r.projects),u(3),ye("ngModel",r.filters.departmentId),u(3),p("ngForOf",r.departments),u(3),ye("ngModel",r.filters.startDate),u(2),ye("ngModel",r.filters.endDate),u(7),p("ngIf",r.timeReport==null?null:r.timeReport.length),u(),p("ngIf",r.userProductivity==null?null:r.userProductivity.length),u(),p("ngIf",r.taskCompletion),u(),p("ngIf",r.reportData),u(),p("ngIf",r.loading),u(),p("ngIf",r.reportData))},dependencies:[ne,Le,oe,Tr,je,kt,Pt,he,Mt,ue,Qt,Yu],styles:[".report-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;align-items:center;background:#f7f7fa;padding:1.2rem 1.5rem;border-radius:8px;margin-bottom:2rem;box-shadow:0 1px 4px #0000000d}.report-filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:500}.report-filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .report-filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.3rem .7rem;border:1px solid #ccc;border-radius:4px;font-size:1rem}.report-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.4rem 1.1rem;background:#1976d2;color:#fff;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:background .2s;margin-left:.3rem}.report-filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#1255a2}h3[_ngcontent-%COMP%]{margin-top:2rem;color:#1976d2}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:1rem 0 2rem;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 4px #0000000a}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.7rem 1rem;text-align:left}th[_ngcontent-%COMP%]{background:#f0f4f8;font-weight:700;color:#333}tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8fafc}ul[_ngcontent-%COMP%]{margin:.7rem 0 2rem 1.5rem;padding:0}@media (max-width: 900px){.report-filters[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:.97rem}}@media (max-width: 600px){.report-filters[_ngcontent-%COMP%]{padding:.7rem;font-size:.98rem}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:.92rem;padding:.5rem}h3[_ngcontent-%COMP%]{margin-top:1.2rem;font-size:1.1rem}}.loading[_ngcontent-%COMP%]{padding:1rem;font-style:italic;color:#666}.report-container[_ngcontent-%COMP%]{margin-top:2rem}.summary-section[_ngcontent-%COMP%], .user-productivity[_ngcontent-%COMP%], .task-completion[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1rem;border:1px solid #eee;border-radius:4px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.5rem;text-align:left;border-bottom:1px solid #eee}th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:700}"]})}}return i})();var Ju=(()=>{class i{transform(e){if(e===0)return"0 Bytes";let n=1024,r=["Bytes","KB","MB","GB","TB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(2))+" "+r[s]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275pipe=_r({name:"fileSize",type:i,pure:!0})}}return i})();var em=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${Mi.apiUrl}/task-attachments`}uploadFile(e,n){let r=`${this.apiUrl}/tasks/${e}/attachments`,s=new Pl("POST",r,n,{reportProgress:!0,responseType:"json"});return this.http.request(s)}getTaskAttachments(e){return this.http.get(`${this.apiUrl}/tasks/${e}/attachments`,{headers:this.getHeaders()})}getHeaders(){let e=localStorage.getItem("auth_token");return e?new Ue({"Content-Type":"application/json",Authorization:`Bearer ${e}`}):new Ue({"Content-Type":"application/json"})}downloadFile(e){return this.http.get(`${this.apiUrl}/download/${e}`,{responseType:"blob"})}deleteFile(e){return this.http.delete(`${this.apiUrl}/${e}`)}deleteAttachment(e){return this.deleteFile(e)}formatFileSize(e){if(e===0)return"0 Bytes";let n=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(2))+" "+r[s]}getFileIcon(e){return e?e.includes("image/")?"fa-file-image":e.includes("pdf")?"fa-file-pdf":e.includes("word")||e.includes("document")||e==="application/msword"||e==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?"fa-file-word":e.includes("excel")||e==="application/vnd.ms-excel"||e==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"?"fa-file-excel":e.includes("text/")?"fa-file-alt":"fa-file":"fa-file"}static{this.\u0275fac=function(n){return new(n||i)(K($e))}}static{this.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Uy=["fileInput"];function $y(i,t){if(i&1){let e=Q();c(0,"div",54),w("click",function(){let r=k(e).$implicit,s=y();return P(s.onTaskSelect(r.id))}),c(1,"div",55)(2,"h6",38),d(3),l(),c(4,"span",39),d(5),l()(),c(6,"small",56),d(7),l()()}if(i&2){let e=t.$implicit,n=y();re("bg-light",e.id===n.taskId),u(3),D(e.title||"Untitled Task"),u(2),D(e.attachments_count||0),u(2),D(e.project_name||"No Project")}}function jy(i,t){i&1&&(c(0,"div",57),b(1,"i",58),d(2," No tasks available "),l())}function Vy(i,t){if(i&1&&(c(0,"p",73),d(1),l()),i&2){let e=y(2);u(),R(" ",e.selectedTask.description," ")}}function zy(i,t){if(i&1&&(c(0,"div",21)(1,"div",11)(2,"div",59)(3,"div")(4,"h4",60),d(5),l(),c(6,"div",61)(7,"span",62),b(8,"i",63),d(9),l(),c(10,"span"),b(11,"i",64),d(12),se(13,"json"),d(14),l()(),g(15,Vy,2,1,"p",65),l(),c(16,"div",66)(17,"button",67),b(18,"i",68),l(),c(19,"ul",69)(20,"li")(21,"a",70),b(22,"i",71),d(23,"Edit Task"),l()(),c(24,"li")(25,"a",70),b(26,"i",72),d(27,"Copy Link"),l()()()()()()()),i&2){let e=y();u(5),D(e.selectedTask.title||"Untitled Task"),u(4),R(" ",e.selectedTask.project_name||"No Project"," "),u(3),R(" Debug: ",Me(13,5,e.selectedTask)," "),u(2),R(" ",e.getAssigneeName(e.selectedTask)||"Unassigned"," "),u(),p("ngIf",e.selectedTask.description)}}function qy(i,t){if(i&1){let e=Q();c(0,"button",84),w("click",function(){k(e);let r=y(2);return P(r.clearFile())}),l()}}function By(i,t){if(i&1&&(c(0,"div",74)(1,"div",75),b(2,"i",76),c(3,"div",77)(4,"div",78)(5,"span",79),d(6),l(),c(7,"span",80),d(8),se(9,"fileSize"),l()(),c(10,"div",81),b(11,"div",82),l()(),g(12,qy,1,0,"button",83),l()()),i&2){let e=y();u(6),R(" ",e.selectedFile.name," "),u(2),D(Me(9,6,e.selectedFile.size)),u(3),vr("width",e.uploadProgress+"%"),Vn("aria-valuenow",e.uploadProgress),u(),p("ngIf",!e.isUploading)}}function Hy(i,t){i&1&&b(0,"span",85)}function Wy(i,t){i&1&&(c(0,"div",86)(1,"div",87)(2,"span",88),d(3,"Loading..."),l()()())}function Ky(i,t){i&1&&(c(0,"div",89),b(1,"i",90),c(2,"h5"),d(3,"No attachments yet"),l(),c(4,"p",5),d(5,"Upload your first file to get started"),l()())}function Gy(i,t){if(i&1){let e=Q();c(0,"li",93)(1,"div",75)(2,"div",94),b(3,"i",95),l(),c(4,"div",77)(5,"div",55)(6,"h6",38),d(7),l(),c(8,"div",66)(9,"button",96),b(10,"i",68),l(),c(11,"ul",69)(12,"li")(13,"a",97),w("click",function(){let r=k(e).$implicit,s=y(2);return P(s.downloadFile(r))}),b(14,"i",98),d(15,"Download "),l()(),c(16,"li")(17,"a",99),w("click",function(){let r=k(e).$implicit,s=y(2);return P(s.confirmDelete(r))}),b(18,"i",100),d(19,"Delete "),l()()()()(),c(20,"div",101)(21,"span",62),d(22),se(23,"fileSize"),l(),c(24,"span"),d(25),se(26,"date"),l()()()()()}if(i&2){let e=t.$implicit,n=y(2);u(3),p("ngClass",n.getFileIcon(e.file_name)),u(4),D(e.file_name),u(15),D(Me(23,4,e.size)),u(3),R("Uploaded ",gt(26,6,e.created_at,"mediumDate"),"")}}function Qy(i,t){if(i&1&&(c(0,"ul",91),g(1,Gy,27,9,"li",92),l()),i&2){let e=y();u(),p("ngForOf",e.attachments)}}var tm=(()=>{class i{constructor(e,n,r,s,o,a,m,h){this.fb=e,this.route=n,this.router=r,this.attachmentService=s,this.authService=o,this.taskService=a,this.userService=m,this.cdRef=h,this.uploadComplete=new ht,this.userCache={},this.tasks=[],this.taskId=null,this.canEdit=!0,this.attachments=[],this.isUploading=!1,this.uploadProgress=0,this.message="",this.messageType="info",this.selectedFile=null,this.isDragging=!1,this.searchQuery="",this.filteredTasks=[],this.currentAttachmentId=null,this.selectedTask=null,this.projects=[],this.users=[],this.uploadForm=this.fb.group({file:[null,O.required]})}filterTasks(){if(!this.searchQuery.trim()){this.filteredTasks=[...this.tasks];return}let e=this.searchQuery.toLowerCase();this.filteredTasks=this.tasks.filter(n=>n.title.toLowerCase().includes(e)||n.description&&n.description.toLowerCase().includes(e))}clearFile(){this.selectedFile=null,this.fileInput&&(this.fileInput.nativeElement.value="",this.filteredTasks=[...this.tasks])}ngOnInit(){console.log("TaskAttachmentsComponent - ngOnInit"),this.loadTasks(),this.task?.id?(this.taskId=+this.task.id,this.checkEditPermissions(),this.loadAttachments()):this.route.paramMap.subscribe(e=>{let n=e.get("taskId")||e.get("id");n?(this.taskId=+n,this.checkEditPermissions(),this.loadAttachments()):console.warn("No taskId found in route params")})}loadTasks(){this.isLoading=!0,this.taskService.getTasks().subscribe({next:e=>{this.tasks=e,this.filteredTasks=[...e],this.isLoading=!1,e.forEach(n=>{n.assigned_to&&this.fetchUserDetails(n.assigned_to)})},error:e=>{console.error("Error loading tasks:",e),this.showMessage("Failed to load tasks","error"),this.isLoading=!1}})}onTaskSelect(e){if(!e){this.selectedTask=null;return}console.log("Selected task ID:",e);let n=this.tasks.find(r=>r.id===e);if(console.log("Found task:",n),!n){this.selectedTask=null;return}console.log("Task properties:",Object.keys(n)),console.log("Assignee object:",n.assignee),console.log("assigned_to_name:",n.assigned_to_name),console.log("assigned_to:",n.assigned_to),this.selectedTask=W(C({},n),{assigned_to_name:n.assigned_to_name||n.assignee?.name||n.assignee?.username||n.assignee?.email?.split("@")[0]||"Unassigned"}),console.log("Final selected task:",this.selectedTask),this.taskId=e,this.loadAttachments()}onFileChange(e){let n=e.target.files[0];n&&(this.selectedFile=n)}uploadFile(){if(!this.selectedFile||!this.taskId){this.showMessage("Please select a file and a task","error");return}this.isUploading=!0,this.uploadProgress=0;let e=new FormData;e.append("file",this.selectedFile),this.attachmentService.uploadFile(this.taskId,e).subscribe({next:n=>{n.type===Al.UploadProgress?this.uploadProgress=Math.round(100*n.loaded/n.total):n instanceof xl&&(this.showMessage("File uploaded successfully","success"),this.loadAttachments(),this.uploadForm.reset(),this.selectedFile=null,this.uploadProgress=0)},error:n=>{console.error("Error uploading file:",n),this.showMessage("Failed to upload file","error"),this.uploadProgress=0},complete:()=>{this.isUploading=!1}})}loadAttachments(){this.taskId&&(this.isLoading=!0,this.attachmentService.getTaskAttachments(this.taskId).subscribe({next:e=>{this.attachments=e,this.isLoading=!1},error:e=>{console.error("Error loading attachments:",e),this.showMessage("Failed to load attachments","error"),this.isLoading=!1}}))}getAssigneeName(e){return e?e.assigned_to_name&&e.assigned_to_name!=="Unassigned"?e.assigned_to_name:e.assignee?.name?e.assignee.name:e.assigned_to?this.userCache[e.assigned_to]?this.userCache[e.assigned_to]:(this.fetchUserDetails(e.assigned_to),"Loading..."):"Unassigned":"Unassigned"}fetchUserDetails(e){if(console.log("Fetching user details for ID:",e),this.userCache[e]){console.log("User already in cache:",this.userCache[e]);return}this.userCache[e]="Loading...",console.log("Current cache state:",this.userCache),this.userService.getUserById(e).subscribe({next:n=>{if(console.log("Raw user data received:",n),n&&(n.name||n.username)){let r=n.name||n.username;console.log("Setting user name:",r),this.userCache[e]=r,console.log("Updated cache:",this.userCache),this.cdRef.detectChanges()}else console.warn("User data missing name/username:",n),this.userCache[e]="Unknown User"},error:n=>{console.error("Error fetching user:",n),console.error("Error details:",{status:n.status,statusText:n.statusText,message:n.message,url:n.url}),this.userCache[e]="Error",this.cdRef.detectChanges()}})}downloadFile(e){this.attachmentService.downloadFile(e.id).subscribe({next:n=>{let r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e.file_name,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),s.remove()},error:n=>{console.error("Error downloading file:",n),this.showMessage("Failed to download file","error")}})}deleteAttachment(e){e&&this.attachmentService.deleteFile(e).subscribe({next:()=>{this.showMessage("Attachment deleted successfully","success"),this.loadAttachments(),this.currentAttachmentId=null;let n=document.getElementById("deleteAttachmentModal");n&&Nt.getInstance(n)?.hide()},error:n=>{console.error("Error deleting attachment:",n),this.showMessage("Error deleting attachment","error")}})}confirmDelete(e){this.currentAttachmentId=e.id;let n=document.getElementById("deleteAttachmentModal");n&&new Nt(n).show()}showMessage(e,n){this.message=e,this.messageType=n,n!=="info"&&setTimeout(()=>{this.message=""},5e3)}checkEditPermissions(){if(!this.authService.currentUser||!this.taskId){this.canEdit=!1;return}this.authService.currentUser.subscribe(e=>{e?this.taskService.getTaskById(this.taskId).subscribe(n=>{this.canEdit=e.role==="admin"||e.id===n.created_by||e.id===n.assigned_to}):this.canEdit=!1})}formatFileSize(e){return this.attachmentService.formatFileSize(e)}formatFileSizeCustom(e){if(e===0)return"0 Bytes";let n=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,s)).toFixed(2))+" "+r[s]}onDragOver(e){e.preventDefault(),this.isDragging=!0}onDragLeave(e){e.preventDefault(),this.isDragging=!1}onDrop(e){e.preventDefault(),this.isDragging=!1;let n=e.dataTransfer?.files;n&&n.length>0&&this.onFileChange({target:{files:n}})}getFileIcon(e){switch(e.split(".").pop()?.toLowerCase()){case"pdf":return"bi-file-earmark-pdf";case"doc":case"docx":return"bi-file-earmark-word";case"xls":case"xlsx":return"bi-file-earmark-excel";case"jpg":case"jpeg":case"png":case"gif":return"bi-file-earmark-image";case"zip":case"rar":return"bi-file-earmark-zip";default:return"bi-file-earmark-text"}}getFileIconCustom(e){return e?e.startsWith("image/")?"fa-file-image":e==="application/pdf"?"fa-file-pdf":e.startsWith("text/")?"fa-file-alt":e.includes("word")?"fa-file-word":e.includes("excel")?"fa-file-excel":e.includes("powerpoint")?"fa-file-powerpoint":e.includes("zip")||e.includes("compressed")?"fa-file-archive":"fa-file":"fa-file"}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(De),E(Y),E(em),E(ae),E(_i),E(He),E(zn))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-task-attachments"]],viewQuery:function(n,r){if(n&1&&ft(Uy,5),n&2){let s;Ge(s=Qe())&&(r.fileInput=s.first)}},inputs:{task:"task"},outputs:{uploadComplete:"uploadComplete"},decls:71,vars:18,consts:[[1,"container-fluid","mt-4"],[1,"row","mb-4"],[1,"col"],[1,"fw-bold","text-primary"],[1,"bi","bi-paperclip","me-2"],[1,"text-muted"],[1,"row"],[1,"col-md-4","mb-4"],[1,"card","shadow-sm","h-100"],[1,"card-header","bg-white"],[1,"card-title","mb-0"],[1,"card-body"],[1,"input-group","mb-3"],[1,"input-group-text","bg-light"],[1,"bi","bi-search","text-muted"],["type","text","placeholder","Search tasks...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"task-list"],["class","task-item p-2 mb-2 border rounded cursor-pointer",3,"bg-light","click",4,"ngFor","ngForOf"],["class","text-center py-4 text-muted",4,"ngIf"],[1,"col-md-8"],["class","card shadow-sm mb-4",4,"ngIf"],[1,"card","shadow-sm","mb-4"],[1,"card-title","mb-4"],["id","fileDropzone",1,"dropzone",3,"ngSubmit","formGroup"],[1,"text-center","p-4","border-2","border-dashed","rounded-3",3,"dragover","dragleave","drop"],["type","file","id","fileInput",1,"d-none",3,"change"],[1,"bi","bi-cloud-arrow-up","fs-1","text-primary"],[1,"mt-3"],[1,"text-muted","mb-3"],["for","fileInput",1,"btn","btn-outline-primary"],[1,"bi","bi-upload","me-2"],[1,"small","text-muted","mt-2","mb-0"],["class","mt-3 p-3 border rounded bg-light",4,"ngIf"],[1,"d-flex","justify-content-end","mt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-primary","rounded-pill"],[1,"card-body","p-0"],["class","text-center p-4",4,"ngIf"],["class","text-center p-5",4,"ngIf"],["class","list-group list-group-flush",4,"ngIf"],["id","deleteAttachmentModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"task-item","p-2","mb-2","border","rounded","cursor-pointer",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted","d-block"],[1,"text-center","py-4","text-muted"],[1,"bi","bi-inbox","fs-1","d-block","mb-2"],[1,"d-flex","justify-content-between","align-items-start"],[1,"card-title","mb-1"],[1,"d-flex","align-items-center","text-muted","mb-2"],[1,"me-3"],[1,"bi","bi-folder","me-1"],[1,"bi","bi-person","me-1"],["class","text-muted mb-0",4,"ngIf"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-sm","btn-outline-secondary"],[1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu","dropdown-menu-end"],["href","#",1,"dropdown-item"],[1,"bi","bi-pencil","me-2"],[1,"bi","bi-link-45deg","me-2"],[1,"text-muted","mb-0"],[1,"mt-3","p-3","border","rounded","bg-light"],[1,"d-flex","align-items-center"],[1,"bi","bi-file-earmark-text","fs-3","me-3","text-primary"],[1,"flex-grow-1"],[1,"d-flex","justify-content-between"],[1,"d-block","text-truncate",2,"max-width","300px"],[1,"text-muted","ms-2"],[1,"progress","mt-2",2,"height","4px"],["role","progressbar",1,"progress-bar"],["type","button","class","btn-close ms-2",3,"click",4,"ngIf"],["type","button",1,"btn-close","ms-2",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center","p-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","p-5"],[1,"bi","bi-file-earmark-text","fs-1","text-muted","mb-3","d-block"],[1,"list-group","list-group-flush"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[1,"file-icon","me-3"],[1,"bi",3,"ngClass"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-link","text-muted"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"bi","bi-download","me-2"],["href","javascript:void(0)",1,"dropdown-item","text-danger",3,"click"],[1,"bi","bi-trash","me-2"],[1,"d-flex","text-muted","small"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),b(4,"i",4),d(5,"Task Attachments "),l(),c(6,"p",5),d(7,"Manage and upload files for your tasks"),l()()(),c(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h5",10),d(13,"Select Task"),l()(),c(14,"div",11)(15,"div",12)(16,"span",13),b(17,"i",14),l(),c(18,"input",15),Se("ngModelChange",function(o){return Ce(r.searchQuery,o)||(r.searchQuery=o),o}),w("input",function(){return r.filterTasks()}),l()(),c(19,"div",16),g(20,$y,8,5,"div",17)(21,jy,3,0,"div",18),l()()()(),c(22,"div",19),g(23,zy,28,7,"div",20),c(24,"div",21)(25,"div",11)(26,"h5",22),d(27,"Upload New File"),l(),c(28,"form",23),w("ngSubmit",function(){return r.uploadFile()}),c(29,"div",24),w("dragover",function(o){return r.onDragOver(o)})("dragleave",function(o){return r.onDragLeave(o)})("drop",function(o){return r.onDrop(o)}),c(30,"input",25),w("change",function(o){return r.onFileChange(o)}),l(),b(31,"i",26),c(32,"h5",27),d(33,"Drag & drop files here"),l(),c(34,"p",28),d(35,"or"),l(),c(36,"label",29),b(37,"i",30),d(38,"Select Files "),l(),c(39,"p",31),d(40,"Supports: PDF, DOC, XLS, JPG, PNG (Max 10MB)"),l()(),g(41,By,13,8,"div",32),c(42,"div",33)(43,"button",34),g(44,Hy,1,0,"span",35),d(45),l()()()()(),c(46,"div",36)(47,"div",37)(48,"h5",38),d(49,"Attachments"),l(),c(50,"span",39),d(51),l()(),c(52,"div",40),g(53,Wy,4,0,"div",41)(54,Ky,6,0,"div",42)(55,Qy,2,1,"ul",43),l()()()()(),c(56,"div",44)(57,"div",45)(58,"div",46)(59,"div",47)(60,"h5",48),d(61,"Delete Attachment"),l(),b(62,"button",49),l(),c(63,"div",50)(64,"p"),d(65,"Are you sure you want to delete this file? This action cannot be undone."),l()(),c(66,"div",51)(67,"button",52),d(68,"Cancel"),l(),c(69,"button",53),w("click",function(){return r.currentAttachmentId!==null&&r.deleteAttachment(r.currentAttachmentId)}),d(70,` Delete
`),l()()()()()),n&2&&(u(18),ye("ngModel",r.searchQuery),u(2),p("ngForOf",r.filteredTasks),u(),p("ngIf",!(r.tasks!=null&&r.tasks.length)),u(2),p("ngIf",r.selectedTask),u(5),p("formGroup",r.uploadForm),u(),re("bg-light",!r.isDragging)("bg-primary-light",r.isDragging),u(12),p("ngIf",r.selectedFile),u(2),p("disabled",!r.selectedFile||r.isUploading),u(),p("ngIf",r.isUploading),u(),R(" ",r.isUploading?"Uploading...":"Upload File"," "),u(6),D(r.attachments.length),u(2),p("ngIf",r.isLoading),u(),p("ngIf",!r.isLoading&&r.attachments.length===0),u(),p("ngIf",!r.isLoading&&r.attachments.length>0),u(14),p("disabled",r.currentAttachmentId===null))},dependencies:[ne,rt,Le,oe,wl,Tt,be,ge,he,ue,fe,_e,je,Qt,Ju],styles:["[_nghost-%COMP%]{display:block;min-height:calc(100vh - 200px)}.card[_ngcontent-%COMP%]{border:none;border-radius:10px;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #0000001a!important}.task-item[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer}.task-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa!important;transform:translate(4px)}.task-item.active[_ngcontent-%COMP%]{border-left:3px solid #0d6efd}.file-icon[_ngcontent-%COMP%]{font-size:2rem;color:#6c757d}.dropzone[_ngcontent-%COMP%]   .border-dashed[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;transition:all .3s}.dropzone[_ngcontent-%COMP%]:hover   .border-dashed[_ngcontent-%COMP%]{border-color:#0d6efd;background-color:#0d6efd0d}.progress[_ngcontent-%COMP%]{height:6px;border-radius:3px}.bg-primary-light[_ngcontent-%COMP%]{background-color:#0d6efd0d}.bi-file-earmark-pdf[_ngcontent-%COMP%]{color:#dc3545}.bi-file-earmark-word[_ngcontent-%COMP%]{color:#2b579a}.bi-file-earmark-excel[_ngcontent-%COMP%]{color:#1d7044}.bi-file-earmark-image[_ngcontent-%COMP%]{color:#6f42c1}.bi-file-earmark-zip[_ngcontent-%COMP%]{color:#fd7e14}.bi-file-earmark-text[_ngcontent-%COMP%]{color:#6c757d}@media (max-width: 768px){.card[_ngcontent-%COMP%]{margin-bottom:1rem}}"]})}}return i})();function Yy(i,t){i&1&&(c(0,"div",6)(1,"p"),d(2,"Your password has been reset successfully!"),l(),c(3,"p",7),d(4,"Redirecting to login page..."),l()())}function Xy(i,t){if(i&1&&(c(0,"div",23),d(1),l()),i&2){let e=y(2);u(),R(" ",e.error," ")}}function Zy(i,t){i&1&&(c(0,"div",24),d(1," Password is required "),l())}function Jy(i,t){i&1&&(c(0,"div",24),d(1," Password must be at least 6 characters long "),l())}function e1(i,t){i&1&&(c(0,"div",24),d(1," Please confirm your password "),l())}function t1(i,t){i&1&&(c(0,"div",24),d(1," Passwords do not match "),l())}function n1(i,t){i&1&&(c(0,"span"),d(1,"Reset Password"),l())}function i1(i,t){i&1&&b(0,"span",25)}function r1(i,t){i&1&&(c(0,"span",26),d(1,"Processing..."),l())}function s1(i,t){if(i&1){let e=Q();c(0,"form",8),w("ngSubmit",function(){k(e);let r=y();return P(r.onSubmit())}),g(1,Xy,2,1,"div",9),c(2,"div",10)(3,"label",11),d(4,"New Password"),l(),b(5,"input",12),g(6,Zy,2,0,"div",13)(7,Jy,2,0,"div",13),l(),c(8,"div",14)(9,"label",15),d(10,"Confirm New Password"),l(),b(11,"input",16),g(12,e1,2,0,"div",13)(13,t1,2,0,"div",13),l(),c(14,"button",17),g(15,n1,2,0,"span",18)(16,i1,1,0,"span",19)(17,r1,2,0,"span",20),l(),c(18,"div",21)(19,"a",22),d(20,"Back to Login"),l()()()}if(i&2){let e,n,r,s,o,a,m=y();p("formGroup",m.resetForm),u(),p("ngIf",m.error),u(4),re("is-invalid",((e=m.resetForm.get("password"))==null?null:e.invalid)&&((e=m.resetForm.get("password"))==null?null:e.touched)),u(),p("ngIf",((n=m.resetForm.get("password"))==null?null:n.touched)&&((n=m.resetForm.get("password"))==null||n.errors==null?null:n.errors.required)),u(),p("ngIf",((r=m.resetForm.get("password"))==null?null:r.touched)&&((r=m.resetForm.get("password"))==null||r.errors==null?null:r.errors.minlength)),u(4),re("is-invalid",(((s=m.resetForm.get("confirmPassword"))==null?null:s.invalid)||(m.resetForm.errors==null?null:m.resetForm.errors.mismatch))&&((s=m.resetForm.get("confirmPassword"))==null?null:s.touched)),u(),p("ngIf",((o=m.resetForm.get("confirmPassword"))==null?null:o.touched)&&((o=m.resetForm.get("confirmPassword"))==null||o.errors==null?null:o.errors.required)),u(),p("ngIf",(m.resetForm.errors==null?null:m.resetForm.errors.mismatch)&&((a=m.resetForm.get("confirmPassword"))==null?null:a.touched)),u(),p("disabled",m.resetForm.invalid||m.isLoading),u(),p("ngIf",!m.isLoading),u(),p("ngIf",m.isLoading),u(),p("ngIf",m.isLoading)}}var nm=(()=>{class i{constructor(e,n,r,s){this.formBuilder=e,this.route=n,this.router=r,this.authService=s,this.token="",this.isLoading=!1,this.error=null,this.success=!1,this.resetForm=this.formBuilder.group({password:["",[O.required,O.minLength(6)]],confirmPassword:["",O.required]},{validator:this.passwordMatchValidator})}ngOnInit(){console.log("ResetPasswordComponent initialized"),console.log("Current URL:",window.location.href),this.route.queryParams.subscribe(e=>{if(console.log("Query params:",e),this.token=e.token,console.log("Token from URL:",this.token),!this.token){this.error="Invalid or missing reset token. Please use the link from your email.",console.error("No token found in URL");return}this.error=null,console.log("Token found and set successfully")})}passwordMatchValidator(e){return e.get("password")?.value===e.get("confirmPassword")?.value?null:{mismatch:!0}}onSubmit(){if(this.resetForm.markAllAsTouched(),this.resetForm.invalid){console.log("Form is invalid",this.resetForm.errors),this.error="Please fill in all required fields correctly.";return}if(!this.token){console.error("No reset token found"),this.error="Invalid or expired reset link. Please request a new password reset.";return}if(this.resetForm.hasError("mismatch")){this.error="Passwords do not match.";return}this.isLoading=!0,this.error=null,console.log("Sending reset to backend with:",{token:this.token,password:this.resetForm.value.password}),this.authService.resetPassword(this.token,this.resetForm.value.password).subscribe({next:e=>{console.log("Password reset successful",e),this.success=!0,this.isLoading=!1,this.resetForm.reset(),setTimeout(()=>{this.router.navigate(["/login"],{queryParams:{passwordReset:"success"}})},3e3)},error:e=>{console.error("Error resetting password:",e),this.error=e.error?.error||e.error?.message||e.message||"Failed to reset password. The link may have expired. Please request a new password reset.",this.isLoading=!1}})}static{this.\u0275fac=function(n){return new(n||i)(E(ve),E(De),E(Y),E(ae))}}static{this.\u0275cmp=ee({type:i,selectors:[["app-reset-password"]],decls:7,vars:2,consts:[[1,"reset-password-container"],[1,"card"],[1,"card-body"],[1,"card-title","text-center","mb-4"],["class","alert alert-success",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-success"],[1,"mb-0"],[3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"form-group","mb-3"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter new password",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-4"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm new password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100","mb-3",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","ms-2",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/login"],[1,"alert","alert-danger"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"ms-2"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),d(4,"Reset Your Password"),l(),g(5,Yy,5,0,"div",4)(6,s1,21,14,"form",5),l()()()),n&2&&(u(5),p("ngIf",r.success),u(),p("ngIf",!r.success))},dependencies:[ne,oe,be,ge,he,ue,fe,_e,xe,we,ot],styles:[".reset-password-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f8f9fa;padding:20px}.card[_ngcontent-%COMP%]{width:100%;max-width:400px;border:none;border-radius:10px;box-shadow:0 .5rem 1rem #00000026}.card-body[_ngcontent-%COMP%]{padding:2rem}.card-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:300;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ddd;border-radius:5px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.btn-primary[_ngcontent-%COMP%]{padding:.75rem;font-weight:500;background-color:#007bff;border:none;border-radius:5px;transition:background-color .15s ease-in-out}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.alert[_ngcontent-%COMP%]{border-radius:5px;margin-bottom:1.5rem;padding:1rem}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #c3e6cb;color:#155724}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.invalid-feedback[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.875rem;color:#dc3545}a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .15s ease-in-out}a[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}}return i})();var im=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",component:ju},{path:"forgot-password",component:Ku},{path:"dashboard",component:qu,canActivate:[ut]},{path:"tasks",component:Hu,canActivate:[ut]},{path:"users",component:Wu,canActivate:[ut,dr]},{path:"test",component:zs},{path:"users/new",component:zs,canActivate:[ut,dr]},{path:"users/:id",component:zs,canActivate:[ut,dr]},{path:"projects/new",component:Ua,canActivate:[ut]},{path:"projects/:id",component:Ua,canActivate:[ut]},{path:"department-management",component:Pr,canActivate:[ut,dr]},{path:"departments",component:Qu,canActivate:[ut]},{path:"tasks/attachments",component:tm,canActivate:[ut]},{path:"reports",component:Zu,canActivate:[ut]},{path:"reset-password",component:nm,data:{noAuth:!0}},{path:"**",redirectTo:"/dashboard"}];kl(Vd,{providers:[Ol(),Uu(),Zs(we.forRoot(im)),Zs(kr)]}).catch(i=>console.error(i));
